<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Example: a BCOoL Operator between the TFSM and Activity languages.</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2"><link rel="home" href="Guide.html" title="GEMOC Studio User Guide"><link rel="up" href="ch05.html" title="Chapter&nbsp;5.&nbsp;Compose languages"><link rel="prev" href="ch05.html" title="Chapter&nbsp;5.&nbsp;Compose languages"><link rel="next" href="ch06.html" title="Chapter&nbsp;6.&nbsp;Deploy languages"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Example: a BCOoL Operator between the TFSM and Activity languages.</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch05.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;5.&nbsp;Compose languages</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="ch06.html">Next</a></td></tr></table><hr></div><div class="section" title="Example: a BCOoL Operator between the TFSM and Activity languages."><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_example_a_bcool_operator_between_the_tfsm_and_activity_languages"></a>Example: a BCOoL Operator between the TFSM and Activity languages.</h2></div></div></div><p>To illustrate the use of BCOoL, we propose to develop a simple operator between the TFSM and Activity languages. This operator specifies a coordination pattern in which <span class="strong"><strong>FSMEvents</strong></span> from the TFSM language and <span class="strong"><strong>Actions</strong></span> from the Activity are coordinated by relying on their names. The goal here is to develop an operator that can be used latter in the modeling workbench to coordinate any pair of TFSM and Activity models. In particular, in the following section, we use this operator to coordinate the heterogeneous models of a coffee machine. We also use this example to show some of the BCOoL syntax. The reader can find a more precise description <a class="link" href="https://hal.inria.fr/hal-01182773/document" target="_top">here</a>. Figure 2 illustrates the specification of BCOoL by using the GEMOC studio, we detail this specification as follows. The full project can be found in <a class="link" href="https://github.com/gemoc/gemoc-studio/tree/master/official_samples/bcool_TFSMAndActivity/modeling_workbench" target="_top">here</a>. For this example, we use the GEMOC studio version 2.1.0, build id: 2016-02-17, which can be downloaded from <a class="link" href="http://gemoc.org/pub/studio/time_shifting_versions/" target="_top">here</a>.</p><p>This operator synchronizes FSMEvents and Actions. This is done by coordinating instances of DSE <span class="emphasis"><em>occurs</em></span> and instances of DSE <span class="emphasis"><em>executeIt</em></span>. To specify this in BCOoL, we first define a specification named <span class="emphasis"><em>TfsmAndActivities</em></span> and we import the language behavioral interface of each language, named <span class="emphasis"><em>activity</em></span> and <span class="emphasis"><em>tfsm</em></span> (Figure 2, line 6 and 7). Then, the operator <span class="emphasis"><em>SyncFSMEventsAndActions</em></span> is defined, which refers to the DSE <span class="emphasis"><em>occurs</em></span> and <span class="emphasis"><em>executeIt</em></span>, mapped as <span class="emphasis"><em>FSMEventOccurs</em></span> and <span class="emphasis"><em>ActionExecute</em></span> respectively (Figure 2, line 11).</p><p>In BCOoL, operators are used to specify when and how instances of the referred DSE must be coordinated. To do so, each operator contains a <span class="emphasis"><em>correspondence matching</em></span> and a <span class="emphasis"><em>coordination rule</em></span>. The former is used to select instances of DSE and the latter is used to express how the selected instances must be coordinated.</p><p>A <span class="emphasis"><em>correspondence matching</em></span> selects instances of DSE by using a <span class="emphasis"><em>Condition</em></span> that contains an OCL Boolean expression. To express the boolean expression, the context of the DSE can be queried to get a specific syntactic element, e.g., attribute <span class="emphasis"><em>name</em></span>. The boolean condition is thus used to compare the queried elements. The correspondence matching acts as a precondition for the coordination rule, i.e., it is a predicate that defines when the coordination rule must be applied to the given instances of DSE. For instance, for our example, we query the context of the DSE to get the attribute <span class="emphasis"><em>name</em></span>. Then, the attributes are used as operands for the boolean condition (Figure 2, line 6 and 7). When an instance of DSE <span class="emphasis"><em>occurs</em></span> and an instance of DSE <span class="emphasis"><em>executeIt</em></span> have the same name, the pairs are selected and the coordination rule is applied.</p><p>The <span class="emphasis"><em>coordination rule</em></span> specifies how the selected instances of DSE must be coordinated. To do so, it contains an <span class="emphasis"><em>EventRelation</em></span> and possibly some <span class="emphasis"><em>EventVariables</em></span>. The event relation is used to restrict the relative order of the occurrences of events used as parameters. Its actual parameters can be instances of DSE, some <span class="emphasis"><em>EventVariables</em></span> and/or constants (e.g., integer constants). For this simple example, we only show the use of Event Relations. The operator must specify a strong synchronization between the events. To express that, we use the event relation <span class="emphasis"><em>Rendezvous</em></span> between the selected instances of DSE <span class="emphasis"><em>occurs</em></span> and <span class="emphasis"><em>executeIt</em></span> (Figure 2, line 14). This relation accepts two events as arguments and forces the occurrences of these events to happen simultaneously.</p><div class="figure"><a name="d0e2275"></a><p class="title"><b>Figure&nbsp;5.2.&nbsp;Screenshot of the GEMOC Language Workbench showing the BCOoL specification.</b></p><div class="figure-contents"><div class="mediaobject"><img src="http://timesquare.inria.fr/BCOoL/images/producttfsmandactivitiesbcool.jpg" alt="Overview of the BCOoL approach"></div></div></div><br class="figure-break"><p></p><p>We want to highlight that, for the moment, the edition of a BCOoL specification is done in the modeling workbench together with its application to coordinate models. The definition and the application should be two tasks done separately. The specification should be done in the <span class="emphasis"><em>language workbench</em></span> while the application should be done in the <span class="emphasis"><em>modeling workbench</em></span>. We are working to fix that soon. In the section <a class="link" href="https://github.com/gemoc/gemoc-studio/wiki/GuideMW_CoordinatingModelExecution_Section" target="_top">Coordinating Model Execution</a>, we continue this example by using the operator previously defined to coordinate the heterogeneous models of a coffee machine.</p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch05.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch05.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="ch06.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;5.&nbsp;Compose languages&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="Guide.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;6.&nbsp;Deploy languages</td></tr></table></div></body></html>