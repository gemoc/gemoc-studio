<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Use constraint automata to define the MoCC</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2"><link rel="home" href="Guide.html" title="GEMOC Studio Guide"><link rel="up" href="ch03.html" title="Chapter&nbsp;3.&nbsp;Tutorial: Make Marked Graph models executable with the GEMOC Studio"><link rel="prev" href="ch03s07.html" title="Define a MoCCML library"><link rel="next" href="bi01.html" title="Bibliography"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Use constraint automata to define the MoCC</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch03s07.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;3.&nbsp;Tutorial: Make Marked Graph models executable with the GEMOC Studio</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="bi01.html">Next</a></td></tr></table><hr></div><div class="section" title="Use constraint automata to define the MoCC"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_use_constraint_automata_to_define_the_mocc"></a>Use constraint automata to define the MoCC</h2></div></div></div><p>Sometimes, it may be easier to define the MoCC using automata.  For
example, we can see a place as something on which we can read a token
(ont output transition reads one token) or we can write a token (one
input transition writes one token).  A token can only be read if there
is at least one in the place.  Initially, there is as much token in
the place as in the initial token count of the place.</p><div class="section" title="Define the constraint automaton using MoCCML editor"><div class="titlepage"><div><div><h3 class="title"><a name="_define_the_constraint_automaton_using_moccml_editor"></a>Define the constraint automaton using MoCCML editor</h3></div></div></div><p>For explanations on how to use the MoCCML editor, please refer to the GEMOC
manual. TODO: provide the URL to it.</p><p>We first define the declaration of a relation (placeReadWriteDef).  Here after
is its graphical representation.  This relation is parameterized by the r clock (some one how wants to read a token), the w clock (someone how wants to write a token, and n the initial count of token in the place).</p><div class="figure"><a name="d0e2908"></a><p class="title"><b>Figure&nbsp;3.31.&nbsp;Graphical declaration of the placeReadWriteDef relation</b></p><div class="figure-contents"><div class="mediaobject"><img src="./images/MarkedGraph/MoCCML-diagram.png" alt="Graphical definition of a relation"></div></div></div><br class="figure-break"><p>Then we can define this relation. Here after is the resulting automaton. The
local variable count represent the number of tokens in this place.  s0 is the
initial state. The action on the transition from s0 to s initialize count with
n (the parameter).  The two reflexive transitions on s explain what happens
when w or r occurs.  The write transition is fired when w occurs and  a token is assed in the place (count is incremented). The read transition is fired when r occurs.  It removes a token and thus decrements count.
A guard prevents the read transition to be fired if there is not at liste one token in the place (count &gt;= one).</p><div class="figure"><a name="d0e2919"></a><p class="title"><b>Figure&nbsp;3.32.&nbsp;Automaton defining the placeReadWriteDef relation.</b></p><div class="figure-contents"><div class="mediaobject"><img src="./images/MarkedGraph/MoCCML-automata.png" alt="Automaton defining the placeReadWriteDef relation"></div></div></div><br class="figure-break"><p>Here is the textual representation of this constraint automata.</p><p title="Textual representation of the constraint automata."><b>Textual representation of the constraint automata.&nbsp;</b>
</p><pre class="screen">AutomataConstraintLibrary markedgraph{
	import "platform:/plugin/fr.inria.aoste.timesquare.ccslkernel.model/ccsllibrary/kernel.ccslLib" as kernel;
	import "platform:/plugin/fr.inria.aoste.timesquare.ccslkernel.model/ccsllibrary/CCSL.ccslLib" as ccsl;

	RelationLibrary placeLib {

		AutomataRelationDefinition placeReadWriteDef[placeReadWrite]{

			variables {
				Integer MAX = 10
				Integer count = 0

			}

			init: s0

			from s0 to s : init
			-&gt; (do count = n.value)

			from s to s : read
			-&gt; ( when r if( count &gt;= one) do count = (count - one))

			from s to s : write
			-&gt; ( when w do count = (count + one))

			State s0 (out : init)
			State s( in : read, write, init
				out : write, read
			)

		}

		RelationDeclaration placeReadWrite(r:clock, w: clock, n: int)
	}
}</pre><p title="Textual representation of the constraint automata.">
</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch03s07.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch03.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="bi01.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Define a MoCCML library&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="Guide.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Bibliography</td></tr></table></div></body></html>