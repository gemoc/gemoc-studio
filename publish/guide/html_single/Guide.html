<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>GEMOC Studio Guide</title><link rel="stylesheet" href="css/docbook.css" type="text/css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="en" class="book" title="GEMOC Studio Guide"><div class="titlepage"><div><div><h1 class="title"><a name="d0e3"></a>GEMOC Studio Guide</h1></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="preface"><a href="#_introduction">Introduction</a></span></dt><dd><dl><dt><span class="section"><a href="#_language_workbench_overview_inlinemediaobject_imageobject_imagedata_fileref_images_icons_iconegemoclanguage_16_png_contentwidth_16_contentdepth_16_imageobject_textobject_phrase_iconegemoclanguage_16_phrase_textobject_inlinemediaobject">1. Language Workbench overview <span class="inlinemediaobject"><img src="./images/icons/IconeGemocLanguage_16.png" width="16" height="16" alt="IconeGemocLanguage_16"></span></a></span></dt><dt><span class="section"><a href="#_modeling_workbench_overview_inlinemediaobject_imageobject_imagedata_fileref_images_icons_iconegemocmodel_16_png_contentwidth_16_contentdepth_16_imageobject_textobject_phrase_iconegemocmodel_16_phrase_textobject_inlinemediaobject">2. Modeling workbench overview <span class="inlinemediaobject"><img src="./images/icons/IconeGemocModel_16.png" width="16" height="16" alt="IconeGemocModel_16"></span></a></span></dt><dt><span class="section"><a href="#_general_concerns_and_prerequisite">3. General concerns and prerequisite</a></span></dt></dl></dd><dt><span class="chapter"><a href="#gemoc-language-workbench">1. GEMOC Language Workbench <span class="inlinemediaobject"><img src="./images/icons/IconeGemocLanguage_16.png" width="16" height="16" alt="IconeGemocLanguage_16"></span></a></span></dt><dd><dl><dt><span class="section"><a href="#_overview">1.1. Overview</a></span></dt><dt><span class="section"><a href="#section-gemoc-language-project">1.2. xDSML Project</a></span></dt><dd><dl><dt><span class="section"><a href="#_purpose">1.2.1. Purpose</a></span></dt><dt><span class="section"><a href="#_creating_the_xdsml_project">1.2.2. Creating the xDSML Project</a></span></dt><dt><span class="section"><a href="#_editing_the_xdsml_project">1.2.3. Editing the xDSML Project</a></span></dt></dl></dd><dt><span class="section"><a href="#section-define-AS-project">1.3. Domain Model Project</a></span></dt><dd><dl><dt><span class="section"><a href="#_purpose_2">1.3.1. Purpose</a></span></dt><dt><span class="section"><a href="#_creating_the_domain_model_project">1.3.2. Creating the Domain Model Project</a></span></dt><dt><span class="section"><a href="#_editing_the_domain_model_project">1.3.3. Editing the Domain Model Project</a></span></dt></dl></dd><dt><span class="section"><a href="#section-define-dsa-project">1.4. Defining the Domain-Specific Actions (DSA) Project</a></span></dt><dd><dl><dt><span class="section"><a href="#_purpose_3">1.4.1. Purpose</a></span></dt><dt><span class="section"><a href="#_creating_the_dsa_project">1.4.2. Creating the DSA Project</a></span></dt><dt><span class="section"><a href="#_editing_the_dsa_project">1.4.3. Editing the DSA Project</a></span></dt><dt><span class="section"><a href="#_testing_the_domain_specific_actions">1.4.4. Testing the Domain-Specific Actions</a></span></dt></dl></dd><dt><span class="section"><a href="#defining-a-concrete-syntax-section">1.5. Defining a Concrete Syntax</a></span></dt><dd><dl><dt><span class="section"><a href="#defining-a-concrete-syntax-with-xtext-section">1.5.1. Defining a Concrete Syntax with Xtext</a></span></dt><dt><span class="section"><a href="#defining-a-concrete-syntax-with-sirius-section">1.5.2. Defining a Concrete Syntax with Sirius</a></span></dt></dl></dd><dt><span class="section"><a href="#section-defining-a-mocc">1.6. Defining a Model of Concurrency and Communication (MoCC)</a></span></dt><dd><dl><dt><span class="section"><a href="#_introduction_2">1.6.1. Introduction</a></span></dt><dt><span class="section"><a href="#_the_ecl_approach_to_identify_dse_and_constraints">1.6.2. The ECL approach to identify DSE and constraints</a></span></dt><dt><span class="section"><a href="#_the_moccml_approach_to_define_constraints">1.6.3. The MoCCML approach to define constraints</a></span></dt></dl></dd><dt><span class="section"><a href="#_defining_the_domain_specific_events_dse">1.7. Defining the Domain-Specific Events (DSE)</a></span></dt><dd><dl><dt><span class="section"><a href="#_purpose_4">1.7.1. Purpose</a></span></dt><dt><span class="section"><a href="#_creating_the_dse_project">1.7.2. Creating the DSE Project</a></span></dt><dt><span class="section"><a href="#_editing_the_dse_project">1.7.3. Editing the DSE Project</a></span></dt></dl></dd><dt><span class="section"><a href="#_defining_the_indexterm_primary_feedback_specification_primary_indexterm_feedback_specification">1.8. Defining the Feedback Specification</a></span></dt><dd><dl><dt><span class="section"><a href="#_purpose_5">1.8.1. Purpose</a></span></dt><dt><span class="section"><a href="#_creating_a_indexterm_primary_feedback_policy_primary_indexterm_feedback_policy">1.8.2. Creating a Feedback Policy</a></span></dt><dt><span class="section"><a href="#_semantics_of_the_feedback_policy">1.8.3. Semantics of the Feedback Policy</a></span></dt></dl></dd><dt><span class="section"><a href="#defining-a-debug-representation-section">1.9. Defining a debug representation</a></span></dt><dd><dl><dt><span class="section"><a href="#_the_debug_representation_wizard">1.9.1. The debug representation wizard</a></span></dt><dt><span class="section"><a href="#_implementation_details">1.9.2. Implementation details</a></span></dt></dl></dd><dt><span class="section"><a href="#language-workbench-dashboard-section">1.10. Language workbench dashboard</a></span></dt><dd><dl><dt><span class="section"><a href="#_open_the_dashboard">1.10.1. Open the dashboard</a></span></dt><dt><span class="section"><a href="#_overview_2">1.10.2. Overview</a></span></dt><dt><span class="section"><a href="#_sections">1.10.3. Sections</a></span></dt><dt><span class="section"><a href="#_projects_view">1.10.4. Projects view</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#chapter-gemoc-modeling-workbench">2. GEMOC Modeling workbench</a></span></dt><dd><dl><dt><span class="section"><a href="#_modeling_workbench_overview">2.1. Modeling workbench overview</a></span></dt><dt><span class="section"><a href="#section-editing-model">2.2. Editing model</a></span></dt><dd><dl><dt><span class="section"><a href="#modeling-workbench-editing-model-with-sirius-section">2.2.1. Editing model with Sirius</a></span></dt><dt><span class="section"><a href="#section-modeling-workbench-editing-model-with-emf-tree-editor">2.2.2. Editing model with EMF Tree Editor</a></span></dt></dl></dd><dt><span class="section"><a href="#modeling-workbench-executing-model-section">2.3. Executing model</a></span></dt><dd><dl><dt><span class="section"><a href="#_launch_configuration">2.3.1. Launch configuration</a></span></dt><dt><span class="section"><a href="#modeling-workbench-executing-model-engine-view-section">2.3.2. Engine View</a></span></dt><dt><span class="section"><a href="#_logical_steps_view">2.3.3. Logical Steps View</a></span></dt><dt><span class="section"><a href="#modeling-workbench-executing-model-timeline-view-section">2.3.4. Timeline View</a></span></dt><dt><span class="section"><a href="#modeling-workbench-executing-model-event-manager-view-section">2.3.5. Stimuli Manager View</a></span></dt><dt><span class="section"><a href="#modeling-workbench-executing-model-animation-view-section">2.3.6. Animation View</a></span></dt><dt><span class="section"><a href="#modeling-workbench-executing-model-debug-view-section">2.3.7. Debug View</a></span></dt><dt><span class="section"><a href="#modeling-workbench-executing-model-variable-view-section">2.3.8. Variable View</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#_tutorial_make_marked_graph_models_executable_with_the_gemoc_studio">3. Tutorial: Make Marked Graph models executable with the GEMOC Studio</a></span></dt><dd><dl><dt><span class="section"><a href="#_what_is_expected_at_the_end_of_this_tutorial">3.1. What is expected at the end of this tutorial</a></span></dt><dt><span class="section"><a href="#_install_the_projects_defining_the_marked_graph_as_and_cs">3.2. Install the projects defining the Marked Graph AS and CS</a></span></dt><dd><dl><dt><span class="section"><a href="#_import_the_marked_graph_as_and_cs">3.2.1. Import the Marked Graph AS and CS</a></span></dt><dt><span class="section"><a href="#_abstract_syntax">3.2.2. Abstract Syntax</a></span></dt><dt><span class="section"><a href="#_concrete_syntax_and_sample_model">3.2.3. Concrete Syntax and Sample Model</a></span></dt></dl></dd><dt><span class="section"><a href="#_set_up_an_xdsml_project">3.3. Set up an xDSML project</a></span></dt><dd><dl><dt><span class="section"><a href="#_create_an_xdsml_project">3.3.1. Create an xDSML Project</a></span></dt><dt><span class="section"><a href="#_open_xdsml_view">3.3.2. Open xDSML View</a></span></dt><dt><span class="section"><a href="#_select_the_as">3.3.3. Select the AS</a></span></dt><dt><span class="section"><a href="#_select_the_graphical_editor">3.3.4. Select the Graphical Editor</a></span></dt></dl></dd><dt><span class="section"><a href="#_define_the_execution_semantics">3.4. Define the Execution Semantics</a></span></dt><dd><dl><dt><span class="section"><a href="#_define_dsa">3.4.1. Define DSA</a></span></dt><dt><span class="section"><a href="#_define_dse">3.4.2. Define DSE</a></span></dt></dl></dd><dt><span class="section"><a href="#_define_animation_viewpoint">3.5. Define Animation Viewpoint</a></span></dt><dd><dl><dt><span class="section"><a href="#_create_a_debug_representation_as_an_extension_of_the_graphical_editor_viewpoint">3.5.1. Create a debug representation (as an extension of the graphical editor viewpoint)</a></span></dt><dt><span class="section"><a href="#_create_an_animation_representation">3.5.2. Create an animation representation</a></span></dt></dl></dd><dt><span class="section"><a href="#_animate_a_model">3.6. Animate a Model</a></span></dt><dd><dl><dt><span class="section"><a href="#_launch_the_modelling_workbench">3.6.1. Launch the Modelling WorkBench</a></span></dt><dt><span class="section"><a href="#_import_the_project_with_a_sample_model">3.6.2. Import the project with a sample model</a></span></dt><dt><span class="section"><a href="#_select_the_modeling_perspective">3.6.3. Select the Modeling perspective</a></span></dt><dt><span class="section"><a href="#_create_a_launch_configuration">3.6.4. Create a Launch Configuration</a></span></dt><dt><span class="section"><a href="#_launch_the_execution_of_the_model">3.6.5. Launch the execution of the model</a></span></dt><dt><span class="section"><a href="#_select_a_logical_step">3.6.6. Select a logical step</a></span></dt><dt><span class="section"><a href="#_stop_the_execution">3.6.7. Stop the execution</a></span></dt></dl></dd><dt><span class="section"><a href="#_define_a_moccml_library">3.7. Define a MoCCML library</a></span></dt><dd><dl><dt><span class="section"><a href="#_define_a_moccml_library_using_ccsl">3.7.1. Define a MoCCML library using CCSL</a></span></dt><dt><span class="section"><a href="#_using_it_in_the_ecl_file">3.7.2. Using it in the ECL file</a></span></dt></dl></dd><dt><span class="section"><a href="#_use_constraint_automata_to_define_the_mocc">3.8. Use constraint automata to define the MoCC</a></span></dt><dd><dl><dt><span class="section"><a href="#_define_the_constraint_automaton_using_moccml_editor">3.8.1. Define the constraint automaton using MoCCML editor</a></span></dt></dl></dd></dl></dd><dt><span class="bibliography"><a href="#_bibliography">Bibliography</a></span></dt><dt><span class="glossary"><a href="#_glossary">Glossary</a></span></dt><dt><span class="index"><a href="#_index">Index</a></span></dt></dl></div><div class="list-of-figures"><p><b>List of Figures</b></p><dl><dt>1. <a href="#img-GemocWorkbenchesGlobalPicture">Gemoc Workbenches Global Picture</a></dt><dt>1.1. <a href="#figure-glw-screenshot-of-language_workbench">Screenshot of the GEMOC Language Workbench showing the design of a Timed Finite State Machine (TFSM) example.</a></dt><dt>1.2. <a href="#figure-glw-screenshot-of-moccmlLevelFirst">Screenshot of the First graphical level of Edition in MoCCML.</a></dt><dt>1.3. <a href="#figure-glw-screenshot-of-moccmlLevelSecond">Screenshot of the Second graphical level of Edition in MoCCML (Constraint Implementation).</a></dt><dt>2.1. <a href="#figure-glw-screenshot-of-modeling_workbench">Screenshot of GEMOC Studio Modeling Workbench on the TFSM example (execution and animation).</a></dt><dt>3.1. <a href="#d0e1894">Expected animation for Marked Graph models</a></dt><dt>3.2. <a href="#d0e1963">Abstract Syntax (Metamodel) of MarkedGraph</a></dt><dt>3.3. <a href="#d0e1983">Example of a Marked Graph model (from wikipedia)</a></dt><dt>3.4. <a href="#d0e2011">Create an xDSML Project</a></dt><dt>3.5. <a href="#d0e2025">Define the name of the project</a></dt><dt>3.6. <a href="#d0e2042">Define the name of the language</a></dt><dt>3.7. <a href="#d0e2062">Content of the xDSML Project</a></dt><dt>3.8. <a href="#d0e2073">The xDSML Editor</a></dt><dt>3.9. <a href="#d0e2087">Browse to select the AS project</a></dt><dt>3.10. <a href="#d0e2098">Browse to select the genmodel resource</a></dt><dt>3.11. <a href="#d0e2109">Browse to select the root container</a></dt><dt>3.12. <a href="#d0e2125">Select Sirius graphical editor</a></dt><dt>3.13. <a href="#d0e2203">Abstract Syntax of MarkedGraph extended with Execution Data (ED) and Execution Functions (EF)</a></dt><dt>3.14. <a href="#d0e2220">Create a K3 Project</a></dt><dt>3.15. <a href="#d0e2245">Definition of the DSA (ED and EF)</a></dt><dt>3.16. <a href="#d0e2275">Create a DSE Project</a></dt><dt>3.17. <a href="#d0e2294">Template of the ECL file</a></dt><dt>3.18. <a href="#d0e2319">Definition of the DSE (events and constraints)</a></dt><dt>3.19. <a href="#d0e2391">Create GEMOC debug representation wizard</a></dt><dt>3.20. <a href="#d0e2402">Select "Extends an existing diagram description"</a></dt><dt>3.21. <a href="#d0e2413">Select the viewpoint to extend</a></dt><dt>3.22. <a href="#d0e2424">Information of the animation viewpoint</a></dt><dt>3.23. <a href="#d0e2633">Define the Marked Graph Modeling Workbench configuration</a></dt><dt>3.24. <a href="#d0e2693">Define the configuration to run the wikipedia example</a></dt><dt>3.25. <a href="#d0e2729">The wikipedia model is just started</a></dt><dt>3.26. <a href="#d0e2743">One logical step selected</a></dt><dt>3.27. <a href="#d0e2754">Execute a logical step</a></dt><dt>3.28. <a href="#d0e2765">Transition t1 fired</a></dt><dt>3.29. <a href="#d0e2774">Transition t2 fired</a></dt><dt>3.30. <a href="#d0e2783">Some logical steps later</a></dt><dt>3.31. <a href="#d0e2860">Graphical declaration of the placeReadWriteDef relation</a></dt><dt>3.32. <a href="#d0e2871">Automaton defining the placeReadWriteDef relation.</a></dt></dl></div><div class="preface" title="Introduction"><div class="titlepage"><div><div><h2 class="title"><a name="_introduction"></a>Introduction</h2></div></div></div><p>The GEMOC Studio offers 2 main usages:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Building and composing new executable DSML. This mode is intended to be used by language designers and language integrators (aka domain experts).</li><li class="listitem">Creating and executing models conformant to executable DSMLs. This mode is intended to be used by domain designers.</li></ul></div><p>Each of these usage has it own set of tools that are referenced as <span class="strong"><strong>Gemoc Language workbench</strong></span> for the tools for <span class="emphasis"><em>language designers</em></span> and <span class="strong"><strong>Gemoc Modeling Workbench</strong></span> for the tools for <span class="emphasis"><em>domain designers</em></span>.</p><div class="figure"><a name="img-GemocWorkbenchesGlobalPicture"></a><div class="figure-contents"><div class="mediaobject"><img src="images/intro/GemocWorkbenchesGlobalPicture.png" width="960" height="720" border="0" usemap="#map" />

<map name="map">
<area shape="rect" coords="142,145,337,182" href="Guide.html#section-define-AS-project" />
<area shape="rect" coords="149,208,335,270" href="Guide.html#section-define-dsa-project" />
<area shape="rect" coords="187,287,299,353" href="Guide.html#defining-a-concrete-syntax-section" />
<area shape="rect" coords="175,481,331,519" href="Guide.html#section-editing-model" />
<area shape="rect" coords="164,560,340,625" href="Guide.html#modeling-workbench-executing-model-section" />
<area shape="rect" coords="438,141,567,290" href="Guide.html#gemoc-language-workbench" />
<area shape="rect" coords="440,466,567,638" href="Guide.html#_modeling_workbench_overview" />
</map></div></div><p class="title"><b>Figure&nbsp;1.&nbsp;Gemoc Workbenches Global Picture</b></p></div><br class="figure-break"><p>In this document:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">items or roles relative to the Language Workbench are identified with the following icon : <span class="inlinemediaobject"><img src="./images/icons/IconeGemocLanguage_32.png" width="48" height="48" alt="IconeGemocLanguage_32"></span></li><li class="listitem">items or roles relative to the Modeling Workbench are identified with the following icon : <span class="inlinemediaobject"><img src="./images/icons/IconeGemocModel_32.png" width="48" height="48" alt="IconeGemocModel_32"></span></li></ul></div><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p xmlns="">The latest version of this document is available online from <a class="link" href="http://gemoc.github.io/gemoc-studio/" target="_top">http://gemoc.github.io/gemoc-studio/</a></p></div><div class="section" title="1.&nbsp;Language Workbench overview"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_language_workbench_overview_inlinemediaobject_imageobject_imagedata_fileref_images_icons_iconegemoclanguage_16_png_contentwidth_16_contentdepth_16_imageobject_textobject_phrase_iconegemoclanguage_16_phrase_textobject_inlinemediaobject"></a>1.&nbsp;Language Workbench overview <span class="inlinemediaobject"><img src="./images/icons/IconeGemocLanguage_16.png" width="16" height="16" alt="IconeGemocLanguage_16"></span></h2></div></div></div><p>The GEMOC Language Workbench allows building and composing new executable DSMLs.</p><p>To acheive that, it offers appropriate tools and guidance for the underlying activities wich are grouped in categories.</p><p title="Build executable language"><b>Build executable language.&nbsp;</b>The first main activity is to build an executable language. The language designer is assited by a dedicated Dashboard to guide him during his work.</p><p>This first dashboard groups the activities as follow:</p><div class="variablelist"><dl><dt><span class="term">Create a language</span></dt><dd><p class="simpara">This activity can be decomposed in activities in two groups :</p><div class="variablelist"><dl><dt><span class="term">Domain model (abstract syntax)</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Create the abstract syntax with EMF (incl., the ecore model and the genmodel)</li></ul></div></dd><dt><span class="term"><a class="link" href="#defining-a-concrete-syntax-section" title="1.5.&nbsp;Defining a Concrete Syntax">Model editors (concrete syntax)</a></span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><a class="link" href="#defining-a-concrete-syntax-with-sirius-section" title="1.5.2.&nbsp;Defining a Concrete Syntax with Sirius">Create a graphical editor with Sirius Designer</a></li><li class="listitem">Create a textual editor with Xtext</li></ul></div></dd></dl></div></dd><dt><span class="term">Make your language executable</span></dt><dd><p class="simpara">This activity is decomposed in 2 main parts:</p><div class="variablelist"><dl><dt><span class="term">Sequential Execution semantics</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Create the execution semantics with Kermeta and Melange</li></ul></div></dd><dt><span class="term">Concurrent Execution semantics</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Create the Domain-Specific Actions with Kermeta and Melange</li><li class="listitem">Create the Domain-Specific Events with ECL</li><li class="listitem">Create a library of Model of Computation with MoccML</li></ul></div></dd></dl></div></dd><dt><span class="term">Define the runtime environnement for the language</span></dt><dd><div class="variablelist"><dl><dt><span class="term">Model Debugger</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Select your breakpointable elements</li></ul></div></dd><dt><span class="term">Model dynamic representation (for debugging, animation, monitoring)</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Create the graphical representation with Sirius Animator</li><li class="listitem">Plug your own add-ons</li></ul></div></dd></dl></div></dd></dl></div><p>TODO add links to the corresponding sections in the main chapters</p><p>TODO: add snapshot of the dashboard</p><p title="Compose executable languages"><b>Compose executable languages.&nbsp;</b>The second main activity is to define the composition between executable languages.
The language integrator is also assisted by a dedicated dashboard that proposes the following activity groups:</p><div class="variablelist"><dl><dt><span class="term">Compose languages</span></dt><dd><p class="simpara">This activity can be decomposed in activities in two groups :</p><div class="variablelist"><dl><dt><span class="term">Create composition operators</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Create operators with BCOoL</li></ul></div></dd></dl></div></dd><dt><span class="term">Combine languages</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Select a set of language to combine</li><li class="listitem">Apply composition operators to a set of languages.</li><li class="listitem">Customize composition</li></ul></div></dd></dl></div><p>TODO: add snapshot of the dashboard</p></div><div class="section" title="2.&nbsp;Modeling workbench overview"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_modeling_workbench_overview_inlinemediaobject_imageobject_imagedata_fileref_images_icons_iconegemocmodel_16_png_contentwidth_16_contentdepth_16_imageobject_textobject_phrase_iconegemocmodel_16_phrase_textobject_inlinemediaobject"></a>2.&nbsp;Modeling workbench overview <span class="inlinemediaobject"><img src="./images/icons/IconeGemocModel_16.png" width="16" height="16" alt="IconeGemocModel_16"></span></h2></div></div></div><p>The GEMOC Modeling Workbench allows the use of available languages to create and execute models.</p><div class="variablelist"><dl><dt><span class="term">Create Models</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Use available editors to create domain models.</li></ul></div></dd><dt><span class="term">Execute and debug models</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Use execution engine</li><li class="listitem">Use step by step debugger</li><li class="listitem">Analyse time trace</li></ul></div></dd><dt><span class="term">Animate models</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Use animation views</li></ul></div></dd></dl></div></div><div class="section" title="3.&nbsp;General concerns and prerequisite"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_general_concerns_and_prerequisite"></a>3.&nbsp;General concerns and prerequisite</h2></div></div></div><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p xmlns="">In order to run, Eclipse workbench work better with additional memory. Use the following setting to start Eclipse: -Xms1024m -Xmx1024m -XX:PermSize=512m -XX:MaxPermSize=512m</p></div></div></div><div class="chapter" title="Chapter&nbsp;1.&nbsp;GEMOC Language Workbench"><div class="titlepage"><div><div><h2 class="title"><a name="gemoc-language-workbench"></a>Chapter&nbsp;1.&nbsp;GEMOC Language Workbench <span class="inlinemediaobject"><img src="./images/icons/IconeGemocLanguage_16.png" width="16" height="16" alt="IconeGemocLanguage_16"></span></h2></div></div></div><div class="section" title="1.1.&nbsp;Overview"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_overview"></a>1.1.&nbsp;Overview</h2></div></div></div><p>The <span class="strong"><strong><a class="indexterm" name="d0e278"></a>GEMOC Language Workbench</strong></span> is intended to be used by the <a class="indexterm" name="d0e283"></a>Language Designers and the <a class="indexterm" name="d0e287"></a>Language Integrators. It provides the tools to create and compose eXecutable Domain-Specific Modeling Languages (xDSMLs) using the GEMOC approach.</p><div class="figure"><a name="figure-glw-screenshot-of-language_workbench"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/gemoc_language_workbench_TFSM_screenshot.png" width="800" alt="Screenshot of the GEMOC Language Workbench"></div></div><p class="title"><b>Figure&nbsp;1.1.&nbsp;Screenshot of the GEMOC Language Workbench showing the design of a Timed Finite State Machine (TFSM) example.</b></p></div><br class="figure-break"><p><a class="indexterm" name="d0e301"></a>
<a class="indexterm" name="d0e307"></a></p><p></p></div><div class="section" title="1.2.&nbsp;xDSML Project"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="section-gemoc-language-project"></a>1.2.&nbsp;xDSML Project</h2></div></div></div><div class="section" title="1.2.1.&nbsp;Purpose"><div class="titlepage"><div><div><h3 class="title"><a name="_purpose"></a>1.2.1.&nbsp;Purpose</h3></div></div></div><p>The xDSML Project is the core project of languages created using the GEMOC Studio. It has two main purposes:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Referencing the different projects implementing the various parts constituting an xDSML;</li><li class="listitem">Guiding the <a class="indexterm" name="d0e327"></a>Language Designer in the language creation process through the <a class="indexterm" name="d0e331"></a>GEMOC Dashboard illustrating the workflow of creating an xDSML using the GEMOC Studio.</li></ul></div></div><div class="section" title="1.2.2.&nbsp;Creating the xDSML Project"><div class="titlepage"><div><div><h3 class="title"><a name="_creating_the_xdsml_project"></a>1.2.2.&nbsp;Creating the xDSML Project</h3></div></div></div><p>In the GEMOC Studio, go to: <span class="emphasis"><em>File &gt; New &gt; Project&#8230;&#8203; &gt; New GEMOC Language Project</em></span>. This will create a new xDSML Project in your workspace.</p></div><div class="section" title="1.2.3.&nbsp;Editing the xDSML Project"><div class="titlepage"><div><div><h3 class="title"><a name="_editing_the_xdsml_project"></a>1.2.3.&nbsp;Editing the xDSML Project</h3></div></div></div><p>The main file constituting the xDSML Project is the <span class="emphasis"><em>project.xdsml</em></span>. To edit this file, open it with the <span class="emphasis"><em>XDSML Model Editor</em></span>.</p><p>From the information contained in this file, the project generates additional code that is used by the Execution Engine during the execution of models conforming to the xDSML (see <a class="xref" href="#chapter-gemoc-modeling-workbench" title="Chapter&nbsp;2.&nbsp;GEMOC Modeling workbench">Chapter&nbsp;2, <i>GEMOC Modeling workbench</i></a>).</p></div></div><div class="section" title="1.3.&nbsp;Domain Model Project"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="section-define-AS-project"></a>1.3.&nbsp;Domain Model Project</h2></div></div></div><div class="section" title="1.3.1.&nbsp;Purpose"><div class="titlepage"><div><div><h3 class="title"><a name="_purpose_2"></a>1.3.1.&nbsp;Purpose</h3></div></div></div><p>The Domain Model Project specifies the concepts of the domain at hand and the structural relations between the concepts.</p></div><div class="section" title="1.3.2.&nbsp;Creating the Domain Model Project"><div class="titlepage"><div><div><h3 class="title"><a name="_creating_the_domain_model_project"></a>1.3.2.&nbsp;Creating the Domain Model Project</h3></div></div></div><p>The GEMOC Studio relies on the Eclipse Modeling Framework for its Domain Model Projects. See <a class="link" href="http://eclipse.org/modeling/emf/" target="_top">the EMF website</a> for more information on how to create an EMF project in Eclipse. The Domain Model is materialized as an Ecore metamodel.</p><p>When your EMF Project is done, connect your xDSML Project to it by specifying in the <span class="emphasis"><em>project.xdsml</em></span> file the name of the EMF Project, the path to the genmodel of your Ecore metamodel and the name of the root element as <span class="emphasis"><em>package::root</em></span>.</p><p>TODO: Melange?</p></div><div class="section" title="1.3.3.&nbsp;Editing the Domain Model Project"><div class="titlepage"><div><div><h3 class="title"><a name="_editing_the_domain_model_project"></a>1.3.3.&nbsp;Editing the Domain Model Project</h3></div></div></div><p>If you wish to modify your Domain Model, do not forget to reload the associated genmodel and regenerate the EMF model code (and edit/editor code if you use them).</p></div></div><div class="section" title="1.4.&nbsp;Defining the Domain-Specific Actions (DSA) Project"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="section-define-dsa-project"></a>1.4.&nbsp;Defining the Domain-Specific Actions (DSA) Project</h2></div></div></div><div class="section" title="1.4.1.&nbsp;Purpose"><div class="titlepage"><div><div><h3 class="title"><a name="_purpose_3"></a>1.4.1.&nbsp;Purpose</h3></div></div></div><p>The Domain-Specific Actions define the runtime state (<span class="strong"><strong>Execution Data</strong></span>) of the model and the operations (<span class="strong"><strong>Execution Functions</strong></span>) which modify the runtime state of the model.</p></div><div class="section" title="1.4.2.&nbsp;Creating the DSA Project"><div class="titlepage"><div><div><h3 class="title"><a name="_creating_the_dsa_project"></a>1.4.2.&nbsp;Creating the DSA Project</h3></div></div></div><p>In the GEMOC Studio, the DSA are implemented using <a class="link" href="https://github.com/diverse-project/k3/wiki" target="_top">Kermeta 3</a>.
To create a new DSA Project, in the main menu of the GEMOC Studio, go to: <span class="emphasis"><em>File &gt; New &gt; Project&#8230;&#8203; &gt; K3 Project</em></span>. In the wizard, create it as a Plug-in with EMF using the template of your choice.
Then, connect the xDSML Project to the DSA Project by referencing the DSA Project in the <span class="emphasis"><em>project.xdsml</em></span> file.</p></div><div class="section" title="1.4.3.&nbsp;Editing the DSA Project"><div class="titlepage"><div><div><h3 class="title"><a name="_editing_the_dsa_project"></a>1.4.3.&nbsp;Editing the DSA Project</h3></div></div></div><p>Kermeta 3 is based on <a class="link" href="http://www.eclipse.org/xtend/index.html" target="_top">xTend</a>. The Execution Data and Execution Functions are defined through aspects weaved onto the metaclasses of the Domain Model.</p><div class="section" title="1.4.3.1.&nbsp;Defining the Execution Data"><div class="titlepage"><div><div><h4 class="title"><a name="_defining_the_execution_data"></a>1.4.3.1.&nbsp;Defining the Execution Data</h4></div></div></div><p>The Execution Data consist in attributes and references added to existing concepts (metaclasses) of the Abstract Syntax. They may also include new metaclasses which define the type of these new attributes and references.</p></div><div class="section" title="1.4.3.2.&nbsp;Defining the Execution Functions"><div class="titlepage"><div><div><h4 class="title"><a name="_defining_the_execution_functions"></a>1.4.3.2.&nbsp;Defining the Execution Functions</h4></div></div></div><p>The Execution Functions define how the Execution Data evolve during the execution of the model. Execution Functions can be implemented by defining the body of a method.</p><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p xmlns="">For now, Execution Functions are considered as <span class="strong"><strong>atomic, instantaneous and blocking</strong></span>. This means that any long computation will block the rest of the simulation, and concurrent Execution Functions are not executed in concurrence yet.</p></div><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Warning</h2><p xmlns="">For technical reasons, the Domain Model (Ecore metamodel) must specify the signature of the Execution Functions as EOperations.</p></div></div></div><div class="section" title="1.4.4.&nbsp;Testing the Domain-Specific Actions"><div class="titlepage"><div><div><h3 class="title"><a name="_testing_the_domain_specific_actions"></a>1.4.4.&nbsp;Testing the Domain-Specific Actions</h3></div></div></div><p>It is possible to test the DSA (in particular the Execution Functions) by simply writing a simple program with a <span class="emphasis"><em>main</em></span> function (using Java or Xtend/Kermeta3). Create or load a model conform to your Domain Model and call the Execution Functions in the right order to verify there are no runtime exceptions or domain issues.</p></div></div><div class="section" title="1.5.&nbsp;Defining a Concrete Syntax"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="defining-a-concrete-syntax-section"></a>1.5.&nbsp;Defining a Concrete Syntax</h2></div></div></div><p>An xDSML can support different concrete syntaxes. Most EMF-based editors should work with GEMOC, however the GEMOC Studio provides additional support for some specific editors. Thus, we recommend using: an EMF arborescent editor, an Xtext editor, and/or a Sirius editor.
Don&#8217;t forget to link the xDSML Project to the concrete syntax project(s) you want to use by editing the <span class="emphasis"><em>project.xdsml</em></span> file.</p><div class="section" title="1.5.1.&nbsp;Defining a Concrete Syntax with Xtext"><div class="titlepage"><div><div><h3 class="title"><a name="defining-a-concrete-syntax-with-xtext-section"></a>1.5.1.&nbsp;Defining a Concrete Syntax with Xtext</h3></div></div></div><p>See <a class="link" href="http://www.eclipse.org/Xtext/" target="_top">the Xtext website</a>.</p></div><div class="section" title="1.5.2.&nbsp;Defining a Concrete Syntax with Sirius"><div class="titlepage"><div><div><h3 class="title"><a name="defining-a-concrete-syntax-with-sirius-section"></a>1.5.2.&nbsp;Defining a Concrete Syntax with <a class="indexterm" name="d0e471"></a>Sirius</h3></div></div></div><p>If you want to create a graphical concrete syntax you can use Sirius. The <a class="link" href="http://www.eclipse.org/sirius/doc/" target="_top">Sirius documentation</a> provides information for <a class="link" href="http://www.eclipse.org/sirius/doc/specifier/Sirius%20Specifier%20Manual.html" target="_top">Sirius Specifier Manual</a>.</p></div></div><div class="section" title="1.6.&nbsp;Defining a Model of Concurrency and Communication (MoCC)"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="section-defining-a-mocc"></a>1.6.&nbsp;Defining a Model of Concurrency and Communication (MoCC)</h2></div></div></div><div class="section" title="1.6.1.&nbsp;Introduction"><div class="titlepage"><div><div><h3 class="title"><a name="_introduction_2"></a>1.6.1.&nbsp;Introduction</h3></div></div></div><p>In the GEMOC approach, the executability characterization for a given language is done through several steps that include: the description of the actions associated with the language concepts (i.e. the Executions Functions); the description of the data / attributes that capture the state of a model or its evolution (the Execution Data); the description of the underlying language model of concurrency (the MoCC constraints).</p><p>A Model of Concurrency and Communication (MoCC) represents the concurrency, synchronizations and the possibly timed causalities in the behavioral semantics of a language. It must represent the acceptable schedules of the atomic actions of the language, which represent both computation and communication.</p><p>In this part of the guide, we assume that achieving the first two points has already been done based on <a class="xref" href="#section-define-dsa-project" title="1.4.&nbsp;Defining the Domain-Specific Actions (DSA) Project">Section&nbsp;1.4, &#8220;Defining the Domain-Specific Actions (DSA) Project&#8221;</a>. In this part, we will mainly focus on the steps for the description and integration fo the model of concurrency in the language, once the <span class="emphasis"><em>EF</em></span> and <span class="emphasis"><em>ED</em></span> have been already taken into account and integrated to the language.
 The execution engine of the <span class="emphasis"><em>GEMOC Studio</em></span> is based on an event-based semantics, which means that events are used to activate the EF actions that can change the state of a model.</p><p>To describe and integrate the model of concurrency, we must 1) have a description of the useful events allowing activation of the <span class="emphasis"><em>EF</em></span>, 2) a mechanism to express the <span class="emphasis"><em>MoCC</em></span> constraints that apply on these events.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">1) is realized using the <span class="strong"><strong><a class="indexterm" name="d0e519"></a>ECL</strong></span> language whose description and use is provided below</li><li class="listitem">2) Is achieved through the <span class="strong"><strong><a class="indexterm" name="d0e528"></a>MoCCML</strong></span> language whose description and use is described below</li></ul></div></div><div class="section" title="1.6.2.&nbsp;The ECL approach to identify DSE and constraints"><div class="titlepage"><div><div><h3 class="title"><a name="_the_ecl_approach_to_identify_dse_and_constraints"></a>1.6.2.&nbsp;The ECL approach to identify DSE and constraints</h3></div></div></div><div class="section" title="1.6.2.1.&nbsp;Overview of ECL"><div class="titlepage"><div><div><h4 class="title"><a name="_overview_of_ecl"></a>1.6.2.1.&nbsp;Overview of ECL</h4></div></div></div><p>To enable the automatic generation of the execution model of a given DSML model, the MoCC is weaved into the context of specific concepts from the abstract syntax of the DSML. This contextualization is defined by a mapping between the elements of the abstract syntax and the constraints of the MoCC (defined using MoCCML). Examples of mapping are shown below.</p><p>The mapping defined in MoCCML is based on the notion of event, inspired by ECL <a class="link" href="https://hal.inria.fr/hal-00721169/" target="_top">ECL Description</a>, an extension of the Object Constraint Language OCL.
The separation of the mapping from the MoCC makes the MoCC independent of the DSML so that it can be reused.</p></div><div class="section" title="1.6.2.2.&nbsp;Creation of an ECL model GEMOC Studio"><div class="titlepage"><div><div><h4 class="title"><a name="_creation_of_an_ecl_model_gemoc_studio"></a>1.6.2.2.&nbsp;Creation of an ECL model GEMOC Studio</h4></div></div></div><p><span class="emphasis"><em>ECL</em></span> models are created via files with the extension <span class="emphasis"><em>.ecl. The _xDSML</em></span> environment enables the creation and / or opening of new <span class="emphasis"><em>ECL</em></span> project <a class="xref" href="#section-gemoc-language-project" title="1.2.&nbsp;xDSML Project">Section&nbsp;1.2, &#8220;xDSML Project&#8221;</a>.</p></div><div class="section" title="1.6.2.3.&nbsp;How to use ECL"><div class="titlepage"><div><div><h4 class="title"><a name="_how_to_use_ecl"></a>1.6.2.3.&nbsp;How to use ECL</h4></div></div></div><p>In this section, we show an examplified way to use ECL. The required steps to go from a given language to the integration of its concurrency model are presented.</p><div class="section" title="1.6.2.3.1.&nbsp;Import Language"><div class="titlepage"><div><div><h5 class="title"><a name="_import_language"></a>1.6.2.3.1.&nbsp;Import Language</h5></div></div></div><p>As shown in Listing <a class="xref" href="#eclimport">???</a>, an <span class="emphasis"><em>ECL</em></span> file imports the extended language that contains the language metaclasses, the <span class="emphasis"><em>EF</em></span> and <span class="emphasis"><em>ED</em></span>. The <span class="emphasis"><em>ECL</em></span> language defines the notion of <span class="strong"><strong><a class="indexterm" name="d0e586"></a>import</strong></span> to import the extended metamodel (see import of <span class="emphasis"><em>dplExtended.ecore</em></span> in Listing <a class="xref" href="#eclimport">???</a>).
The import is used to load all the concepts of language that are used to clarify: the <span class="emphasis"><em>EF</em></span> activation events; static properties numeric or Boolean values, and constraints associated with concepts.</p><a name="eclimport"></a><pre class="programlisting"><b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">import</b> <i xmlns:fo="http://www.w3.org/1999/XSL/Format" style="color:blue" class="hl-string">"platform:/resource/org.gemoc.model.dpl.dplextended/model/dplExtended.ecore"</i></pre></div><div class="section" title="1.6.2.3.2.&nbsp;Define Event-Action Creation"><div class="titlepage"><div><div><h5 class="title"><a name="_define_event_action_creation"></a>1.6.2.3.2.&nbsp;Define Event-Action Creation</h5></div></div></div><p>The <span class="emphasis"><em>ECL</em></span> model gives access to the concept of the language via the declaration of their package container. In the illustration below, the package container is <span class="emphasis"><em>dplextended</em></span>.  Every metaclass/ concept is declared as a <span class="emphasis"><em>context</em></span>. In a given context, we define the mapping between events and actions and the <span class="emphasis"><em>MoCC</em></span> constraints of the context.
The illustration shows the definition and mapping of events associated with the concept of <span class="emphasis"><em>Philosopher</em></span>. For the context <span class="emphasis"><em>Philosopher</em></span>, the events are used to enable its actions ie <span class="emphasis"><em>eat()</em></span> and <span class="emphasis"><em>think()</em></span> actions.
<span class="emphasis"><em>ECL</em></span> syntax for declaring the mapping Event / Action is as follows:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">Define the type of the event: def: think: Event</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">When the event activate actions: the action associated to the event is accessed through the context via <span class="emphasis"><em>self.actionName()</em></span> (e.g. in Listing <a class="xref" href="#eclContextEventDeclaration">???</a> <span class="emphasis"><em>Philosopher</em></span> <span class="emphasis"><em>self.think()</em></span> and <span class="emphasis"><em>self.eat()</em></span>)</li><li class="listitem">When the event does not trigger an action i.e. used as internal control events : Its declaration does not mention any related action (e.g. <span class="emphasis"><em>getrightFork</em></span>, <span class="emphasis"><em>getleftFork</em></span>, <span class="emphasis"><em>putrightFork</em></span>, <span class="emphasis"><em>putleftFork</em></span>)</li></ul></div></li><li class="listitem">Finally, we can define local attributes to capture the value of static properties that can be for instance integers or booleans (e.g. <span class="emphasis"><em>def: eatcycleMax: Integer = self.eatCycles</em></span>)
The above steps specify the declaration of events and attributes that are used to control the actions for each language concept. We can focus on the description of the model of concurrency defined using <span class="emphasis"><em>MoCCML</em></span>.</li></ul></div><a name="eclContextEventDeclaration"></a><pre class="programlisting">package dplextended
	context Philosopher
		<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b>: think : Event = self.think()
		<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b>: getrightFork : Event = self
		<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b>: getleftFork : Event = self
		<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b>: eat : Event = self.eat()
		<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b>: putrightFork : Event = self
		<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b>: putleftFork : Event = self
		<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b>: thinkcycleMax : Integer = self.thinkCycles
		<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b>: eatcycleMax : Integer = self.eatCycles
endpackage</pre><p>The latter phase is done in two steps: the implementation of the execution control constraints with <span class="emphasis"><em>MoCCML</em></span>; the use of these constraints in the context definition to specify how the events should be scheduled (determine their causalities).</p></div></div></div><div class="section" title="1.6.3.&nbsp;The MoCCML approach to define constraints"><div class="titlepage"><div><div><h3 class="title"><a name="_the_moccml_approach_to_define_constraints"></a>1.6.3.&nbsp;The MoCCML approach to define constraints</h3></div></div></div><p>This section presents the MoCCML editor that supports the edition of <span class="emphasis"><em>MoCC_s. To keep the de&#64257;ned models formal and to provide a solver for the _MoCC</em></span>, an operational semantics and a solver based on this formal semantics were defined. For more information on the operational semantics the reader can refer to <a class="link" href="https://hal.inria.fr/hal-01060601v1" target="_top">MoCCML Operational Semantics</a>.</p><div class="section" title="1.6.3.1.&nbsp;Creating a MoCCML model in the GEMOC Studio"><div class="titlepage"><div><div><h4 class="title"><a name="_creating_a_moccml_model_in_the_gemoc_studio"></a>1.6.3.1.&nbsp;Creating a MoCCML model in the GEMOC Studio</h4></div></div></div><p>The <span class="emphasis"><em>MoCCML</em></span> models are created via files with an <span class="emphasis"><em>.moccml extension. They are also natively created from the dashboard _xDSML</em></span>, where you can create a <span class="emphasis"><em>MoCC</em></span> project. The project defines an empty model _.moccml with just the name of the library to be created. For a graphical representation of the models, you have to right-click on the file (New Representation File) and run next until the creation of the _.aird representation. This procedure is described in the Sirius tutorial <a class="link" href="http://www.eclipse.org/sirius/doc/" target="_top">Sirius documentation</a> and <a class="link" href="http://www.eclipse.org/sirius/doc/specifier/Sirius%20Specifier%20Manual.html" target="_top">Sirius Specifier Manual</a> to create new diagrams starting from a model whose graphical editor was made from Sirius.</p></div><div class="section" title="1.6.3.2.&nbsp;Overview de MoCCML"><div class="titlepage"><div><div><h4 class="title"><a name="_overview_de_moccml"></a>1.6.3.2.&nbsp;Overview de MoCCML</h4></div></div></div><p><span class="emphasis"><em>MoCCML</em></span> is a declarative meta-language specifying constraints between the events of a <span class="emphasis"><em>MoCC</em></span>. At any moment during a run, an event that does not violate the constraints can occur. The constraints are grouped in libraries that specify <span class="emphasis"><em>MoCC</em></span> speci&#64257;c constraints. The constraints are eventually instantiated to de&#64257;ne the execution model of a speci&#64257;c model. The execution model is a symbolic representation of all the acceptable schedules for a particular model.
<span class="emphasis"><em>MoCCML</em></span> is based on the principle of defining constraints on events. There are two categories of constraint de&#64257;nitions: the Declarative De&#64257;nitions and the Constraint Automata De&#64257;nitions. Each constraint definition has an associated ConstraintDeclaration that defines the prototype of the constraint.</p></div><div class="section" title="1.6.3.3.&nbsp;Presentation of the MoCCML Editor"><div class="titlepage"><div><div><h4 class="title"><a name="_presentation_of_the_moccml_editor"></a>1.6.3.3.&nbsp;Presentation of the MoCCML Editor</h4></div></div></div><p>The concrete syntax of <span class="emphasis"><em>MoCCML</em></span> is implemented as a combination of graphical and textual syntaxes to provide the most appropriate representation for each part of a <span class="emphasis"><em>MoCC</em></span> model library.
The graphical syntax can be divided into two levels of representation: one for the definition of the <span class="emphasis"><em>MoCC</em></span> libraries (the declaration and definition of the automata constraints); another for the implementation of the constraints in the form of automata. For instance:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">The first level of representation contains elements as illustrated in Figure <a class="xref" href="#figure-glw-screenshot-of-moccmlLevelFirst" title="Figure&nbsp;1.2.&nbsp;Screenshot of the First graphical level of Edition in MoCCML.">Figure&nbsp;1.2, &#8220;Screenshot of the First graphical level of Edition in MoCCML.&#8221;</a>. The represented model imports two <span class="emphasis"><em>CCSL</em></span> libraries (<span class="emphasis"><em>kernel.ccslLib</em></span> and <span class="emphasis"><em>CCSL.ccslLib</em></span>). The imported libraries provide predefined types that are used to define formal parameters such as DiscreteClocks, Integers, etc. Each defined Relation Declaration is associated to a Automata constraint definition. The association is done through the <span class="emphasis"><em>Set Declaration Relation</em></span> link.</li><li class="listitem">The second level of graphical representation defines the graphical syntax for the modeling of the Automata constraints.</li><li class="listitem">The overall <span class="emphasis"><em>MoCC</em></span> models are serialized to a textual syntax, which means that the graphical models are transformed into their equivalent representation in a textual formal. <span class="strong"><strong><a class="indexterm" name="d0e775"></a>Both representations (graphical or textual) can be used for edition of models</strong></span>.
Moreover, we define the integration of an embedded textual editor in the graphical representation to focus on specific parts of the <span class="emphasis"><em>MoCC</em></span> model that are better edited using a textual syntax (eg trigger, the guards and the actions on transitions). Embedded editors are called by double-clic, and are placed on specific graphical edition elements (Relation Declaration, Relation Definition, DeclarationBlock, Transition).</li></ul></div></div><div class="section" title="1.6.3.4.&nbsp;Example-Driven use of MoCCML"><div class="titlepage"><div><div><h4 class="title"><a name="_example_driven_use_of_moccml"></a>1.6.3.4.&nbsp;Example-Driven use of MoCCML</h4></div></div></div><p>NB: <span class="emphasis"><em>MoCCML</em></span> has multiple pallets to instantiate a library. The pallets are located on the right branch of the editor. The creation of new library is preceded by an import of the native <span class="emphasis"><em>CCSL</em></span> libraries (<span class="emphasis"><em>kernel.ccslLib</em></span>, <span class="emphasis"><em>CCSL.ccslLib</em></span>) which provide primitives for the description of events and variables that are handled by the constraints in the <span class="emphasis"><em>MoCC</em></span> library. We use the third pallet in Figure <a class="xref" href="#figure-glw-screenshot-of-moccmlLevelFirst" title="Figure&nbsp;1.2.&nbsp;Screenshot of the First graphical level of Edition in MoCCML.">Figure&nbsp;1.2, &#8220;Screenshot of the First graphical level of Edition in MoCCML.&#8221;</a>to import such <span class="emphasis"><em>CCSL</em></span> libraries.</p><div class="figure"><a name="figure-glw-screenshot-of-moccmlLevelFirst"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/eclmoccml/moccmlLevFirst.png" width="800" alt="Screenshot of MoCCML First Level of Edition"></div></div><p class="title"><b>Figure&nbsp;1.2.&nbsp;Screenshot of the First graphical level of Edition in MoCCML.</b></p></div><br class="figure-break"><div class="section" title="1.6.3.4.1.&nbsp;Creating MoCC Libraries"><div class="titlepage"><div><div><h5 class="title"><a name="_creating_mocc_libraries"></a>1.6.3.4.1.&nbsp;Creating MoCC Libraries</h5></div></div></div><p>As shown in Figure <a class="xref" href="#figure-glw-screenshot-of-moccmlLevelFirst" title="Figure&nbsp;1.2.&nbsp;Screenshot of the First graphical level of Edition in MoCCML.">Figure&nbsp;1.2, &#8220;Screenshot of the First graphical level of Edition in MoCCML.&#8221;</a>, creating new <span class="emphasis"><em>MoCC</em></span> libraries can be done by using the first two pallets on the right (Library Edition, New Library &amp; Required Feature). In these pallets, the element (Library New Library + New Relationship and Relationship) can be used for the instantiation of a new <span class="emphasis"><em>MoCC</em></span> library. The two are distinguished by the fact that the last mentioned will create a new library of <span class="emphasis"><em>MoCC</em></span>, while adding a default Relation Declaration. In Figure <a class="xref" href="#figure-glw-screenshot-of-moccmlLevelFirst" title="Figure&nbsp;1.2.&nbsp;Screenshot of the First graphical level of Edition in MoCCML.">Figure&nbsp;1.2, &#8220;Screenshot of the First graphical level of Edition in MoCCML.&#8221;</a> we create a new Library called <span class="emphasis"><em>RendezVous_Relations</em></span>.</p></div><div class="section" title="1.6.3.4.2.&nbsp;Declaring the constrained events"><div class="titlepage"><div><div><h5 class="title"><a name="_declaring_the_constrained_events"></a>1.6.3.4.2.&nbsp;Declaring the constrained events</h5></div></div></div><p>In a <span class="emphasis"><em>MoCC</em></span> library, we define constraints and their declarations. The declarations identify events and parameters to be considered in the implementation of the constraint. In the editor, the declaration is made using the two above mentioned pallets, and using the elements in the pallets i.e.: <span class="emphasis"><em>New Relationship Declaration</em></span> and <span class="emphasis"><em>New Relationship Declaration +</em></span>. The two differ in that the latter creates a Relation Declaration with a default formal parameter declaration. In the Figure <a class="xref" href="#figure-glw-screenshot-of-moccmlLevelFirst" title="Figure&nbsp;1.2.&nbsp;Screenshot of the First graphical level of Edition in MoCCML.">Figure&nbsp;1.2, &#8220;Screenshot of the First graphical level of Edition in MoCCML.&#8221;</a>, we create two relation declarations (<span class="emphasis"><em>ForkConstraintDecl</em></span> and <span class="emphasis"><em>PhilosopherConstraintDecl</em></span>). Listing <a class="xref" href="#philoDeclarationTextual">???</a> also shows the equivalent textual code generated for the <span class="emphasis"><em>PhilosopherConstraintDecl</em></span>.</p><a name="philoDeclarationTextual"></a><pre class="programlisting">RelationDeclaration PhilosopherConstraintDcl(
			pthink : clock,
			grfork : clock,
			glfork : clock,
			peat : clock,
			prfork : clock,
			plfork : clock,
			thinkCyc:int,
			eatCyc:int
		)</pre></div><div class="section" title="1.6.3.4.3.&nbsp;Defining the constraints"><div class="titlepage"><div><div><h5 class="title"><a name="_defining_the_constraints"></a>1.6.3.4.3.&nbsp;Defining the constraints</h5></div></div></div><p>The implementation of constraints can be specified textually or graphically. Graphically, the first two pallets are used to create new definitions of constraints associated with their declarations. Constraint definitions is done using the menu items (<span class="emphasis"><em>New Automata Definition</em></span> and <span class="emphasis"><em>New Automata Definition +</em></span>). In Figure <a class="xref" href="#figure-glw-screenshot-of-moccmlLevelFirst" title="Figure&nbsp;1.2.&nbsp;Screenshot of the First graphical level of Edition in MoCCML.">Figure&nbsp;1.2, &#8220;Screenshot of the First graphical level of Edition in MoCCML.&#8221;</a>, the following constraints are specified: <span class="emphasis"><em>ForkConstraintDef</em></span>, <span class="emphasis"><em>PhilosopherConstraintDef</em></span>). At this stage, we toured the main notions that can be set on the first level of graphical description with <span class="emphasis"><em>MoCCML</em></span>.
To navigate in the second level of graphical description (Constraint implementation), one should right-click on a specified constraint definition using (Open Diagram / New Diagram). Open Diagram will navigate to an existing diagram; New Diagram will create a new diagram to edit.
The <span class="emphasis"><em>MoCCML</em></span> Editor offers 3 different pallets for: editing the automata, defining the local variables and editing the transitons (ie adding <span class="emphasis"><em>Trigger</em></span>, <span class="emphasis"><em>Guard</em></span>, <span class="emphasis"><em>Actions</em></span>). Figure <a class="xref" href="#figure-glw-screenshot-of-moccmlLevelSecond" title="Figure&nbsp;1.3.&nbsp;Screenshot of the Second graphical level of Edition in MoCCML (Constraint Implementation).">Figure&nbsp;1.3, &#8220;Screenshot of the Second graphical level of Edition in MoCCML (Constraint Implementation).&#8221;</a> shows a simple example with two control states. An additional Layer displays the details of the transitions (<span class="emphasis"><em>Trigger</em></span>, <span class="emphasis"><em>Guard</em></span>, <span class="emphasis"><em>Action</em></span>) as shown in Figure <a class="xref" href="#figure-glw-screenshot-of-moccmlLevelSecond" title="Figure&nbsp;1.3.&nbsp;Screenshot of the Second graphical level of Edition in MoCCML (Constraint Implementation).">Figure&nbsp;1.3, &#8220;Screenshot of the Second graphical level of Edition in MoCCML (Constraint Implementation).&#8221;</a>, see yellow boxes.
Besides, editing <span class="emphasis"><em>DeclarationBlock</em></span> boxes and <span class="emphasis"><em>details in Transitions</em></span> can be done using embedded text editor by double-clicking on the related boxes. We can then edit the properties of transitions and local variables textually.</p><p>One can define the desired set of constraints on the concepts of language using the <span class="emphasis"><em>MoCCML</em></span> editor. To see the text code corresponding to the serialization of the edited <span class="emphasis"><em>MoCC</em></span> models, the user can open the _.moccml file. Editing can also be directly made from this file and all the changes will be reflected in the graphical editor.
The use of constraints is shown in the next section.</p><div class="figure"><a name="figure-glw-screenshot-of-moccmlLevelSecond"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/eclmoccml/moccmlLevSecond.png" width="800" alt="Screenshot of MoCCML Second Level of Edition"></div></div><p class="title"><b>Figure&nbsp;1.3.&nbsp;Screenshot of the Second graphical level of Edition in MoCCML (Constraint Implementation).</b></p></div><br class="figure-break"></div><div class="section" title="1.6.3.4.4.&nbsp;Using the constraints on the ECL"><div class="titlepage"><div><div><h5 class="title"><a name="_using_the_constraints_on_the_ecl"></a>1.6.3.4.4.&nbsp;Using the constraints on the ECL</h5></div></div></div><p>The <span class="emphasis"><em>MoCC</em></span> constraints models can be used in the <span class="emphasis"><em>ECL</em></span> file on concepts which they are attached. To declare the constraint on the events, we re-declare the context of the concept then define an invariant <span class="emphasis"><em>inv</em></span>, see Listing <a class="xref" href="#eclContextConstraintUse">???</a>. In this listing we also import the <span class="emphasis"><em>MoCCML</em></span> library that was defined previously (i.e. rendez_vous.moccml)
For instance, the invariant related to the context Philosopher (<span class="emphasis"><em>PhilosopherConstraintInv</em></span>) uses the <span class="emphasis"><em>PhilosopherConstraintDef</em></span> via its <span class="emphasis"><em>PhilosopherConstraintDcl</em></span> declaration? It takes as input the set of control events and static variables used to calculate the causality between events.</p><a name="eclContextConstraintUse"></a><pre class="programlisting">ECLimport <i xmlns:fo="http://www.w3.org/1999/XSL/Format" style="color:blue" class="hl-string">"platform:/resource/org.gemoc.dpl.xdsml.mocc.model/mocc/rendez_vous.moccml"</i>
ECLimport <i xmlns:fo="http://www.w3.org/1999/XSL/Format" style="color:blue" class="hl-string">"platform:/plugin/fr.inria.aoste.timesquare.ccslkernel.model/ccsllibrary/kernel.ccslLib"</i>
ECLimport <i xmlns:fo="http://www.w3.org/1999/XSL/Format" style="color:blue" class="hl-string">"platform:/plugin/fr.inria.aoste.timesquare.ccslkernel.model/ccsllibrary/CCSL.ccslLib"</i>

package dplextended
	context Philosopher
		<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b>: think : Event = self.think()
		<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b>: getrightFork : Event = self
		<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b>: getleftFork : Event = self
		<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b>: eat : Event = self.eat()
		<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b>: putrightFork : Event = self
		<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b>: putleftFork : Event = self
		<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b>: thinkcycleMax : Integer = self.thinkCycles
		<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b>: eatcycleMax : Integer = self.eatCycles

	context Philosopher
	inv PhilosopherConstraintInv:
		Relation PhilosopherConstraintDcl(
                self.think,
                self.getrightFork,
                self.getleftFork,self.eat,
                self.putrightFork,
                self.putleftFork,
                self.thinkcycleMax,
                self.eatcycleMax
                )
endpackage</pre></div></div></div></div><div class="section" title="1.7.&nbsp;Defining the Domain-Specific Events (DSE)"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_defining_the_domain_specific_events_dse"></a>1.7.&nbsp;Defining the Domain-Specific Events (DSE)</h2></div></div></div><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p xmlns="">This section is relevant to the definition of <span class="strong"><strong>concurrent</strong></span> xDSMLs.</p></div><div class="section" title="1.7.1.&nbsp;Purpose"><div class="titlepage"><div><div><h3 class="title"><a name="_purpose_4"></a>1.7.1.&nbsp;Purpose</h3></div></div></div><p>The DSE define a mapping between MoccEvents from the MoCC and the Execution Functions. They specify the coordination between what happens in the MoCC, depending on its constraints, and which operations must be called in the model (thus resulting in changes in the Execution Data).
They are also exposed as the behavioral interface of the xDSML, based on which the Behavioral COmposition Operator Language (BCOoL) defines the composition of xDSMLs.</p></div><div class="section" title="1.7.2.&nbsp;Creating the DSE Project"><div class="titlepage"><div><div><h3 class="title"><a name="_creating_the_dse_project"></a>1.7.2.&nbsp;Creating the DSE Project</h3></div></div></div><p>Create an empty Plug-in Project. In this project, create a new file with the ".GEL" extension. The DSE can be defined using the <span class="strong"><strong>Gemoc Events Language</strong></span> (GEL).</p></div><div class="section" title="1.7.3.&nbsp;Editing the DSE Project"><div class="titlepage"><div><div><h3 class="title"><a name="_editing_the_dse_project"></a>1.7.3.&nbsp;Editing the DSE Project</h3></div></div></div><p>The first step to designing the DSE in GEL consists in importing the MoCC2AS Mapping (ECL file) and the Domain Model (Ecore metamodel) of the xDSML. You can do so by using the <span class="emphasis"><em>import platform:/resource/&#8230;&#8203;</em></span> syntax at the beginning of the file.</p><div class="section" title="1.7.3.1.&nbsp;Defining an Atomic Domain-Specific Event"><div class="titlepage"><div><div><h4 class="title"><a name="_defining_an_atomic_domain_specific_event"></a>1.7.3.1.&nbsp;Defining an Atomic Domain-Specific Event</h4></div></div></div><p>Atomic Domain-Specific Events realize a 1-to-1 mapping between the MoccEvents and the Execution Functions of the xDSML.
An atomic DSE is defined using the following syntax:</p><pre class="screen">DSE &lt;name&gt;:
  upon &lt;MoccEvent&gt;
  triggers &lt;Path-to-ExecutionFunction&gt;
end</pre><p>Where:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">&lt;name&gt; is the name of the Domain-Specific Event;</li><li class="listitem">&lt;MoccEvent&gt; is any MoccEvent from the MoCC2AS Mapping. This will also automatically define the DSE in the same context as the MoccEvent referenced, thus defining the starting point of navigation expressions from this DSE;</li><li class="listitem">&lt;Path-to-ExecutionFunction&gt; is a navigation path from the context of this DSE to an Execution Function.</li></ul></div><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Tip</h2><p xmlns="">In case of difficulty, make use of the auto-completion feature.</p></div><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p xmlns="">The implicit context of a Domain-Specific Event is inferred from the context in which its associated MoccEvent is defined in the MoCC2AS Mapping. Therefore, the DSE will be usable for any instance in the model of the context of the DSE. For instance if a DSE is mapped to a MoccEvent defined in the context of the metaclass <span class="emphasis"><em>Transition</em></span>, and there are 3 Transitions in the model being executed, this DSE will be usable for each of the 3 Transitions of the model.</p></div></div><div class="section" title="1.7.3.2.&nbsp;Semantics of Atomic Domain-Specific Events"><div class="titlepage"><div><div><h4 class="title"><a name="_semantics_of_atomic_domain_specific_events"></a>1.7.3.2.&nbsp;Semantics of Atomic Domain-Specific Events</h4></div></div></div><p>Upon an occurrence of the associated MoccEvent, an occurrence of the Domain-Specific Event is created and consumed by the GEMOC Execution Engine. Its consumption triggers the execution of the designated Execution Function.</p></div></div></div><div class="section" title="1.8.&nbsp;Defining the Feedback Specification"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_defining_the_indexterm_primary_feedback_specification_primary_indexterm_feedback_specification"></a>1.8.&nbsp;Defining the <a class="indexterm" name="d0e1033"></a>Feedback Specification</h2></div></div></div><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p xmlns="">This section is relevant to the definition of <span class="strong"><strong>concurrent</strong></span> xDSMLs.</p></div><div class="section" title="1.8.1.&nbsp;Purpose"><div class="titlepage"><div><div><h3 class="title"><a name="_purpose_5"></a>1.8.1.&nbsp;Purpose</h3></div></div></div><p>Many languages need to be able to parameterize their control flow with their data flow. For instance, conditional statements like <span class="emphasis"><em>if&#8230;&#8203;then&#8230;&#8203;else</em></span> or <span class="emphasis"><em>switch&#8230;&#8203;case</em></span> statements depend on the result of a boolean expression.
Since the GEMOC approach at designing xDSMLs promotes the separation of the concurrency (MoCC from the domain-specific data (DSA), there needs to be a form of communication from the DSA to the MoCC. For instance, the MoCC of an xDSML with a conditional statement specifies that after evaluating the condition, either the 'then' or the 'else' branch will be taken (in exclusion from one another), while the DSA provide the Execution Function that evaluates the condition, returning a boolean value. Making the link between the 'true' value and the 'then' branch, and between the 'false' value and the 'else' branch is the role of the Feedback Specification.
More formally, the Feedback Specification specifies how domain data returned by an Execution Function must be interpreted to parameterize the MoCC. The Feedback Specification consists in a set of Feedback Policies which are associated to the atomic Domain-Specific Events. Therefore, the Feedback Specification is also done using <a class="indexterm" name="d0e1054"></a>GEL.</p></div><div class="section" title="1.8.2.&nbsp;Creating a Feedback Policy"><div class="titlepage"><div><div><h3 class="title"><a name="_creating_a_indexterm_primary_feedback_policy_primary_indexterm_feedback_policy"></a>1.8.2.&nbsp;Creating a <a class="indexterm" name="d0e1061"></a>Feedback Policy</h3></div></div></div><p>A Feedback Policy is associated to an atomic DSE by extending the syntax for defining the atomic DSE as follows:</p><pre class="screen">DSE &lt;name&gt;:
  upon &lt;MoccEvent&gt;
  triggers &lt;Path-to-ExecutionFunction&gt; returning &lt;resultName&gt;
  feedback:
    [&lt;filter1&gt;] =&gt; allow &lt;PathToMoccEventConsequence1&gt;
    [&lt;filter2&gt;] =&gt; allow &lt;PathToMoccEventConsequence2&gt;
    ...
    default =&gt; allow &lt;PathToMoccEventDefaultConsequence&gt;
  end
end</pre><p>Where:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">&lt;resultName&gt; is a local variable which will be affected with the value returned by the associated Execution Function;</li><li class="listitem">Between the <span class="emphasis"><em>feedback</em></span> and <span class="emphasis"><em>end</em></span> keywords, a set of Feedback Rules are defined (including a default Feedback Rule, with the <span class="emphasis"><em>default</em></span> keyword). A Feedback Rule is composed of a filter (between squared brackets) and a consequence;</li><li class="listitem">&lt;filterN&gt; are predicates, most likely using &lt;resultName&gt; which define whether or not this Feedback Rule must be applied;</li><li class="listitem">&lt;PathToMoccEventConsequenceN&gt; is a navigation expression to a MoccEvent which specifies which MoccEvent is allowed as a result of the data returned by the Execution Function.</li></ul></div><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Tip</h2><p xmlns="">In case of difficulty, make use of the auto-completion feature.</p></div></div><div class="section" title="1.8.3.&nbsp;Semantics of the Feedback Policy"><div class="titlepage"><div><div><h3 class="title"><a name="_semantics_of_the_feedback_policy"></a>1.8.3.&nbsp;Semantics of the Feedback Policy</h3></div></div></div><p>When the Execution Function associated to a DSE returns a result, the filter of every Feedback Policy is evaluated. If none of the filters is validated, then the default rule is applied. Else, the collection of rules for which the filter validated are applied.
For each rule to apply, the associated consequence is allowed to have occurrences in upcoming steps of execution. This is done by the Execution Engine by filtering out some solutions provided by the MoCC interpreter and only allowing the ones complying with the Feedback Specification.</p></div></div><div class="section" title="1.9.&nbsp;Defining a debug representation"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="defining-a-debug-representation-section"></a>1.9.&nbsp;Defining a debug representation</h2></div></div></div><p>The debug layer is an extension on top of a graphical editor defined with <a class="indexterm" name="d0e1106"></a>Sirius which represents runtime data and the current instruction. See <a class="xref" href="#defining-a-concrete-syntax-with-sirius-section" title="1.5.2.&nbsp;Defining a Concrete Syntax with Sirius">Section&nbsp;1.5.2, &#8220;Defining a Concrete Syntax with Sirius&#8221;</a> for more details about <a class="indexterm" name="d0e1112"></a>Sirius. This section covers the debug representation creation wizard and the technical implementation details. Technical implementation details are only useful for advanced use case and troubleshooting.</p><div class="section" title="1.9.1.&nbsp;The debug representation wizard"><div class="titlepage"><div><div><h3 class="title"><a name="_the_debug_representation_wizard"></a>1.9.1.&nbsp;The debug representation wizard</h3></div></div></div><p>This wizard creates a layer to represent the current instruction and add commands in order to manage breakpoints and launch a simulation in debug mode. This is a default implementation, it can be customized to represent runtime data for instance. The customization uses the <a class="indexterm" name="d0e1121"></a>Sirius description definition, see the <a class="link" href="http://www.eclipse.org/sirius/doc/specifier/Sirius%20Specifier%20Manual.html" target="_top">Sirius Specifier Manual</a> for more details.
The wizard presents three ways to implement this layer:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Create a debug diagram description</li><li class="listitem">Extend an existing diagram description</li><li class="listitem">Add a debug layer to an existing diagram description</li></ul></div><div class="informalfigure"><div class="mediaobject"><img src="./images/workbench/language/debug_representation_wizard/wizard.png" alt="Debug representation wizard"></div></div><div class="section" title="1.9.1.1.&nbsp;Create a debug diagram description"><div class="titlepage"><div><div><h4 class="title"><a name="_create_a_debug_diagram_description"></a>1.9.1.1.&nbsp;Create a debug diagram description</h4></div></div></div><p>It creates a diagram representation with a default debug layer. The representation does not depend on another representation. A typical use case is a language where the runtime data representation is too far from the language graphical syntax.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/workbench/language/debug_representation_wizard/create/1.png" alt="Debug representation wizard"></div></div><div class="informalfigure"><div class="mediaobject"><img src="./images/workbench/language/debug_representation_wizard/create/2.png" alt="Debug representation wizard"></div></div></div><div class="section" title="1.9.1.2.&nbsp;Extend an existing diagram description"><div class="titlepage"><div><div><h4 class="title"><a name="_extend_an_existing_diagram_description"></a>1.9.1.2.&nbsp;Extend an existing diagram description</h4></div></div></div><p>It creates a diagram representation with a default debug layer that extends an existing representation. This allows to have a debug layer based on the representation of the language concrete syntax. The language concrete syntax can be deployed without the debug representation. A typical use case is the reuse of an existing diagram definition that you cannot modify by yourself. For instance if you want to use <a class="link" href="http://eclipse.org/modeling/mdt/?project=uml2" target="_top">UML</a>, you can reuse the <a class="link" href="http://www.umldesigner.org/" target="_top">UML Designer</a>.</p><p>You can select any diagram description.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/workbench/language/debug_representation_wizard/extend/1.png" alt="Debug representation wizard"></div></div><p>And then define the new diagram description which extends the one you previously selected.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/workbench/language/debug_representation_wizard/extend/2.png" alt="Debug representation wizard"></div></div><div class="informalfigure"><div class="mediaobject"><img src="./images/workbench/language/debug_representation_wizard/extend/3.png" alt="Debug representation wizard"></div></div></div><div class="section" title="1.9.1.3.&nbsp;Add a debug layer to an existing diagram description"><div class="titlepage"><div><div><h4 class="title"><a name="_add_a_debug_layer_to_an_existing_diagram_description"></a>1.9.1.3.&nbsp;Add a debug layer to an existing diagram description</h4></div></div></div><p>It creates a default debug layer in an existing diagram representation. This should be used if you are also in charge of the language concrete syntax.</p><p>In this case, you can only select a diagram description from the workspace.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/workbench/language/debug_representation_wizard/add/1.png" alt="Debug representation wizard"></div></div><div class="informalfigure"><div class="mediaobject"><img src="./images/workbench/language/debug_representation_wizard/add/2.png" alt="Debug representation wizard"></div></div></div></div><div class="section" title="1.9.2.&nbsp;Implementation details"><div class="titlepage"><div><div><h3 class="title"><a name="_implementation_details"></a>1.9.2.&nbsp;Implementation details</h3></div></div></div><p>Implementation details are for advanced use and troubleshooting. It explains how the implementation works behind the scene. There are two main elements covered here : the debugger services class and the debug layer itself.</p><div class="section" title="1.9.2.1.&nbsp;Debugger services"><div class="titlepage"><div><div><h4 class="title"><a name="_debugger_services"></a>1.9.2.1.&nbsp;Debugger services</h4></div></div></div><p>The debugger services class is use to tell which representations should be activated and refreshed during debug (see the getRepresentationRefreshList() method). It also provides a method to know if an element of the diagram is the current instruction. This is provided by the isCurrentInstruction() method.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/workbench/language/debug_services.png" alt="Debug services"></div></div></div><div class="section" title="1.9.2.2.&nbsp;Debug layer"><div class="titlepage"><div><div><h4 class="title"><a name="_debug_layer"></a>1.9.2.2.&nbsp;Debug layer</h4></div></div></div><p>The default debug layer adds action to start the simulation in debug mode and to toggle breakpoints (1). When a breakpoint exists for an element of the diagram, a visual feedback is displayed according to the breakpoint state (2). The current instruction is also highlighted in yellow by default (3).</p><div class="informalfigure"><div class="mediaobject"><img src="./images/workbench/language/debug_layer.png" alt="Debug layer"></div></div><p>This is a default debug layer, it can be customized to fit your needs. The customization use the <a class="indexterm" name="d0e1252"></a>Sirius description definition, see the <a class="link" href="http://www.eclipse.org/sirius/doc/specifier/Sirius%20Specifier%20Manual.html" target="_top">Sirius Specifier Manual</a> for more details.</p></div></div></div><div class="section" title="1.10.&nbsp;Language workbench dashboard"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="language-workbench-dashboard-section"></a>1.10.&nbsp;Language workbench dashboard</h2></div></div></div><div class="section" title="1.10.1.&nbsp;Open the dashboard"><div class="titlepage"><div><div><h3 class="title"><a name="_open_the_dashboard"></a>1.10.1.&nbsp;Open the dashboard</h3></div></div></div><p>The dashboard is available on .xdsml files from the Project Explorer or the Model Explorer views. See <a class="xref" href="#section-gemoc-language-project" title="1.2.&nbsp;xDSML Project">Section&nbsp;1.2, &#8220;xDSML Project&#8221;</a> to view how to create an xDSML project.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/workbench/language/dashboard/open_dashboard_menu.png" width="400" alt="Dashboard menu"></div></div><p>When the <code class="literal">Gemoc Dashboard</code> menu is selected a new editor opens.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/workbench/language/dashboard/dashboard_create_language.png" width="800" alt="Dashboard"></div></div><p>This editor is divided in three main parts:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">Overview part</li><li class="listitem">Sections part</li><li class="listitem">Projects view</li></ol></div><div class="informalfigure"><div class="mediaobject"><img src="./images/workbench/language/dashboard/dashboard_parts.png" width="800" alt="Dashboard parts"></div></div></div><div class="section" title="1.10.2.&nbsp;Overview"><div class="titlepage"><div><div><h3 class="title"><a name="_overview_2"></a>1.10.2.&nbsp;Overview</h3></div></div></div><p>The overview allows to access to the different parts of the <a class="xref" href="#gemoc-language-workbench" title="Chapter&nbsp;1.&nbsp;GEMOC Language Workbench">Chapter&nbsp;1, <i>GEMOC Language Workbench <span class="inlinemediaobject"><img src="./images/icons/IconeGemocLanguage_16.png" width="16" height="16" alt="IconeGemocLanguage_16"></span></i></a> process:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Create your language</li><li class="listitem">Make your language executable</li><li class="listitem">Define your runtime environment</li></ul></div><p>When you click on a step in the overview the related actions are automatically presented in the sections part.</p></div><div class="section" title="1.10.3.&nbsp;Sections"><div class="titlepage"><div><div><h3 class="title"><a name="_sections"></a>1.10.3.&nbsp;Sections</h3></div></div></div><p>This part provides sections which depends on the selected overview. The sections contain links that can be used to activate the different actions: create the domain model project, edit the DSA project, define a concrete syntax&#8230;&#8203;</p><div class="informalfigure"><div class="mediaobject"><img src="./images/workbench/language/dashboard/dashboard_create_language_sections.png" alt="Dashboard sections"></div></div><div class="section" title="1.10.3.1.&nbsp;Description"><div class="titlepage"><div><div><h4 class="title"><a name="_description"></a>1.10.3.1.&nbsp;Description</h4></div></div></div><p>Each section provides a help button which shows the description associated to the section and explains the process step and which actions are available.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/workbench/language/dashboard/section_description.png" alt="Section description"></div></div></div><div class="section" title="1.10.3.2.&nbsp;Links"><div class="titlepage"><div><div><h4 class="title"><a name="_links"></a>1.10.3.2.&nbsp;Links</h4></div></div></div><p>When a link is selected, the corresponding action is launched: open a wizard, open the documentation&#8230;&#8203;</p><div class="informalfigure"><div class="mediaobject"><img src="./images/workbench/language/dashboard/link.png" alt="Link"></div></div><div class="informalfigure"><div class="mediaobject"><img src="./images/workbench/language/dashboard/link_open_wizard.png" width="800" alt="Open wizard"></div></div></div></div><div class="section" title="1.10.4.&nbsp;Projects view"><div class="titlepage"><div><div><h3 class="title"><a name="_projects_view"></a>1.10.4.&nbsp;Projects view</h3></div></div></div><p>On the right side of the dashboard, a tree viewer shows the projects associated to the current xDSML project.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/workbench/language/dashboard/projects_viewer.png" width="400" alt="Projects viewer"></div></div><div class="section" title="1.10.4.1.&nbsp;Synchronize"><div class="titlepage"><div><div><h4 class="title"><a name="_synchronize"></a>1.10.4.1.&nbsp;Synchronize</h4></div></div></div><p>The section toolbar provides a <code class="literal">synchronize</code> action. This action filters the content of the tree viewer to keep only projects relevant according to the current process step represented by the section.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/workbench/language/dashboard/synchronize.png" width="800" alt="Synchronize projects"></div></div></div><div class="section" title="1.10.4.2.&nbsp;Open existing projects"><div class="titlepage"><div><div><h4 class="title"><a name="_open_existing_projects"></a>1.10.4.2.&nbsp;Open existing projects</h4></div></div></div><p>By double-clicking on a project in the tree viewer, it is possible to open and update the corresponding file.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/workbench/language/dashboard/edit_project.png" width="800" alt="Edit project"></div></div></div></div></div></div><div class="chapter" title="Chapter&nbsp;2.&nbsp;GEMOC Modeling workbench"><div class="titlepage"><div><div><h2 class="title"><a name="chapter-gemoc-modeling-workbench"></a>Chapter&nbsp;2.&nbsp;GEMOC Modeling workbench</h2></div></div></div><div class="section" title="2.1.&nbsp;Modeling workbench overview"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_modeling_workbench_overview"></a>2.1.&nbsp;Modeling workbench overview</h2></div></div></div><p>The GEMOC Modeling Workbench, intended to be used by domain designers: it allows creating and executing models conformant to executable DSMLs.</p><div class="figure"><a name="figure-glw-screenshot-of-modeling_workbench"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/gemoc_modeling_workbench_TFSM_animation_screenshot.png" width="800" alt="Screenshot of GEMOC Studio Modeling Workbench on the TFSM example (execution and animation)"></div></div><p class="title"><b>Figure&nbsp;2.1.&nbsp;Screenshot of GEMOC Studio Modeling Workbench on the TFSM example (execution and animation).</b></p></div><br class="figure-break"><p><a class="indexterm" name="d0e1426"></a>
<a class="indexterm" name="d0e1430"></a>
<a class="indexterm" name="d0e1436"></a></p><p></p></div><div class="section" title="2.2.&nbsp;Editing model"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="section-editing-model"></a>2.2.&nbsp;Editing model</h2></div></div></div><p>As seen in Section <a class="xref" href="#defining-a-concrete-syntax-section" title="1.5.&nbsp;Defining a Concrete Syntax">Section&nbsp;1.5, &#8220;Defining a Concrete Syntax&#8221;</a>, an xDSML can provide different concrete syntaxes.</p><div class="section" title="2.2.1.&nbsp;Editing model with Sirius"><div class="titlepage"><div><div><h3 class="title"><a name="modeling-workbench-editing-model-with-sirius-section"></a>2.2.1.&nbsp;Editing model with <a class="indexterm" name="d0e1451"></a>Sirius</h3></div></div></div><p>After defining your editor with <a class="indexterm" name="d0e1457"></a>Sirius (see <a class="xref" href="#defining-a-concrete-syntax-with-sirius-section" title="1.5.2.&nbsp;Defining a Concrete Syntax with Sirius">Section&nbsp;1.5.2, &#8220;Defining a Concrete Syntax with Sirius&#8221;</a> for more details about <a class="indexterm" name="d0e1463"></a>Sirius), you can use your editor as described in the <a class="link" href="http://www.eclipse.org/sirius/doc/user/Sirius%20User%20Manual.html" target="_top">Sirius User Manual</a>.</p><div class="section" title="2.2.1.1.&nbsp;Debug specific"><div class="titlepage"><div><div><h4 class="title"><a name="_debug_specific"></a>2.2.1.1.&nbsp;Debug specific</h4></div></div></div><p>If you have defined a debug representation using <a class="xref" href="#defining-a-debug-representation-section" title="1.9.&nbsp;Defining a debug representation">Section&nbsp;1.9, &#8220;Defining a debug representation&#8221;</a>. You can use the following actions to start a debug session and toggle breakpoints.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/workbench/modeling/debug_actions.png" width="400" alt="Debug actions"></div></div></div></div><div class="section" title="2.2.2.&nbsp;Editing model with EMF Tree Editor"><div class="titlepage"><div><div><h3 class="title"><a name="section-modeling-workbench-editing-model-with-emf-tree-editor"></a>2.2.2.&nbsp;Editing model with <a class="indexterm" name="d0e1487"></a>EMF Tree Editor</h3></div></div></div><p>TODO</p></div></div><div class="section" title="2.3.&nbsp;Executing model"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="modeling-workbench-executing-model-section"></a>2.3.&nbsp;Executing model</h2></div></div></div><div class="section" title="2.3.1.&nbsp;Launch configuration"><div class="titlepage"><div><div><h3 class="title"><a name="_launch_configuration"></a>2.3.1.&nbsp;Launch configuration</h3></div></div></div><p>The Gemoc launch configuration offers both a Run and a Debug mode.</p><div class="section" title="2.3.1.1.&nbsp;General options"><div class="titlepage"><div><div><h4 class="title"><a name="_general_options"></a>2.3.1.1.&nbsp;General options</h4></div></div></div><p>Run and debug are configured using the launch configuration. An example of configuration:</p><p><span class="inlinemediaobject"><img src="./images/workbench/modeling/launch_configuration.png" width="800" alt="Launch configuration"></span></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Model to execute : this is the model that will be run</li><li class="listitem">xDSML : this field allows to select among the valid variants of the executable language that are available for the model (Ie. the combinaison of DSA, DSE and MoCC that can be used on the given domain model)</li><li class="listitem"><p class="simpara"><a class="indexterm" name="d0e1522"></a>Decider : this field allows to select the solver strategy used by the engine when several <a class="indexterm" name="d0e1526"></a>Logical Steps can be triggered. Possible choices are :</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">Solver proposition : the solver internal stategy will be used to select a Logical Step</li><li class="listitem">Random : will randomly select one of the available Logical Step (warning: execution cannot be reproduced when using this Decider)</li><li class="listitem">Ask user : (available only in Debug mode), this option will use the <a class="link" href="#modeling-workbench-executing-model-logical-step-view-section">Logical Step View</a> or the <a class="link" href="#modeling-workbench-executing-model-timeline-view-section" title="2.3.4.&nbsp;Timeline View">Timeline View</a> to present the available Logical Steps and pause if there are more than one Logical Step. The user will then need to click on one of the Logical Step to continue.</li><li class="listitem">Ask user (Step by step) : (available only in Debug mode), this option is similar to the previous one. However, it will pause on every Logical Step, even if there is only one Logical Step that can be triggered. This is more or less equivalent as putting a breakpoint on every MSE of the language.</li></ul></div></li></ul></div><p>More Deciders will be developped (for example for playing predefined scenario).</p></div><div class="section" title="2.3.1.2.&nbsp;Run mode"><div class="titlepage"><div><div><h4 class="title"><a name="_run_mode"></a>2.3.1.2.&nbsp;Run mode</h4></div></div></div><p>In run mode, it offers the faster way to run the model.
It cannot be paused. However, you can stop it.
It offers a limited set of views :</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">the <a class="link" href="#modeling-workbench-executing-model-engine-view-section" title="2.3.2.&nbsp;Engine View"></a><a class="indexterm" name="d0e1561"></a><a class="link" href="#modeling-workbench-executing-model-engine-view-section" title="2.3.2.&nbsp;Engine View">Engine View</a> allows to stop a running model.</li><li class="listitem">the <a class="link" href="#modeling-workbench-executing-model-timeline-view-section" title="2.3.4.&nbsp;Timeline View"></a><a class="indexterm" name="d0e1570"></a><a class="link" href="#modeling-workbench-executing-model-timeline-view-section" title="2.3.4.&nbsp;Timeline View">Timeline View</a> is displayed at the end of the execution in order to control the resulting execution trace.</li></ul></div><p>If more feedback are required, please use one of the frontend or backend available for the xDSML, see <a class="link" href="#modeling-workbench-backends-frontends-section" title="2.3.1.4.&nbsp;Backends and frontends">Backends and frontends</a>.</p></div><div class="section" title="2.3.1.3.&nbsp;Debug mode"><div class="titlepage"><div><div><h4 class="title"><a name="_debug_mode"></a>2.3.1.3.&nbsp;Debug mode</h4></div></div></div><p>In debug mode, the engine offers more control on the execution.
It allows to pause, add breakpoint, and run in a step by step mode.</p><p>It reuses the Eclipse Debug perspective and some of its views and add some Gemoc specific views.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">the <a class="link" href="#modeling-workbench-executing-model-engine-view-section" title="2.3.2.&nbsp;Engine View"></a><a class="indexterm" name="d0e1592"></a><a class="link" href="#modeling-workbench-executing-model-engine-view-section" title="2.3.2.&nbsp;Engine View">Engine View</a> allows to stop a running model.</li><li class="listitem">the <a class="link" href="#modeling-workbench-executing-model-timeline-view-section" title="2.3.4.&nbsp;Timeline View"></a><a class="indexterm" name="d0e1601"></a><a class="link" href="#modeling-workbench-executing-model-timeline-view-section" title="2.3.4.&nbsp;Timeline View">Timeline View</a> is displayed during all the simulation.</li><li class="listitem">the <a class="link" href="#modeling-workbench-executing-model-event-manager-view-section" title="2.3.5.&nbsp;Stimuli Manager View"></a><a class="indexterm" name="d0e1610"></a><a class="link" href="#modeling-workbench-executing-model-event-manager-view-section" title="2.3.5.&nbsp;Stimuli Manager View">Event Manager View</a> is displayed during all the simulation.</li><li class="listitem">the <a class="link" href="#modeling-workbench-executing-model-animation-view-section" title="2.3.6.&nbsp;Animation View"></a><a class="indexterm" name="d0e1619"></a><a class="link" href="#modeling-workbench-executing-model-animation-view-section" title="2.3.6.&nbsp;Animation View">Event Manager View</a> is displayed during all the simulation. It can display both an animation layer and a debug layer.</li><li class="listitem">the <a class="link" href="#modeling-workbench-executing-model-debug-view-section" title="2.3.7.&nbsp;Debug View">Debug View</a>. This view presents an interface for Step by Step execution at the Logical Step level or even at the DSA level.</li><li class="listitem">the <a class="link" href="#modeling-workbench-executing-model-variable-view-section" title="2.3.8.&nbsp;Variable View">Variable View</a>. This view presents the <a class="indexterm" name="d0e1636"></a>Runtime Data as a (EMF based) tree.</li></ul></div><p>When running a simulation in Debug mode, it is configured to activate automatically the Debug layer and the Animation layer in the Animation view.</p></div><div class="section" title="2.3.1.4.&nbsp;Backends and frontends"><div class="titlepage"><div><div><h4 class="title"><a name="modeling-workbench-backends-frontends-section"></a>2.3.1.4.&nbsp;Backends and frontends</h4></div></div></div><p>Backends and frontends offer additionnal view that can respectively display informations from the running model or provide event input to the running model.</p><p>These backends and front ends usually open dedicated views. These views are always opened in all modes (Run or Debug).</p></div></div><div class="section" title="2.3.2.&nbsp;Engine View"><div class="titlepage"><div><div><h3 class="title"><a name="modeling-workbench-executing-model-engine-view-section"></a>2.3.2.&nbsp;Engine View</h3></div></div></div><p>The engine view displays a list of execution engine and their statuses:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">its number of execution steps,</li><li class="listitem">its current running status,</li><li class="listitem">and its logical steps deciding strategy.</li></ul></div><p><span class="inlinemediaobject"><img src="./images/workbench/modeling/engine_view.png" width="400" alt="Engine View"></span></p><p><a name="modeling-workbench-executing-model-logical-step-view-section"></a>The buttons available on top right of this views respectivley allows to:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Stop the selected Engine (red square button)</li><li class="listitem">Remove previously stopped engines from the view (crosses button)</li><li class="listitem">Change the current logical step decider (shield button).</li></ul></div><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Tip</h2><p xmlns="">When running in debug mode, You can easily "pause" an engine running with a solver or random decider by clicking on the change logical step decider (the shield button will be green when run in debub mode) this will automatically switch to the "Step by step decider". To restart, simply select back an automatic decider (solver or random) and select the next step in the LogicalStep view.</p></div></div><div class="section" title="2.3.3.&nbsp;Logical Steps View"><div class="titlepage"><div><div><h3 class="title"><a name="_logical_steps_view"></a>2.3.3.&nbsp;Logical Steps View</h3></div></div></div><p>The logical steps view displays the list of possible future executions. This list is provided by the solver. This view is organized around a tree. For each logical step, its underlying events can be seen and possibly for each event the associated operation is visible.</p><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p xmlns="">This view displays nothing when execution runs in "run mode", per say this view is only of use when running in "debug mode".</p></div><p><span class="inlinemediaobject"><img src="./images/workbench/modeling/logical_steps.png" alt="Logical Steps"></span></p></div><div class="section" title="2.3.4.&nbsp;Timeline View"><div class="titlepage"><div><div><h3 class="title"><a name="modeling-workbench-executing-model-timeline-view-section"></a>2.3.4.&nbsp;Timeline View</h3></div></div></div><p>This view represents the line of the model&#8217;s execution. It displays:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">the different logical steps proposed by the solver in the past in blue color,</li><li class="listitem">the selected logical steps at each execution step in green color,</li><li class="listitem">and the possible future logical steps in yellow color,</li><li class="listitem">the model specific events for each logical step.</li></ul></div><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p xmlns="">This view can be enabled/disable in the launch configuration by checking "Execution tracing" in the Engine Addons tab.</p></div><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p xmlns="">The possible future logical steps are shown under the condition that the model is executing.</p></div><p><span class="inlinemediaobject"><img src="./images/workbench/modeling/timeline.png" width="800" alt="Timeline"></span></p><p>In addition to displaying information, it also provides interaction with the user. During execution, it is possible to come back into the past by double-clicking on any of the blue logical steps. It does three things:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">it resets the solver&#8217;s state to the selected execution step,</li><li class="listitem">and it resets the model&#8217;s state to the selected execution step,</li><li class="listitem">it also forks the current timeline and create a new branch of execution.</li></ol></div><p><span class="inlinemediaobject"><img src="./images/workbench/modeling/timeline/timeline_branch.png" width="200" alt="Timeline branch"></span></p><p>It is also possible to select a logical step and use the contextual menu to show its caller in the Sirius editor:</p><p><span class="inlinemediaobject"><img src="./images/workbench/modeling/timeline/show_caller_timeline.png" alt="Show caller"></span></p><p><span class="inlinemediaobject"><img src="./images/workbench/modeling/timeline/show_caller_editor.png" alt="Show caller"></span></p></div><div class="section" title="2.3.5.&nbsp;Stimuli Manager View"><div class="titlepage"><div><div><h3 class="title"><a name="modeling-workbench-executing-model-event-manager-view-section"></a>2.3.5.&nbsp;Stimuli Manager View</h3></div></div></div><p>The Stimuli Manager view display the list of MSE and has interactions with the Logical Steps view.</p><p><span class="inlinemediaobject"><img src="./images/workbench/modeling/stimuliManager_view.png" alt="Stimuli manager view"></span></p><p>When selecting an MSE you can constrain it by clicking on :</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Green down arrow : no user constraint for this MSE in the next LogicalStep</li><li class="listitem">Orange down arrow : forbid tick of this MSE in the next LogicalStep. The solver will propose only solutions where this MSE doesn&#8217;t tick.</li><li class="listitem">Orange up : force tick of this MSE in the next LogicalSteps. The solver will propose only solutions where this MSE ticks.</li></ul></div><p>Depending of your choice, the list of proposals will be changed in the Logical Steps view.</p><p>Moreover selecting an element in the Logical Steps view will enlight the MSE involed in the Stimuli Manager view.</p><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Tip</h2><p xmlns="">This Stimuli Manager view can be used to manually simulate external events.</p></div></div><div class="section" title="2.3.6.&nbsp;Animation View"><div class="titlepage"><div><div><h3 class="title"><a name="modeling-workbench-executing-model-animation-view-section"></a>2.3.6.&nbsp;Animation View</h3></div></div></div><p>If you have defined a debug representation using <a class="xref" href="#defining-a-debug-representation-section" title="1.9.&nbsp;Defining a debug representation">Section&nbsp;1.9, &#8220;Defining a debug representation&#8221;</a>. You can use the following actions to start a debug session and toggle breakpoints.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/workbench/modeling/debug_actions.png" alt="Debug actions"></div></div><p>A decorator is shown on all element holding a breakpoint.
The decorator also reflects the state of the breakpoint:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">enabled</li></ul></div><p><span class="inlinemediaobject"><img src="./images/workbench/modeling/breakpoint_enabled.png" alt="breakpoint enabled"></span></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">disabled</li></ul></div><p><span class="inlinemediaobject"><img src="./images/workbench/modeling/breakpoint_disabled.png" alt="breakpoint deisabled"></span></p><p>When you hit a breakpoint on an element and are debugging with the decider "Step by step user decider", in order to restart the execution you must clic the resume button from the debug perspective. Then don&#8217;t forget to select the next logical step to execute. Do the same when debugging in step by step with the decider "Step by step user decider".</p><p>While executing you can visualize execution data. This setting must be defined by hand since the data are language dependant (see <a class="xref" href="#defining-a-debug-representation-section" title="1.9.&nbsp;Defining a debug representation">Section&nbsp;1.9, &#8220;Defining a debug representation&#8221;</a> for more details). Here the current state is decorated with a green arrow.</p><p><span class="inlinemediaobject"><img src="./images/workbench/modeling/execution_data_highlight.png" alt="Execution data highlight"></span></p><p>The default definition highlights the current instruction in yellow.</p></div><div class="section" title="2.3.7.&nbsp;Debug View"><div class="titlepage"><div><div><h3 class="title"><a name="modeling-workbench-executing-model-debug-view-section"></a>2.3.7.&nbsp;Debug View</h3></div></div></div><p>This view is part of the Debug perspective.
It presents an interface for Step by Step execution at the Logical Step level or even at the DSA level.
When an execution is paused, this view presents the current Logical Step.</p><p>When paused on a <a class="indexterm" name="d0e1858"></a>Logical Step, the Step over command allows to go to the next Logical Step. The Step Into command allows to run separatly each of the internal DSA calls associated to the Logical Step.</p><p><span class="inlinemediaobject"><img src="./images/workbench/modeling/debug_view.png" alt="Debug view"></span></p></div><div class="section" title="2.3.8.&nbsp;Variable View"><div class="titlepage"><div><div><h3 class="title"><a name="modeling-workbench-executing-model-variable-view-section"></a>2.3.8.&nbsp;Variable View</h3></div></div></div><p>This view is available on the Debug perspective.
When an execution is paused, this view presents the current <a class="indexterm" name="d0e1874"></a>Runtime Data as an EMF based tree.</p></div></div></div><div class="chapter" title="Chapter&nbsp;3.&nbsp;Tutorial: Make Marked Graph models executable with the GEMOC Studio"><div class="titlepage"><div><div><h2 class="title"><a name="_tutorial_make_marked_graph_models_executable_with_the_gemoc_studio"></a>Chapter&nbsp;3.&nbsp;Tutorial: Make Marked Graph models executable with the GEMOC Studio</h2></div></div></div><div class="section" title="3.1.&nbsp;What is expected at the end of this tutorial"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_what_is_expected_at_the_end_of_this_tutorial"></a>3.1.&nbsp;What is expected at the end of this tutorial</h2></div></div></div><p>This tutorial aims at demonstrating the power of the GEMOC studio to
define an executable semantics and provide graphical animation for a
DSML.   It relies of the
<a class="link" href="http://en.wikipedia.org/wiki/Marked_graph" target="_top">marked graph</a> language.</p><p>The <a class="link" href="images/MarkedGraph/MarkedGraph-wikipedia-anim-all.gif" target="_top">following animation</a> shows the expecting results of this tutorial:
according to the fired transitions, tokens move from place to place.</p><div class="figure"><a name="d0e1894"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/MarkedGraph/MarkedGraph-wikipedia-anim-all.gif" alt="Expected animation for Marked Graph models"></div></div><p class="title"><b>Figure&nbsp;3.1.&nbsp;Expected animation for Marked Graph models</b></p></div><br class="figure-break"></div><div class="section" title="3.2.&nbsp;Install the projects defining the Marked Graph AS and CS"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_install_the_projects_defining_the_marked_graph_as_and_cs"></a>3.2.&nbsp;Install the projects defining the Marked Graph AS and CS</h2></div></div></div><p>The domain model is implemented with several EMF projects that you
need to import into your workspace.
A graphical editor defined with Sirius is also available to visualize
and edit Marked Graph models.</p><div class="section" title="3.2.1.&nbsp;Import the Marked Graph AS and CS"><div class="titlepage"><div><div><h3 class="title"><a name="_import_the_marked_graph_as_and_cs"></a>3.2.1.&nbsp;Import the Marked Graph AS and CS</h3></div></div></div><p>Download the
<a class="link" href="MarkedGraph/org.gemoc.sample.markedgraph.zip" target="_top">provided
archive</a> containing the projects and unzip it.  Then, with the GEMOC
Studio, select <span class="emphasis"><em>import&#8230;&#8203; / General / Existing Projects into
Workspace</em></span> and import all the projects from the archive file.</p></div><div class="section" title="3.2.2.&nbsp;Abstract Syntax"><div class="titlepage"><div><div><h3 class="title"><a name="_abstract_syntax"></a>3.2.2.&nbsp;Abstract Syntax</h3></div></div></div><p>Marked Graph is a kind of
<a class="link" href="http://en.wikipedia.org/wiki/Petri_net" target="_top">Petri net</a>
in which every place has exactly one incoming arc and exactly one
outgoing arc.  As a consequence, it a concurrent language (several
transitions may be fired) and has no conflict.</p><p>The Domain Model, also called Abstract Syntax or Metamodel, defines :</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">A <span class="emphasis"><em>marked graph</em></span> as a set of <span class="emphasis"><em>places</em></span> and <span class="emphasis"><em>transitions</em></span>.</li><li class="listitem">Each <span class="emphasis"><em>Place</em></span> has exactly one <span class="emphasis"><em>input</em></span> transition and one <span class="emphasis"><em>output</em></span>
transition and a token count.</li><li class="listitem">A transition has several <span class="emphasis"><em>input</em></span> places and several <span class="emphasis"><em>output</em></span>
places.</li></ul></div><div class="figure"><a name="d0e1963"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/MarkedGraph/MarkedGraph-AS.png" alt="MarkedGraph Domain Model (Metamodel)"></div></div><p class="title"><b>Figure&nbsp;3.2.&nbsp;Abstract Syntax (Metamodel) of MarkedGraph</b></p></div><br class="figure-break"></div><div class="section" title="3.2.3.&nbsp;Concrete Syntax and Sample Model"><div class="titlepage"><div><div><h3 class="title"><a name="_concrete_syntax_and_sample_model"></a>3.2.3.&nbsp;Concrete Syntax and Sample Model</h3></div></div></div><p>The graphical concrete syntax draws places as
circles and transitions as squares.  Inputs and outputs of places and
transitions are designated by arrows.  The following picture shows the
graphical representation of the
<a class="link" href="http://en.wikipedia.org/wiki/Marked_graph" target="_top">Marked Graph model of wikipedia</a>
(using a graphical syntax defined using
<a class="link" href="http://www.eclipse.org/sirius/" target="_top">Sirius</a>).</p><div class="figure"><a name="d0e1983"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/MarkedGraph/MG-model-wikipedia.png" alt="Example of a Marked Graph model (from wikipedia)"></div></div><p class="title"><b>Figure&nbsp;3.3.&nbsp;Example of a Marked Graph model (from <a class="link" href="http://en.wikipedia.org/wiki/Marked_graph" target="_top">wikipedia</a>)</b></p></div><br class="figure-break"></div></div><div class="section" title="3.3.&nbsp;Set up an xDSML project"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_set_up_an_xdsml_project"></a>3.3.&nbsp;Set up an xDSML project</h2></div></div></div><p>In this section, we first create an xDSML project for MarkedGraph
and initialize it with the provided Abstract Syntax (AS) and Concrete
Syntax (CS).</p><div class="section" title="3.3.1.&nbsp;Create an xDSML Project"><div class="titlepage"><div><div><h3 class="title"><a name="_create_an_xdsml_project"></a>3.3.1.&nbsp;Create an xDSML Project</h3></div></div></div><p>Select an xDSML project (<span class="emphasis"><em>New &gt; Project &gt; GEMOC
Project / new GEMOC Concurrent xDSML Project</em></span>).
You can also select <span class="emphasis"><em>New &#8230;&#8203; / GEMOC Concurrent xDSML Project</em></span>.</p><div class="figure"><a name="d0e2011"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/MarkedGraph/MG-SelectGemocLanguageProject.png" width="800" alt="Create an xDSML Project"></div></div><p class="title"><b>Figure&nbsp;3.4.&nbsp;Create an xDSML Project</b></p></div><br class="figure-break"><p>The first dialog of the wizard asks for the name of the project. Define
it as <span class="emphasis"><em>org.gemoc.sample.markedgraph.xdsml</em></span>.</p><div class="figure"><a name="d0e2025"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/MarkedGraph/MG-SelectGemocLanguageProject-ProjectName.png" width="800" alt="Define the name of the project"></div></div><p class="title"><b>Figure&nbsp;3.5.&nbsp;Define the name of the project</b></p></div><br class="figure-break"><p>Click on <span class="emphasis"><em>Next</em></span>  and define the name of the language (<span class="emphasis"><em>markedgraph</em></span>).</p><div class="figure"><a name="d0e2042"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/MarkedGraph/MG-SelectGemocLanguageProject-LanguageName.png" width="800" alt="Define the name of the language"></div></div><p class="title"><b>Figure&nbsp;3.6.&nbsp;Define the name of the language</b></p></div><br class="figure-break"></div><div class="section" title="3.3.2.&nbsp;Open xDSML View"><div class="titlepage"><div><div><h3 class="title"><a name="_open_xdsml_view"></a>3.3.2.&nbsp;Open xDSML View</h3></div></div></div><p>A file <span class="emphasis"><em>project.xml</em></span> has been created in the
<span class="emphasis"><em>org.gemoc.sample.markedgraph.xdsml</em></span> project.</p><div class="figure"><a name="d0e2062"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/MarkedGraph/MG-XDSML-content.png" width="800" alt="Content of the xDSML Project"></div></div><p class="title"><b>Figure&nbsp;3.7.&nbsp;Content of the xDSML Project</b></p></div><br class="figure-break"><p>When opened, it provides the xDSML view which summarizes all the
important resources used in an xDSML project (which are part of and
managed by other projects).  This view is a kind of control center to
have quick access to the main resources of the project.</p><div class="figure"><a name="d0e2073"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/MarkedGraph/MG-XDSML-start.png" width="800" alt="The xDSML Editor"></div></div><p class="title"><b>Figure&nbsp;3.8.&nbsp;The xDSML Editor</b></p></div><br class="figure-break"></div><div class="section" title="3.3.3.&nbsp;Select the AS"><div class="titlepage"><div><div><h3 class="title"><a name="_select_the_as"></a>3.3.3.&nbsp;Select the AS</h3></div></div></div><p>In the "Domain Model" section, click on the "Browse" button to select
the project defining the AS: org.gemoc.sample.markedgraph.model.</p><div class="figure"><a name="d0e2087"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/MarkedGraph/MG-XDSML-EMF-Browse.png" width="800" alt="Browse to select the AS project"></div></div><p class="title"><b>Figure&nbsp;3.9.&nbsp;Browse to select the AS project</b></p></div><br class="figure-break"><p>Then, select the "Genmodel URI".</p><div class="figure"><a name="d0e2098"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/MarkedGraph/MG-XDSML-EMF-genmodel-browse.png" width="800" alt="Browse to select the genmodel resource"></div></div><p class="title"><b>Figure&nbsp;3.10.&nbsp;Browse to select the genmodel resource</b></p></div><br class="figure-break"><p>Finally, select the "Root container model
element" thanks to the "Select" buttons.</p><div class="figure"><a name="d0e2109"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/MarkedGraph/MG-XDSML-EMF-root-browse.png" width="800" alt="Browse to select the root container"></div></div><p class="title"><b>Figure&nbsp;3.11.&nbsp;Browse to select the root container</b></p></div><br class="figure-break"></div><div class="section" title="3.3.4.&nbsp;Select the Graphical Editor"><div class="titlepage"><div><div><h3 class="title"><a name="_select_the_graphical_editor"></a>3.3.4.&nbsp;Select the Graphical Editor</h3></div></div></div><p>The Graphical Editor defines a graphical concrete syntax which is
user-friendly to view and edit a model.</p><p>In the "Concrete syntax definition / Graphical editor" of the
project.xdsml editor, click on "Browse" to select the
"org.gemoc.markedgraph.design" project.</p><div class="figure"><a name="d0e2125"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/MarkedGraph/MG-XDSML-CS-select.png" width="800" alt="Select Sirius graphical editor"></div></div><p class="title"><b>Figure&nbsp;3.12.&nbsp;Select Sirius graphical editor</b></p></div><br class="figure-break"></div></div><div class="section" title="3.4.&nbsp;Define the Execution Semantics"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_define_the_execution_semantics"></a>3.4.&nbsp;Define the Execution Semantics</h2></div></div></div><p>A transition can be fired if there is at least one token in every of
each input place.  When fired, one token is removed from each of its
input places and one token is added to each of its output places.
Several transitions can be fired as the same time.</p><p>Defining the execution semantics consists in implementing the previous
behavior.  In the GEMOC approach, it is split in different concerns:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">The definition of Execution Data (ED) like the runtime count of
tokens in a place and Execution Functions (EF) like fire a transition.
ED and EF constitute <span class="strong"><strong>the DSA</strong></span>.</li><li class="listitem">The definition of the model of concurrency as a set of events and
constraints on these events.  It is <span class="strong"><strong>the MoCC</strong></span> concern that is
defined in a DSE project (using ECL, Event Constraint Language)
possibly completed with MoCCML projects  to define libraries of
constraints.</li><li class="listitem">The <span class="strong"><strong>mapping</strong></span> between the DSA and the MoCC.</li></ul></div><p>In the current version of the GEMOC studio, the MoCC and the mapping
are tightly coupled and described in ECL (Event Constraint Language).</p><div class="section" title="3.4.1.&nbsp;Define DSA"><div class="titlepage"><div><div><h3 class="title"><a name="_define_dsa"></a>3.4.1.&nbsp;Define DSA</h3></div></div></div><p>During execution of a MarkedGraph, the number of tokens of a place has
to be recorded and changed according to the fired transitions.  Thus,
we have to manage an execution data (ED) called runtimeTokenCount and
an execution function (EF) on Transition called fire().  Furthermore,
the runtimeTokenCount of each place must be initialized at the start
of the execution. It is the purpose of the EF called initialize() on
the MarkedGraph element.</p><p>The DSA of Marked Graph is composed of :</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">one ED called  <span class="emphasis"><em>runtimeTokenCount</em></span>
defined on <span class="emphasis"><em>Place</em></span> . It represents the number of token in a place when the
model is executed.</li><li class="listitem">one EF called initialize() defined
on <span class="emphasis"><em>MarkedGraph</em></span>. It initializes the runtime token count of each
place with the initial token count.</li><li class="listitem">one ED called <span class="emphasis"><em>fire()</em></span> on
<span class="emphasis"><em>Transition</em></span>. It to remove one token from each of its input places
and add one token to all its output places.</li></ul></div><div class="section" title="3.4.1.1.&nbsp;Extend the AS with ED and EF"><div class="titlepage"><div><div><h4 class="title"><a name="_extend_the_as_with_ed_and_ef"></a>3.4.1.1.&nbsp;Extend the AS with ED and EF</h4></div></div></div><p>At the moment, we need to complete the AS (markedgraph.ecore) with the
ED and EF.  In the next release of the GEMOC Studio this steps will
disappear and extended the AS will be done automatically thanks to
<a class="link" href="http://melange-lang.org/" target="_top">Melange</a></p><p>Add the 'runtimeTokenCount' ED on Place, 'fire()' on Transition and
'initialize()' on MarkedGraph.</p><div class="figure"><a name="d0e2203"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/MarkedGraph/MarkedGraph-AS-DSA.png" alt="Abstract Syntax of MarkedGraph extended with Execution Data (ED) and Execution Functions (EF)"></div></div><p class="title"><b>Figure&nbsp;3.13.&nbsp;Abstract Syntax of MarkedGraph extended with Execution Data (ED) and Execution Functions (EF)</b></p></div><br class="figure-break"></div><div class="section" title="3.4.1.2.&nbsp;Create the DSA Project"><div class="titlepage"><div><div><h4 class="title"><a name="_create_the_dsa_project"></a>3.4.1.2.&nbsp;Create the DSA Project</h4></div></div></div><p>Click on <span class="emphasis"><em>K3 project</em></span> in the project.xdml editor (Behavioral definition / DSA
definition).  The wizard to create of new Kermeta 3 project is
launched with the name of the project initialized (k3dsa is the last
name). Click "Finish".  The project has been created.</p><div class="figure"><a name="d0e2220"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/MarkedGraph/MG-K3-Create.png" width="800" alt="Create a K3 Project"></div></div><p class="title"><b>Figure&nbsp;3.14.&nbsp;Create a K3 Project</b></p></div><br class="figure-break"></div><div class="section" title="3.4.1.3.&nbsp;Implement the DSA"><div class="titlepage"><div><div><h4 class="title"><a name="_implement_the_dsa"></a>3.4.1.3.&nbsp;Implement the DSA</h4></div></div></div><p>Click again on <span class="emphasis"><em>K3 project</em></span> to open <span class="emphasis"><em>markedgraph.xtend</em></span>.  It
has been initialized with a template that can be discarded and
replaced with the <a class="link" href="MarkedGraph/markedgraph.xtend" target="_top">following text</a>.</p><pre class="screen">package markedgraph.aspects

import fr.inria.diverse.k3.al.annotationprocessor.Aspect
import markedgraph.MarkedGraph
import markedgraph.Place
import markedgraph.Transition

import static extension markedgraph.aspects.PlaceAspect.*

@Aspect(className=MarkedGraph)
class MarkedGraphAspect {
	def public void initialize() {
		println("Graph " + _self.name + " initialized.")
		_self.places.forEach [ pl | pl.initialize ]
	}
}

@Aspect(className=Place)
class PlaceAspect {
	public int runtimeTokenCount

	// @Helper
	def public void initialize() {
		println("Place " + _self.name + ": initialized.")
		_self.runtimeTokenCount = _self.tokenCount
	}
}

@Aspect(className=Transition)
class TransitionAspect {
	def public void fire() {
		println("Transition " + _self.name + ": fired.")
		_self.inputs.forEach[ runtimeTokenCount = runtimeTokenCount - 1 ]
		_self.outputs.forEach[ runtimeTokenCount = runtimeTokenCount + 1 ]
	}
}</pre><div class="figure"><a name="d0e2245"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/MarkedGraph/MG-K3-Defined.png" width="800" alt="Definition of the DSA (ED and EF)"></div></div><p class="title"><b>Figure&nbsp;3.15.&nbsp;Definition of the DSA (ED and EF)</b></p></div><br class="figure-break"></div></div><div class="section" title="3.4.2.&nbsp;Define DSE"><div class="titlepage"><div><div><h3 class="title"><a name="_define_dse"></a>3.4.2.&nbsp;Define DSE</h3></div></div></div><p>The purpose of the DSE project is to define events (called DSE) on AS
elements that will trigger EF calls when they occurs.  Furthermore,
constraints can be defined on these events to define when they may occur.</p><div class="section" title="3.4.2.1.&nbsp;Create the DSE Project"><div class="titlepage"><div><div><h4 class="title"><a name="_create_the_dse_project"></a>3.4.2.1.&nbsp;Create the DSE Project</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Click on the "ECL Project" in the
<span class="emphasis"><em>project.xdsml</em></span> editor ("Behavior definition / DSE definition").</li><li class="listitem">Check that the name is <span class="emphasis"><em>org.gemoc.sample.markedgraph.dse</em></span>.</li></ul></div><div class="figure"><a name="d0e2275"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/MarkedGraph/MG-DSE-Create.png" width="800" alt="Create a DSE Project"></div></div><p class="title"><b>Figure&nbsp;3.16.&nbsp;Create a DSE Project</b></p></div><br class="figure-break"><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Click "Next".  All fields have been correctly initialized.</li><li class="listitem">Click "finish" and the project is created.</li><li class="listitem">Click on "ECL Project" to view the "markedgraph.ecl".</li></ul></div><div class="figure"><a name="d0e2294"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/MarkedGraph/MG-DSE-Template.png" width="800" alt="Template of the ECL file"></div></div><p class="title"><b>Figure&nbsp;3.17.&nbsp;Template of the ECL file</b></p></div><br class="figure-break"></div><div class="section" title="3.4.2.2.&nbsp;Define DSE"><div class="titlepage"><div><div><h4 class="title"><a name="_define_dse_2"></a>3.4.2.2.&nbsp;Define DSE</h4></div></div></div><p>Replace the content of the ECL file with the
<a class="link" href="MarkedGraph/markedgraph.ecl" target="_top">following code</a> (explanations on
this code are given bellow):</p><p title="The file markedgraph.ecl"><b>The file markedgraph.ecl.&nbsp;</b>
</p><pre class="screen">import 'platform:/resource/org.gemoc.sample.markedgraph.model/model/markedgraph.ecore'

ECLimport "platform:/plugin/fr.inria.aoste.timesquare.ccslkernel.model/ccsllibrary/kernel.ccslLib"
ECLimport "platform:/plugin/fr.inria.aoste.timesquare.ccslkernel.model/ccsllibrary/CCSL.ccslLib"

package markedgraph

	context MarkedGraph
		def: initIt: Event = self.initialize()

	context Transition
		def: fireIt: Event = self.fire()

	context Place
		inv tokenCountIsNull:
			(self.tokenCount = 0) implies
				(Relation Precedes(self.input.fireIt, self.output.fireIt))
		inv tokenCountIsNotNullDelayRequired:
			(self.tokenCount &gt; 0) implies
				let delay: Integer = self.tokenCount in
				let outputDelayed: Event =
					Expression DelayFor(self.output.fireIt, self.output.fireIt, delay) in
						Relation Precedes(self.input.fireIt, outputDelayed)

	context MarkedGraph
        inv initFirst:
                let firstInit : Event = Expression OneTickAndNoMore(self.initIt) in
                let allFire : Event = Expression Union(self.transitions.fireIt) in
                let firstOfAllFire : Event = Expression OneTickAndNoMore(allFire) in
                Relation Precedes(firstInit, firstOfAllFire)

        inv onlyOneInit:
                let firstInit2 : Event = Expression OneTickAndNoMore(self.initIt) in
                Relation Coincides(self.initIt, firstInit2)

endpackage</pre><p title="The file markedgraph.ecl">
</p><div class="figure"><a name="d0e2319"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/MarkedGraph/MG-DSE-Defined.png" width="800" alt="Definition of the DSE (events and constraints)"></div></div><p class="title"><b>Figure&nbsp;3.18.&nbsp;Definition of the DSE (events and constraints)</b></p></div><br class="figure-break"><p>This step has three main purposes:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">First, it specifies DSE in the context of metaclasses of the AS.
For Marked Graph xDSML, we identify 2 DSE:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">fireIt: defined in the context of a Transition</li><li class="listitem">initIt: defined in the context of a MarkedGraph</li></ul></div></li><li class="listitem"><p class="simpara">Then, it links them to EF from DSA --- when a DSE will occur the
associated EF will be executed.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">fireIt is linked to the EF 'fire' of Transition</li><li class="listitem">initIt is linked to the EF 'initialize' of MarkedGraph</li></ul></div></li><li class="listitem"><p class="simpara">Finally, it defines constraints on the DSE to rule the possible
scheduling.  Constraints generally rely on relations which are defined
in MoCC libraries. Here constraints are expressed in CCSL and only relies
on relations and expression from the CCSL core library.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">A first constraint applies on the fireIt events.  It is depends on
the number of token in a place.  Indeed, if there is no tokens, then
the fireIt of the output transition can only occur after the fireIt
event of the input transition has occured. It is expressed by the first
invariant defined in the context of a Place.
If there is some tokens in a place, then the fireIt event of the output
transition may occur as many times as there is tokens in this place.
After, it will only occur when the fireIt on the input transition of the
place has occured.  It is expressed using the DelayFor expression in the
second envariant of Place.</li><li class="listitem">Two other constraints are defined in the context of the MarkedGraph
element.  The first one expresses that the first initIt event must occur
before any fireIt event.  The second one expresses that the initIt event
can occur only one time.</li></ul></div></li></ol></div><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p xmlns="">Please notice that, as often, DSE are defined at the language
level, but at runtime they are instantiated as MSE on each object
instance of the metaclasse they are defined on.  For example, there will be
one fireIt MSE for each Transition element of MarkedGraph model.  For the
wikipedia example, there will a fireIt event for transitions t1, t2, t3 and
t4. In the same way, constraints apply to the MSE.</p></div></div></div></div><div class="section" title="3.5.&nbsp;Define Animation Viewpoint"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_define_animation_viewpoint"></a>3.5.&nbsp;Define Animation Viewpoint</h2></div></div></div><p>During the execution of a Marked Graph model, we want to visualize :</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">the number of tokens in any place: the runtime token count will be printed in the circle of one place.</li><li class="listitem">the firable transitions: they will be drawn in green.</li></ul></div><p>As the animation view is close to the graphical concrete syntax, we
extend the existing diagram description.</p><p>First, we will define a graphical representation based on the graphical
Marked Graph syntax to the wizard called "Create GEMOC debug
representation", then we will add a layer to describe the graphical
animation of a Marked Graph model.</p><div class="section" title="3.5.1.&nbsp;Create a debug representation (as an extension of the graphical editor viewpoint)"><div class="titlepage"><div><div><h3 class="title"><a name="_create_a_debug_representation_as_an_extension_of_the_graphical_editor_viewpoint"></a>3.5.1.&nbsp;Create a debug representation (as an extension of the graphical editor viewpoint)</h3></div></div></div><div class="section" title="3.5.1.1.&nbsp;Run the wizard"><div class="titlepage"><div><div><h4 class="title"><a name="_run_the_wizard"></a>3.5.1.1.&nbsp;Run the wizard</h4></div></div></div><p>Tun the wizard with <span class="emphasis"><em>New &gt; Other / Create GEMOC debug representation</em></span>.</p><div class="figure"><a name="d0e2391"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/MarkedGraph/MG-animation-wizard-launch.png" alt="Create GEMOC debug representation wizard"></div></div><p class="title"><b>Figure&nbsp;3.19.&nbsp;Create GEMOC debug representation wizard</b></p></div><br class="figure-break"><p>On the first screen of the wizad, select "Extends an existing diagram
description".</p><div class="figure"><a name="d0e2402"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/MarkedGraph/MG-animation-wizard-choose.png" alt="Select &#34;Extends an existing diagram description&#34;"></div></div><p class="title"><b>Figure&nbsp;3.20.&nbsp;Select "Extends an existing diagram description"</b></p></div><br class="figure-break"><p>Select the viewpoint to extend "MarkedGraph diagram".</p><div class="figure"><a name="d0e2413"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/MarkedGraph/MG-animation-wizard-select-viewpoint.png" alt="Select the viewpoint to extend"></div></div><p class="title"><b>Figure&nbsp;3.21.&nbsp;Select the viewpoint to extend</b></p></div><br class="figure-break"><p>Finally, we can fill in the Project Name in which the newly creating
viewpoint file will take place (org.gemoc.sample.markedgraph.animation),
the name of the viewpoint file (markedgraph-animation.odesign), the
viewpoint name (MarkedGraphViewpoint) and the diagram name (MarkedGraph).</p><div class="figure"><a name="d0e2424"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/MarkedGraph/MG-animation-wizard-set-names.png" alt="Information of the animation viewpoint"></div></div><p class="title"><b>Figure&nbsp;3.22.&nbsp;Information of the animation viewpoint</b></p></div><br class="figure-break"><p>The last screen allows to choose the name of the layer to be created. Debug
is a good name.</p><p>Once the <span class="emphasis"><em>Finish</em></span> button is pressed, the project is created.</p></div><div class="section" title="3.5.1.2.&nbsp;Open the markedgraph-animation.odesign"><div class="titlepage"><div><div><h4 class="title"><a name="_open_the_markedgraph_animation_odesign"></a>3.5.1.2.&nbsp;Open the markedgraph-animation.odesign</h4></div></div></div><p>Open the markedgraph-animation.odesign file and develop its content.</p><p>TODO: explain its contents.</p></div><div class="section" title="3.5.1.3.&nbsp;Load markedgraph.odesign as a resource."><div class="titlepage"><div><div><h4 class="title"><a name="_load_markedgraph_odesign_as_a_resource"></a>3.5.1.3.&nbsp;Load markedgraph.odesign as a resource.</h4></div></div></div><p>To be able to complete the definition of the odesign file, we first need to
load the existing markedgraph.odesign as a resource :</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Right click in the markedgraph.odesign editor to select <span class="emphasis"><em>Load Resource&#8230;&#8203;</em></span>.</li><li class="listitem">Select <span class="emphasis"><em>Browse workspace&#8230;&#8203;</em></span></li><li class="listitem">Select <span class="emphasis"><em>markedgraph.odesign</em></span> in the
<span class="emphasis"><em>org.gemoc.sample.markedgraph.design</em></span> project</li><li class="listitem">Click OK</li><li class="listitem">Click OK</li></ul></div></div><div class="section" title="3.5.1.4.&nbsp;Add markedgraph.ecore to the metamodels"><div class="titlepage"><div><div><h4 class="title"><a name="_add_markedgraph_ecore_to_the_metamodels"></a>3.5.1.4.&nbsp;Add markedgraph.ecore to the metamodels</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Select "Diagram Extension MarkedGraph" element.</li><li class="listitem">In the <span class="emphasis"><em>Properties</em></span> view, select <span class="emphasis"><em>metamodels</em></span>.</li><li class="listitem">Click on "Add from workspace".</li><li class="listitem">Select "markedgraph.ecore" (unfold the project structure)</li><li class="listitem">Click OK</li></ul></div></div><div class="section" title="3.5.1.5.&nbsp;Complete the debug representation"><div class="titlepage"><div><div><h4 class="title"><a name="_complete_the_debug_representation"></a>3.5.1.5.&nbsp;Complete the debug representation</h4></div></div></div><p>On the "Mapping Based Decoration Enabled breakpoint" and "Mapping Based
Decoration Disabled breakpoint", select the "Place" and "Transition"
element.</p><p>The debug view will show a symbol on the Place and Transition to show
whether the corresponding breakpoint is enabled or disabled.</p></div><div class="section" title="3.5.1.6.&nbsp;Complete the dependencies of the project"><div class="titlepage"><div><div><h4 class="title"><a name="_complete_the_dependencies_of_the_project"></a>3.5.1.6.&nbsp;Complete the dependencies of the project</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Open the plugin.xml file of the project.</li><li class="listitem">Select the <span class="emphasis"><em>dependencies</em></span> tab.</li><li class="listitem">Click "Add&#8230;&#8203;" in the "Required Plug-ins" area.</li><li class="listitem">Select "org.gemoc.gemoc_language_workbench.extensions.sirius"</li><li class="listitem">Click OK</li><li class="listitem">Save the plugin.xml resource.</li></ul></div></div><div class="section" title="3.5.1.7.&nbsp;Set the animation viewpoint in project.xml"><div class="titlepage"><div><div><h4 class="title"><a name="_set_the_animation_viewpoint_in_project_xml"></a>3.5.1.7.&nbsp;Set the animation viewpoint in project.xml</h4></div></div></div><p>In the xDSML editor, we can select the animation viewpoint by selecting the
newly created project (<span class="emphasis"><em>org.gemoc.sample.markedgraph.animation</em></span>)</p></div></div><div class="section" title="3.5.2.&nbsp;Create an animation representation"><div class="titlepage"><div><div><h3 class="title"><a name="_create_an_animation_representation"></a>3.5.2.&nbsp;Create an animation representation</h3></div></div></div><p>After the debug presentation has been defined, we can complete it to add an
animation layer.</p><div class="section" title="3.5.2.1.&nbsp;Create the Animation Layer"><div class="titlepage"><div><div><h4 class="title"><a name="_create_the_animation_layer"></a>3.5.2.1.&nbsp;Create the Animation Layer</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Right click on "Diagram extension MarkedGraph" to <span class="emphasis"><em>select New Diagram
Element / Additional Layer</em></span>.</li><li class="listitem">Set its "id" to "Animation".</li></ul></div></div><div class="section" title="3.5.2.2.&nbsp;Display the firable transition with a green background color"><div class="titlepage"><div><div><h4 class="title"><a name="_display_the_firable_transition_with_a_green_background_color"></a>3.5.2.2.&nbsp;Display the firable transition with a green background color</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Right click on "Animation" to select "New Customization / Style
Customizations".</li><li class="listitem">Right click on "Style Customizations" to select "New Customization /
Style Customization".</li><li class="listitem">On "Style Customization", set the "Predicate Expression" to
"[self.eGet('inputs')&#8594;forAll(p | p.eGet('runtimeTokenCount').toString().toInteger() &gt; 0) /]"</li><li class="listitem">Right click on "Style Customization" to select "New Customization /
Property Customization (by selection)"</li><li class="listitem">For "Applied On" property, select "Square white".</li><li class="listitem">For "Property Name", set "color" (completion is available with CTRL-SPACE)</li><li class="listitem">For "Value Selction", set "light_green"</li></ul></div></div><div class="section" title="3.5.2.3.&nbsp;Set the background color of a place to light_yellow"><div class="titlepage"><div><div><h4 class="title"><a name="_set_the_background_color_of_a_place_to_light_yellow"></a>3.5.2.3.&nbsp;Set the background color of a place to light_yellow</h4></div></div></div><p>Perform the same action as above to set the background color of places to
yellow.</p></div><div class="section" title="3.5.2.4.&nbsp;Display the runtime token count in a place"><div class="titlepage"><div><div><h4 class="title"><a name="_display_the_runtime_token_count_in_a_place"></a>3.5.2.4.&nbsp;Display the runtime token count in a place</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Right click on "Style Customization" to select "New Customization /
Property Customization (by expression)"</li><li class="listitem">For "Applied On" property, select "Ellipse white".</li><li class="listitem">For "Property Name", set "labelExpression" (completion is available with CTRL-SPACE)</li><li class="listitem">For "Value Selction", set "feature:runtimeTokenCount"</li></ul></div></div><div class="section" title="3.5.2.5.&nbsp;Add the Animation service"><div class="titlepage"><div><div><h4 class="title"><a name="_add_the_animation_service"></a>3.5.2.5.&nbsp;Add the Animation service</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Right click on "MarkedGraphViewpoint" to select "New Extension / Java
Extension".</li><li class="listitem">Set "Qualified Class Name" to
"org.gemoc.sample.markedgraph.animation.services.MarkedgraphAnimationServices".</li></ul></div><p>In the project, <span class="emphasis"><em>org.gemoc.sample.markedgraph.animation</em></span> project, in
src/org.gemoc.sample.markedgraph.animation.services, copy the
MarkedgraphDebugServices.java file to
MarkedgraphAnimationServices.java.  Then, change
AbstractGemocDebuggerServices to AbstractGemocAnimatorServices in its
source code (two times: import and extends).  Finally, change "Debug" to
"Animation".</p></div></div></div><div class="section" title="3.6.&nbsp;Animate a Model"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_animate_a_model"></a>3.6.&nbsp;Animate a Model</h2></div></div></div><p>The executable MarkedGraph Language is now defined.  We can use the
GEMOC Modeling Workbench to execute MarkedGraph models.</p><div class="section" title="3.6.1.&nbsp;Launch the Modelling WorkBench"><div class="titlepage"><div><div><h3 class="title"><a name="_launch_the_modelling_workbench"></a>3.6.1.&nbsp;Launch the Modelling WorkBench</h3></div></div></div><p>First, we will create a run configuration.  Select "run / run Configurations"
Double click on "Eclipse Application" and change the name "New
Configuration" into "Marked Graph Modeling Workbench".  We can now click
"Run" to start the new runtime Eclipse which indeed corresponds to the
Modeling Workbench for Marked Graph.</p><div class="figure"><a name="d0e2633"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/MarkedGraph/MG-run-EclipseApplicationConfig.png" alt="Define the Marked Graph Modeling Workbench configuration"></div></div><p class="title"><b>Figure&nbsp;3.23.&nbsp;Define the Marked Graph Modeling Workbench configuration</b></p></div><br class="figure-break"></div><div class="section" title="3.6.2.&nbsp;Import the project with a sample model"><div class="titlepage"><div><div><h3 class="title"><a name="_import_the_project_with_a_sample_model"></a>3.6.2.&nbsp;Import the project with a sample model</h3></div></div></div><p>Import the modeling project
<a class="link" href="MarkedGraph/org.gemoc.sample.markedgraph.sample.zip" target="_top">org.gemoc.sample.markedgraph.sample</a>
in the Modeling Workbench (Import / General / Existing project into
Workspace).  It contains the wikipedia.markedgraph file which corresponds
to the <a class="link" href="http://en.wikipedia.org/wiki/Marked_graph" target="_top">Wikipedia example</a>.</p></div><div class="section" title="3.6.3.&nbsp;Select the Modeling perspective"><div class="titlepage"><div><div><h3 class="title"><a name="_select_the_modeling_perspective"></a>3.6.3.&nbsp;Select the Modeling perspective</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Select "Window / Open Perspective / Others&#8230;&#8203;"</li><li class="listitem">Select "Modeling" in the list.</li></ul></div></div><div class="section" title="3.6.4.&nbsp;Create a Launch Configuration"><div class="titlepage"><div><div><h3 class="title"><a name="_create_a_launch_configuration"></a>3.6.4.&nbsp;Create a Launch Configuration</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Select <span class="emphasis"><em>Debug / Debug Configurations</em></span></li><li class="listitem">Double click on "Gemoc Concurrent eXecutable Model"</li><li class="listitem">Change the name of the new configuration to "run wikipedia example"</li><li class="listitem">Browse to select the model to run (wikipedia.markedgraph)</li><li class="listitem">Select its language (xDSML field): markedgraph</li><li class="listitem">Browse to select the animator</li><li class="listitem">Check that the "Decider" is set to "Step by step user decider" (the user
will decide which well be the next step to execute).</li><li class="listitem">Click on "Debug"</li></ul></div><div class="figure"><a name="d0e2693"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/MarkedGraph/MG-run-WikipediaConfig.png" alt="Define the configuration to run the wikipedia example"></div></div><p class="title"><b>Figure&nbsp;3.24.&nbsp;Define the configuration to run the wikipedia example</b></p></div><br class="figure-break"></div><div class="section" title="3.6.5.&nbsp;Launch the execution of the model"><div class="titlepage"><div><div><h3 class="title"><a name="_launch_the_execution_of_the_model"></a>3.6.5.&nbsp;Launch the execution of the model</h3></div></div></div><p>We can now run the "gemoc" configuration.  It opens the different views related to the execution on an xDSML model:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Logical Steps (top left): the list of the logical steps that may be
selected at this execution step.</li><li class="listitem">Gemoc Engine Status (middle left): the list on the running GEMOC engines.
The red button stops the selected engine.</li><li class="listitem">Stimuli Manager (bottom left): the list of MSE.</li><li class="listitem">VCD (top right): a graphical visualisation of the events manages by the
MoCC (first ones correspond to the MSE).</li><li class="listitem">Graphical visualization (middle right) of the model (with animation
information)</li><li class="listitem">Time Line (bottom middle): the logical steps available at each steps and
the selected one.</li><li class="listitem">Console: several consoles are available.  The dispolayed one is the
"Default MessaginSystem Console". There is one console the the main
component of the Modeling Workbench.</li></ul></div><div class="figure"><a name="d0e2729"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/MarkedGraph/MG-run-start.png" alt="The wikipedia model is just started"></div></div><p class="title"><b>Figure&nbsp;3.25.&nbsp;The wikipedia model is just started</b></p></div><br class="figure-break"></div><div class="section" title="3.6.6.&nbsp;Select a logical step"><div class="titlepage"><div><div><h3 class="title"><a name="_select_a_logical_step"></a>3.6.6.&nbsp;Select a logical step</h3></div></div></div><p>The Logical Steps view, presents the possible steps, and for each step,
the MSE that will occur if it is selected.</p><div class="figure"><a name="d0e2743"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/MarkedGraph/MG-run-start-select.png" alt="One logical step selected"></div></div><p class="title"><b>Figure&nbsp;3.26.&nbsp;One logical step selected</b></p></div><br class="figure-break"><p>Double-click on a Logical Step to choose it.  The corresponding MSE
occur, they are visible on the VCD, and they trigger the associated
execution functions which make the state of the model evolve.</p><div class="figure"><a name="d0e2754"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/MarkedGraph/MG-run-init.png" alt="Execute a logical step"></div></div><p class="title"><b>Figure&nbsp;3.27.&nbsp;Execute a logical step</b></p></div><br class="figure-break"><p>Then, we can select a new logical step (here we selected the the logical step which fires the t2 transition).</p><div class="figure"><a name="d0e2765"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/MarkedGraph/MG-run-t1-fired.png" alt="Transition t1 fired"></div></div><p class="title"><b>Figure&nbsp;3.28.&nbsp;Transition t1 fired</b></p></div><br class="figure-break"><div class="figure"><a name="d0e2774"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/MarkedGraph/MG-run-t2-fired.png" alt="Transition t2 fired"></div></div><p class="title"><b>Figure&nbsp;3.29.&nbsp;Transition t2 fired</b></p></div><br class="figure-break"><div class="figure"><a name="d0e2783"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/MarkedGraph/MG-run-last.png" alt="Some logical steps later"></div></div><p class="title"><b>Figure&nbsp;3.30.&nbsp;Some logical steps later</b></p></div><br class="figure-break"></div><div class="section" title="3.6.7.&nbsp;Stop the execution"><div class="titlepage"><div><div><h3 class="title"><a name="_stop_the_execution"></a>3.6.7.&nbsp;Stop the execution</h3></div></div></div><p>To stop the execution:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Select the "Gemoc Engine Status" view</li><li class="listitem">Select the engine to stop</li><li class="listitem">Click on the red button to actually stop the engine (the left icon
becomes red)</li></ul></div></div></div><div class="section" title="3.7.&nbsp;Define a MoCCML library"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_define_a_moccml_library"></a>3.7.&nbsp;Define a MoCCML library</h2></div></div></div><p>To improve readability of the ECL file and also to favor capitalization and
reuse of MoCC elements, it is possible (and encouraged) to define libraries.
Those libraries looks like the predefined ones that we have already used like
kernel.lib and CCSL.lib.</p><div class="section" title="3.7.1.&nbsp;Define a MoCCML library using CCSL"><div class="titlepage"><div><div><h3 class="title"><a name="_define_a_moccml_library_using_ccsl"></a>3.7.1.&nbsp;Define a MoCCML library using CCSL</h3></div></div></div><p>Using the GEMOC Studio, we start by defining a MoCCML project.  In the xDSML
view, we select <span class="emphasis"><em>Behavioral definition / MoCC definition library</em></span> to create
this new project.</p><p>We can then define in this project the following <a class="link" href="MarkedGraph/markedgraph.ccslLib" target="_top">markedgraph.ccslLib</a> file. TODO: To be corrected.</p><p title="The file markedgraph.ccslLib defining a MoCCML library"><b>The file markedgraph.ccslLib defining a MoCCML library.&nbsp;</b>
</p><pre class="screen">Unresolved directive in GuideTutorialMarkedGraph.asciidoc - include::MarkedGraph/markedgraph.ccslLib[Definition of a MoCCML library]</pre><p title="The file markedgraph.ccslLib defining a MoCCML library">
</p></div><div class="section" title="3.7.2.&nbsp;Using it in the ECL file"><div class="titlepage"><div><div><h3 class="title"><a name="_using_it_in_the_ecl_file"></a>3.7.2.&nbsp;Using it in the ECL file</h3></div></div></div><p>To use this new library, we only have to import it at the beginning of
the ECL file and the we can use it as kernel.lib and CCSL.lib
libraries.</p><p>Here is the new ECL file.</p><p title="The file markedgraph.ecl using the MoCCML library"><b>The file markedgraph.ecl using the MoCCML library.&nbsp;</b>
</p><pre class="screen">import 'platform:/resource/org.gemoc.sample.markedgraph.model/model/markedgraph.ecore'

ECLimport "platform:/plugin/fr.inria.aoste.timesquare.ccslkernel.model/ccsllibrary/kernel.ccslLib"
ECLimport "platform:/plugin/fr.inria.aoste.timesquare.ccslkernel.model/ccsllibrary/CCSL.ccslLib"
ECLimport "platform:/resource/org.gemoc.sample.markedgraph.mocc/mocc/markedgraph.moccml"

package markedgraph

	context MarkedGraph
		def: initIt: Event = self.initialize()

	context Transition
		def: fireIt: Event = self.fire()

	context Place
		inv placeReadAndWrite:
			let delay: Integer = self.tokenCount in
				Relation placeReadWrite(self.input.fireIt, self.input.fireIt, delay)

	context MarkedGraph
        inv initFirst:
                let firstInit : Event = Expression OneTickAndNoMore(self.initIt) in
                let allFire : Event = Expression Union(self.transitions.fireIt) in
                let firstOfAllFire : Event = Expression OneTickAndNoMore(allFire) in
                Relation Precedes(firstInit, firstOfAllFire)

        inv onlyOneInit:
                let firstInit2 : Event = Expression OneTickAndNoMore(self.initIt) in
                Relation Coincides(self.initIt, firstInit2)

endpackage</pre><p title="The file markedgraph.ecl using the MoCCML library">
</p></div></div><div class="section" title="3.8.&nbsp;Use constraint automata to define the MoCC"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_use_constraint_automata_to_define_the_mocc"></a>3.8.&nbsp;Use constraint automata to define the MoCC</h2></div></div></div><p>Sometimes, it may be easier to define the MoCC using automata.  For
example, we can see a place as something on which we can read a token
(ont output transition reads one token) or we can write a token (one
input transition writes one token).  A token can only be read if there
is at least one in the place.  Initially, there is as much token in
the place as in the initial token count of the place.</p><div class="section" title="3.8.1.&nbsp;Define the constraint automaton using MoCCML editor"><div class="titlepage"><div><div><h3 class="title"><a name="_define_the_constraint_automaton_using_moccml_editor"></a>3.8.1.&nbsp;Define the constraint automaton using MoCCML editor</h3></div></div></div><p>For explanations on how to use the MoCCML editor, please refer to the GEMOC
manual. TODO: provide the URL to it.</p><p>We first define the declaration of a relation (placeReadWriteDef).  Here after
is its graphical representation.  This relation is parameterized by the r clock (some one how wants to read a token), the w clock (someone how wants to write a token, and n the initial count of token in the place).</p><div class="figure"><a name="d0e2860"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/MarkedGraph/MoCCML-diagram.png" alt="Graphical definition of a relation"></div></div><p class="title"><b>Figure&nbsp;3.31.&nbsp;Graphical declaration of the placeReadWriteDef relation</b></p></div><br class="figure-break"><p>Then we can define this relation. Here after is the resulting automaton. The
local variable count represent the number of tokens in this place.  s0 is the
initial state. The action on the transition from s0 to s initialize count with
n (the parameter).  The two reflexive transitions on s explain what happens
when w or r occurs.  The write transition is fired when w occurs and  a token is assed in the place (count is incremented). The read transition is fired when r occurs.  It removes a token and thus decrements count.
A guard prevents the read transition to be fired if there is not at liste one token in the place (count &gt;= one).</p><div class="figure"><a name="d0e2871"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/MarkedGraph/MoCCML-automata.png" alt="Automaton defining the placeReadWriteDef relation"></div></div><p class="title"><b>Figure&nbsp;3.32.&nbsp;Automaton defining the placeReadWriteDef relation.</b></p></div><br class="figure-break"><p>Here is the textual representation of this constraint automata.</p><p title="Textual representation of the constraint automata."><b>Textual representation of the constraint automata.&nbsp;</b>
</p><pre class="screen">AutomataConstraintLibrary markedgraph{
	import "platform:/plugin/fr.inria.aoste.timesquare.ccslkernel.model/ccsllibrary/kernel.ccslLib" as kernel;
	import "platform:/plugin/fr.inria.aoste.timesquare.ccslkernel.model/ccsllibrary/CCSL.ccslLib" as ccsl;

	RelationLibrary placeLib {

		AutomataRelationDefinition placeReadWriteDef[placeReadWrite]{

			variables {
				Integer MAX = 10
				Integer count = 0

			}

			init: s0

			from s0 to s : init
			-&gt; (do count = n.value)

			from s to s : read
			-&gt; ( when r if( count &gt;= one) do count = (count - one))

			from s to s : write
			-&gt; ( when w do count = (count + one))

			State s0 (out : init)
			State s( in : read, write, init
				out : write, read
			)

		}

		RelationDeclaration placeReadWrite(r:clock, w: clock, n: int)
	}
}</pre><p title="Textual representation of the constraint automata.">
</p></div></div></div><div class="bibliography" title="Bibliography"><div class="titlepage"><div><div><h2 class="title"><a name="_bibliography"></a>Bibliography</h2></div></div></div><p>The bibliography lists some useful external documents. For a more complete list, please refer to the publications section on <a class="link" href="http://gemoc.org" target="_top">http://gemoc.org</a> site.</p><div class="bibliodiv" title="Articles"><h3 class="title"><a name="d0e2898"></a>Articles</h3><div class="bibliomixed"><a name="d0e2901"></a><p class="bibliomixed">
<span class="bibliomisc"><a name="globalizing-modeling-languages"></a>[globalizing-modeling-languages] <a class="link" href="http://hal.inria.fr/hal-00994551" target="_top">Globalizing Modeling Languages</a> (Benoit Combemale, Julien Deantoni, Benoit Baudry, Robert France, Jean-Marc Jezequel, Jeff Gray), In Computer, IEEE, 2014.</span>
</p></div></div></div><div class="glossary" title="Glossary"><div class="titlepage"><div><div><h2 class="title"><a name="_glossary"></a>Glossary</h2></div></div></div><div class="variablelist"><dl><dt><span class="term">AS</span></dt><dd>Abstract Syntax.</dd><dt><span class="term">API</span></dt><dd>Application Programming Interface.</dd><dt><span class="term">Behavioral Semantics</span></dt><dd>see Execution semantics.</dd><dt><span class="term">CCSL</span></dt><dd>Clock-Constraint Specification Language.</dd><dt><span class="term">Domain Engineer</span></dt><dd>user of the Modeling Workbench.</dd><dt><span class="term">DSA</span></dt><dd>Domain-Specific Action.</dd><dt><span class="term">DSE</span></dt><dd>Domain-Specific Event.</dd><dt><span class="term">DSML</span></dt><dd>Domain-Specific (Modeling) Language.</dd><dt><span class="term">Dynamic Semantics</span></dt><dd>see Execution semantics.</dd><dt><span class="term">Eclipse Plugin</span></dt><dd>an Eclipse plugin is a Java project with associated metadata that can be bundled and deployed as a contribution to an Eclipse-based IDE.</dd><dt><span class="term">ED</span></dt><dd>Execution Data.</dd><dt><span class="term">Execution Semantics</span></dt><dd>Defines when and how elements of a language will produce a model behavior.</dd><dt><span class="term">GEMOC Studio</span></dt><dd>Eclipse-based studio integrating both a language workbench and the corresponding modeling workbenches</dd><dt><span class="term">Language Workbench</span></dt><dd>a language workbench offers the facilities for designing and implementing modeling languages.</dd><dt><span class="term">Language Designer</span></dt><dd>a language designer is the user of the language workbench.</dd><dt><span class="term">MoCC</span></dt><dd>Model of Concurrency and Communication</dd><dt><span class="term">Model</span></dt><dd>model which contributes to the convent of a View</dd><dt><span class="term">Modeling Workbench</span></dt><dd>a modeling workbench offers all the required facilities for editing and animating domain specific models according to a given modeling language.</dd><dt><span class="term">MSA</span></dt><dd>Model-Specific Action.</dd><dt><span class="term">MSE</span></dt><dd>Model-Specific Event.</dd><dt><span class="term">RTD</span></dt><dd>RunTime Data.</dd><dt><span class="term">Static semantics</span></dt><dd>Constraints on a model that cannot be expressed in the metamodel.  For example, static semantics can be expressed as OCL invariants.</dd><dt><span class="term">xDSML</span></dt><dd>Executable Domain-Specific Modeling Language.</dd></dl></div></div><div class="index" title="Index"><div class="titlepage"><div><div><h2 class="title"><a name="_index"></a>Index</h2></div></div></div><div class="index"><div class="indexdiv"><h3>B</h3><dl><dt>Both representations (graphical or textual) can be used for edition of models, <a class="indexterm" href="#_presentation_of_the_moccml_editor">Presentation of the MoCCML Editor</a></dt></dl></div><div class="indexdiv"><h3>D</h3><dl><dt>Decider, <a class="indexterm" href="#_general_options">General options</a></dt></dl></div><div class="indexdiv"><h3>E</h3><dl><dt>ECL, <a class="indexterm" href="#_introduction_2">Introduction</a></dt><dt>EMF Tree Editor, <a class="indexterm" href="#section-modeling-workbench-editing-model-with-emf-tree-editor">Editing model with EMF Tree Editor</a></dt><dt>Engine, <a class="indexterm" href="#_run_mode">Run mode</a>, <a class="indexterm" href="#_debug_mode">Debug mode</a></dt><dt>Event Manager, <a class="indexterm" href="#_debug_mode">Debug mode</a></dt></dl></div><div class="indexdiv"><h3>F</h3><dl><dt>Feedback Policy, <a class="indexterm" href="#_creating_a_indexterm_primary_feedback_policy_primary_indexterm_feedback_policy">Creating a Feedback Policy</a></dt><dt>Feedback Specification, <a class="indexterm" href="#_defining_the_indexterm_primary_feedback_specification_primary_indexterm_feedback_specification">Defining the Feedback Specification</a></dt></dl></div><div class="indexdiv"><h3>G</h3><dl><dt>GEL, <a class="indexterm" href="#_purpose_5">Purpose</a></dt><dt>GEMOC Dashboard, <a class="indexterm" href="#_purpose">Purpose</a></dt><dt>GEMOC Language Workbench, <a class="indexterm" href="#_overview">Overview</a></dt></dl></div><div class="indexdiv"><h3>I</h3><dl><dt>import, <a class="indexterm" href="#_import_language">Import Language</a></dt></dl></div><div class="indexdiv"><h3>L</h3><dl><dt>Language Designer, <a class="indexterm" href="#_overview">Overview</a>, <a class="indexterm" href="#_purpose">Purpose</a></dt><dt>Language Integrator, <a class="indexterm" href="#_overview">Overview</a></dt><dt>Language Workbench, <a class="indexterm" href="#_overview">Overview</a></dt><dt>Logical Step, <a class="indexterm" href="#_general_options">General options</a>, <a class="indexterm" href="#modeling-workbench-executing-model-debug-view-section">Debug View</a></dt></dl></div><div class="indexdiv"><h3>M</h3><dl><dt>MoCCML, <a class="indexterm" href="#_introduction_2">Introduction</a></dt><dt>Modeling workbench, <a class="indexterm" href="#_modeling_workbench_overview">Modeling workbench overview</a></dt></dl></div><div class="indexdiv"><h3>R</h3><dl><dt>Runtime Data, <a class="indexterm" href="#_debug_mode">Debug mode</a>, <a class="indexterm" href="#modeling-workbench-executing-model-variable-view-section">Variable View</a></dt></dl></div><div class="indexdiv"><h3>S</h3><dl><dt>Sirius, <a class="indexterm" href="#defining-a-concrete-syntax-with-sirius-section">Defining a Concrete Syntax with Sirius</a>, <a class="indexterm" href="#defining-a-debug-representation-section">Defining a debug representation</a>, <a class="indexterm" href="#_the_debug_representation_wizard">The debug representation wizard</a>, <a class="indexterm" href="#_debug_layer">Debug layer</a>, <a class="indexterm" href="#modeling-workbench-editing-model-with-sirius-section">Editing model with Sirius</a></dt><dt>Sirius), <a class="indexterm" href="#modeling-workbench-editing-model-with-sirius-section">Editing model with Sirius</a></dt></dl></div><div class="indexdiv"><h3>T</h3><dl><dt>TFSM, <a class="indexterm" href="#_modeling_workbench_overview">Modeling workbench overview</a></dt><dd><dl><dt>Language Workbench, <a class="indexterm" href="#_overview">Overview</a></dt><dt>Modeling workbench, <a class="indexterm" href="#_modeling_workbench_overview">Modeling workbench overview</a></dt></dl></dd><dt>Timeline, <a class="indexterm" href="#_run_mode">Run mode</a>, <a class="indexterm" href="#_debug_mode">Debug mode</a></dt></dl></div></div></div></div></body></html>