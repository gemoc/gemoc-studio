<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <title>3.7.&nbsp;Define a MoCCML library</title><link rel="stylesheet" href="css/docbook.css" type="text/css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2"><link rel="home" href="Guide.html" title="GEMOC Studio Guide"><link rel="up" href="ch03.html" title="Chapter&nbsp;3.&nbsp;Tutorial: Make Marked Graph models executable with the GEMOC Studio"><link rel="prev" href="ch03s06.html" title="3.6.&nbsp;Animate a Model"><link rel="next" href="ch03s08.html" title="3.8.&nbsp;Use constraint automata to define the MoCC"><base xmlns:fo="http://www.w3.org/1999/XSL/Format" target="body"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">3.7.&nbsp;Define a MoCCML library</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch03s06.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;3.&nbsp;Tutorial: Make Marked Graph models executable with the GEMOC Studio</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="ch03s08.html">Next</a></td></tr></table><hr></div><div class="section" title="3.7.&nbsp;Define a MoCCML library"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_define_a_moccml_library"></a>3.7.&nbsp;Define a MoCCML library</h2></div></div></div><p>To improve readability of the ECL file and also to favor capitalization and
reuse of MoCC elements, it is possible (and encouraged) to define libraries.
Those libraries looks like the predefined ones that we have already used like
kernel.lib and CCSL.lib.</p><div class="section" title="3.7.1.&nbsp;Define a MoCCML library using CCSL"><div class="titlepage"><div><div><h3 class="title"><a name="_define_a_moccml_library_using_ccsl"></a>3.7.1.&nbsp;Define a MoCCML library using CCSL</h3></div></div></div><p>Using the GEMOC Studio, we start by defining a MoCCML project.  In the xDSML
view, we select <span class="emphasis"><em>Behavioral definition / MoCC definition library</em></span> to create
this new project.</p><p>We can then define in this project the following <a class="link" href="MarkedGraph/markedgraph.ccslLib" target="_top">markedgraph.ccslLib</a> file. TODO: To be corrected.</p><p title="The file markedgraph.ccslLib defining a MoCCML library"><b>The file markedgraph.ccslLib defining a MoCCML library.&nbsp;</b>
</p><pre class="screen">Unresolved directive in GuideTutorialMarkedGraph.asciidoc - include::MarkedGraph/markedgraph.ccslLib[Definition of a MoCCML library]</pre><p title="The file markedgraph.ccslLib defining a MoCCML library">
</p></div><div class="section" title="3.7.2.&nbsp;Using it in the ECL file"><div class="titlepage"><div><div><h3 class="title"><a name="_using_it_in_the_ecl_file"></a>3.7.2.&nbsp;Using it in the ECL file</h3></div></div></div><p>To use this new library, we only have to import it at the beginning of
the ECL file and the we can use it as kernel.lib and CCSL.lib
libraries.</p><p>Here is the new ECL file.</p><p title="The file markedgraph.ecl using the MoCCML library"><b>The file markedgraph.ecl using the MoCCML library.&nbsp;</b>
</p><pre class="screen">import 'platform:/resource/org.gemoc.sample.markedgraph.model/model/markedgraph.ecore'

ECLimport "platform:/plugin/fr.inria.aoste.timesquare.ccslkernel.model/ccsllibrary/kernel.ccslLib"
ECLimport "platform:/plugin/fr.inria.aoste.timesquare.ccslkernel.model/ccsllibrary/CCSL.ccslLib"
ECLimport "platform:/resource/org.gemoc.sample.markedgraph.mocc/mocc/markedgraph.moccml"

package markedgraph

	context MarkedGraph
		def: initIt: Event = self.initialize()

	context Transition
		def: fireIt: Event = self.fire()

	context Place
		inv placeReadAndWrite:
			let delay: Integer = self.tokenCount in
				Relation placeReadWrite(self.input.fireIt, self.input.fireIt, delay)

	context MarkedGraph
        inv initFirst:
                let firstInit : Event = Expression OneTickAndNoMore(self.initIt) in
                let allFire : Event = Expression Union(self.transitions.fireIt) in
                let firstOfAllFire : Event = Expression OneTickAndNoMore(allFire) in
                Relation Precedes(firstInit, firstOfAllFire)

        inv onlyOneInit:
                let firstInit2 : Event = Expression OneTickAndNoMore(self.initIt) in
                Relation Coincides(self.initIt, firstInit2)

endpackage</pre><p title="The file markedgraph.ecl using the MoCCML library">
</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch03s06.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch03.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="ch03s08.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">3.6.&nbsp;Animate a Model&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="Guide.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;3.8.&nbsp;Use constraint automata to define the MoCC</td></tr></table></div></body></html>