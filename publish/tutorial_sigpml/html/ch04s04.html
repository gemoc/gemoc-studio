<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <title>4.4.&nbsp;DSE definition</title><link rel="stylesheet" href="css/docbook.css" type="text/css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2"><link rel="home" href="Tutorial_SigPML.html" title="SigPML overview"><link rel="up" href="ch04.html" title="Chapter&nbsp;4.&nbsp;SigPML execution semantics"><link rel="prev" href="ch04s03.html" title="4.3.&nbsp;MoCCML definition"><link rel="next" href="ch04s05.html" title="4.5.&nbsp;Create an animator"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">4.4.&nbsp;DSE definition</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch04s03.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;4.&nbsp;SigPML execution semantics</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="ch04s05.html">Next</a></td></tr></table><hr></div><div class="section" title="4.4.&nbsp;DSE definition"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_dse_definition"></a>4.4.&nbsp;DSE definition</h2></div></div></div><p>The DSE definition is related to declare the Domain Specific Events which define the event interface of our language.</p><p>The two sections DSE and MoCC definitions are tightly coupled. So you can create the two projects and iterate between the two projects in progress.</p><div class="section" title="4.4.1.&nbsp;Creating the ECL project"><div class="titlepage"><div><div><h3 class="title"><a name="_creating_the_ecl_project"></a>4.4.1.&nbsp;Creating the ECL project</h3></div></div></div><p>From the xDSML project, we select the associated wizard of the DSE definition. Select the name of <span class="emphasis"><em>SigpmlTuto.melange</em></span> on the right click&#8594; Create DSE project for language &#8594;select the SigpmlTuto language&#8594;ok</p><p title="DSE project creation"><b>DSE project creation.&nbsp;</b><span class="inlinemediaobject"><img src="./SigPML/images/sigpml/createECLProject.png" alt="ECL project creation"></span></p><p>The DSE wizard helps to select the root model element, in our case the <span class="emphasis"><em>Application</em></span> and finish.</p><p title="DSE wizard"><b>DSE wizard.&nbsp;</b><span class="inlinemediaobject"><img src="./SigPML/images/sigpml/DSE-Wizard.png" alt="ECL wizard"></span></p></div><div class="section" title="4.4.2.&nbsp;Implementation of the ECL"><div class="titlepage"><div><div><h3 class="title"><a name="_implementation_of_the_ecl"></a>4.4.2.&nbsp;Implementation of the ECL</h3></div></div></div><p>An ECL program defines the mapping between the domain model, including ED and EF, and the MoCC definition of the previous section.
In this program, you declare the metaclasses that you want to select ED or EF, and associating them with a MoCC definition.</p><p>A metaclass is referenced as <span class="emphasis"><em>Context</em></span> and in this scope we define an event relative to the EF and also invariants that must be satisfied in the context of the metaclasse.</p><p>In this tutorial, two contexts are declared for the metaclasses <span class="emphasis"><em>Block</em></span> and <span class="emphasis"><em>Connector</em></span>.
In the context of <span class="emphasis"><em>Block</em></span> an event <span class="emphasis"><em>execute</em></span> is defined relative to the execution function of the same name in the <span class="emphasis"><em>Block</em></span> metaclass.
In the context of <span class="emphasis"><em>Connector</em></span>, an invariant is declared based on the call of the relation declaration defined previously in the MoCCML model. The arguments of this relation are associated to the attributes of the metaclasses <span class="emphasis"><em>Connector</em></span> and also we can access by navigation expression to the others <span class="emphasis"><em>Ports</em></span> (for the <span class="emphasis"><em>rate</em></span> attribute) and <span class="emphasis"><em>Block</em></span> (for the <span class="emphasis"><em>execute</em></span> EF).</p><p>The source code is available through
<a class="link" href="SigPML/files/xSigpml.ecl" target="_top">the ECL program</a>
and showed below</p><pre class="programlisting"><b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">import</b> 'platform:/resource/org.gemoc.sigpmldomain/model/sigpmldomain.ecore'
--<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">import</b> './sigpmldomain.ecore'

<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">ECLimport</b> <i xmlns:fo="http://www.w3.org/1999/XSL/Format" style="color:blue" class="hl-string">"platform:/resource/org.gemoc.SigpmlTuto.mocc/mocc/SigpmlTuto.moccml"</i>
--<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">ECLimport</b> <i xmlns:fo="http://www.w3.org/1999/XSL/Format" style="color:blue" class="hl-string">"./xSigpml.moccml"</i>
<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">ECLimport</b> <i xmlns:fo="http://www.w3.org/1999/XSL/Format" style="color:blue" class="hl-string">"platform:/plugin/fr.inria.aoste.timesquare.ccslkernel.model/ccsllibrary/kernel.ccslLib"</i>
<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">ECLimport</b> <i xmlns:fo="http://www.w3.org/1999/XSL/Format" style="color:blue" class="hl-string">"platform:/plugin/fr.inria.aoste.timesquare.ccslkernel.model/ccsllibrary/CCSL.ccslLib"</i>



<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">package</b> sigpml

	<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">context</b> Block
		<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b> : execute : <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">Event</b> = <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">self</b>.execute()

	<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">context</b> Connector
		<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">inv</b> ConnectorComputing:
			<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">let</b> capacity : <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">Integer</b> = <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">self</b>.oclAsType(Connector).capacity <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">in</b>
		 	<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">let</b> inRate : <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">Integer</b> = <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">self</b>.itsInputPort.oclAsType(Port).rate <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">in</b>
		 	<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">let</b> outRate : <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">Integer</b> = <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">self</b>.itsOutputPort.oclAsType(Port).rate <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">in</b>
		 	<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">let</b> currentSize : <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">Integer</b> = <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">self</b>.oclAsType(Connector).currentSize <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">in</b>

		 <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">Relation</b> ConnectorSDF_PAM (
				<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">self</b>.itsOutputPort.oclAsType(OutputPort).owner.oclAsType(Block).execute,
				<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">self</b>.itsInputPort.oclAsType(InputPort).owner.oclAsType(Block).execute,
				capacity,
				inRate,
				outRate,
				currentSize
			)


<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">endpackage</b></pre><p title="ECL Implemenattion"><b>ECL Implemenattion.&nbsp;</b><span class="inlinemediaobject"><img src="./SigPML/images/sigpml/ECL_Implementation.png" alt="ECL Implementation"></span></p><p>At the end of this step the SigPML language is completely in terms of the metamodel, the graphical syntax, the behavior code of the functions, the expression of the concurrent semantics and the mapping between them.</p><p>The last step is to define the animation view of the models as a debug extension of the graphical syntax.</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch04s03.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch04.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="ch04s05.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">4.3.&nbsp;MoCCML definition&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="Tutorial_SigPML.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;4.5.&nbsp;Create an animator</td></tr></table></div></body></html>