<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <title>4.3.&nbsp;DSE definition</title><link rel="stylesheet" href="css/docbook.css" type="text/css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2"><link rel="home" href="Tutorial_SigPML.html" title="SigPML overview"><link rel="up" href="ch04.html" title="Chapter&nbsp;4.&nbsp;SigPML execution semantics"><link rel="prev" href="ch04s02.html" title="4.2.&nbsp;DSA definition"><link rel="next" href="ch04s04.html" title="4.4.&nbsp;MoCCML definition"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">4.3.&nbsp;DSE definition</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch04s02.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;4.&nbsp;SigPML execution semantics</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="ch04s04.html">Next</a></td></tr></table><hr></div><div class="section" title="4.3.&nbsp;DSE definition"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_dse_definition"></a>4.3.&nbsp;DSE definition</h2></div></div></div><p>The DSE definition is related to declare the Domain Specific Events which define the event interface of our language.</p><p>The two next sections ECL and MoCC definitions are tightly coupled. So you can create the two projects and iterate between the two projects in progress.</p><div class="section" title="4.3.1.&nbsp;Creating the ECL project"><div class="titlepage"><div><div><h3 class="title"><a name="_creating_the_ecl_project"></a>4.3.1.&nbsp;Creating the ECL project</h3></div></div></div><p>From the xDSML project, we select the associated wizard of the DSE definition that helps to create an ECL project (Event Constraint Language). After you give a name on your project&#8594;next&#8594;(you must have a reference on your Ecore domain file)&#8594;finish</p><p title="ECL project creation"><b>ECL project creation.&nbsp;</b><span class="inlinemediaobject"><img src="./SigPML/images/sigpml/createECLProject.png" alt="ECL project creation"></span></p></div><div class="section" title="4.3.2.&nbsp;Implementation of the ECL"><div class="titlepage"><div><div><h3 class="title"><a name="_implementation_of_the_ecl"></a>4.3.2.&nbsp;Implementation of the ECL</h3></div></div></div><p>An ECL program defines the mapping between the domain model, including ED and EF, and the MoCC definition of the next section.
In this program, you declare the metaclasses that you want to select ED or EF, and associating them with a MoCC definition.</p><p>A metaclass is referenced as <span class="emphasis"><em>Context</em></span> and in this scope we define an event relative to the EF and also invariants that must be satisfied in the context of the metaclasse.</p><p>In this tutorial, two contexts are declared for the metaclasses <span class="emphasis"><em>Block</em></span> and <span class="emphasis"><em>Connector</em></span>.
In the context of <span class="emphasis"><em>Block</em></span> an event <span class="emphasis"><em>execute</em></span> is defined relative to the execution function of the same name in the <span class="emphasis"><em>Block</em></span> metaclasse.
In the context of <span class="emphasis"><em>Connector</em></span>, an invariant is declared based on the call of a relation declaration. The arguments of this relation are associated to the attributes of the metaclasses <span class="emphasis"><em>Connector</em></span> and also we can access by navigation expression to the others <span class="emphasis"><em>Ports</em></span> (for the <span class="emphasis"><em>rate</em></span> attribute) and <span class="emphasis"><em>Block</em></span> (for the execute EF).</p><p>This relation is defined in the MoCCML program of the next section.</p><p>The source code is available through
<a class="link" href="SigPML/files/xSigpml.ecl" target="_top">the ECL program</a>
and showed below</p><pre class="screen">import 'platform:/resource/org.gemoc.sigpmldomain/model/sigpmldomain.ecore'
--import './sigpmldomain.ecore'

ECLimport "platform:/resource/org.gemoc.sample.xSigpml.mocc/mocc/xSigpml.moccml"
--ECLimport "./xSigpml.moccml"
ECLimport "platform:/plugin/fr.inria.aoste.timesquare.ccslkernel.model/ccsllibrary/kernel.ccslLib"
ECLimport "platform:/plugin/fr.inria.aoste.timesquare.ccslkernel.model/ccsllibrary/CCSL.ccslLib"


package sigpml

	context Block
		def : execute : Event = self.execute()


	context Connector
		inv ConnectorComputing:
			let capacity : Integer = self.oclAsType(Connector).capacity in
		 	let inRate : Integer = self.itsInputPort.oclAsType(Port).rate in
		 	let outRate : Integer = self.itsOutputPort.oclAsType(Port).rate in
		 	let currentSize : Integer = self.oclAsType(Connector).currentSize in

		 Relation ConnectorSDF_PAM (
				self.itsOutputPort.oclAsType(OutputPort).owner.oclAsType(Block).execute,
				self.itsInputPort.oclAsType(InputPort).owner.oclAsType(Block).execute,
				capacity,
				inRate,
				outRate,
				currentSize
			)


endpackage</pre></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch04s02.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch04.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="ch04s04.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">4.2.&nbsp;DSA definition&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="Tutorial_SigPML.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;4.4.&nbsp;MoCCML definition</td></tr></table></div></body></html>