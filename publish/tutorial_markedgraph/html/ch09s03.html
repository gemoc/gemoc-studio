<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <title>9.3.&nbsp;Use constraint automata to define Relation</title><link rel="stylesheet" href="css/docbook.css" type="text/css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2"><link rel="home" href="GuideTutorialMarkedGraph.html" title="Tutorial"><link rel="up" href="ch09.html" title="Chapter&nbsp;9.&nbsp;Going further&#8230;&#8203;"><link rel="prev" href="ch09s02.html" title="9.2.&nbsp;Using it in the ECL file"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">9.3.&nbsp;Use constraint automata to define Relation</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch09s02.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;9.&nbsp;Going further&#8230;&#8203;</th><td width="20%" align="right">&nbsp;</td></tr></table><hr></div><div class="section" title="9.3.&nbsp;Use constraint automata to define Relation"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_use_constraint_automata_to_define_relation"></a>9.3.&nbsp;Use constraint automata to define Relation</h2></div></div></div><p>Sometimes, it may be easier to define the MoCC using automata.  For
example, we can see a place as something on which we can read a token
(ont output transition reads one token) or we can write a token (one
input transition writes one token).  A token can only be read if there
is at least one in the place.  Initially, there is as much token in
the place as in the initial token count of the place.</p><div class="section" title="9.3.1.&nbsp;Define the constraint automaton using MoCCML editor"><div class="titlepage"><div><div><h3 class="title"><a name="_define_the_constraint_automaton_using_moccml_editor"></a>9.3.1.&nbsp;Define the constraint automaton using MoCCML editor</h3></div></div></div><p>For explanations on how to use the MoCCML editor, please refer to the GEMOC
manual.</p><p>We first define the declaration of a relation (placeReadWrite).  Here after
is its graphical representation.  This relation is parameterized by the r clock (some one how wants to read a token), the w clock (someone how wants to write a token, and n the initial count of token in the place).</p><div class="figure"><a name="d0e1125"></a><div class="figure-contents"><div class="mediaobject"><img src="./MarkedGraph/images/MoCCML-diagram.png" alt="Graphical definition of a relation"></div></div><p class="title"><b>Figure&nbsp;9.1.&nbsp;Graphical declaration of the placeReadWriteDef relation</b></p></div><br class="figure-break"><p>Then we can define this relation. Here after is the resulting automaton. The
local variable count represent the number of tokens in this place.  s0 is the
initial state. The action on the transition from s0 to s initialize count with
n (the parameter).  The two reflexive transitions on s explain what happens
when w or r occurs.  The write transition is fired when w occurs and  a token is assed in the place (count is incremented). The read transition is fired when r occurs.  It removes a token and thus decrements count.
A guard prevents the read transition to be fired if there is not at liste one token in the place (count &gt;= one).</p><div class="figure"><a name="d0e1136"></a><div class="figure-contents"><div class="mediaobject"><img src="./MarkedGraph/images/MoCCML-automata.png" alt="Automaton defining the placeReadWriteDef relation"></div></div><p class="title"><b>Figure&nbsp;9.2.&nbsp;Automaton defining the placeReadWriteDef relation.</b></p></div><br class="figure-break"><p>Here is the textual representation of this constraint automata.</p><p title="Textual representation of the constraint automata."><b>Textual representation of the constraint automata.&nbsp;</b>
</p><pre class="screen">AutomataConstraintLibrary markedgraph{
	import "platform:/plugin/fr.inria.aoste.timesquare.ccslkernel.model/ccsllibrary/kernel.ccslLib" as kernel;
	import "platform:/plugin/fr.inria.aoste.timesquare.ccslkernel.model/ccsllibrary/CCSL.ccslLib" as ccsl;

	RelationLibrary placeLib {

		AutomataRelationDefinition placeReadWriteDef[placeReadWrite]{

			variables {
				Integer MAX = 10
				Integer count = 0

			}

			init: s0

			from s0 to s : init
			-&gt; (do count = n.value)

			from s to s : read
			-&gt; ( when r if( count &gt;= one) do count = (count - one))

			from s to s : write
			-&gt; ( when w do count = (count + one))

			State s0 (out : init)
			State s( in : read, write, init
				out : write, read
			)

		}

		RelationDeclaration placeReadWrite(r:clock, w: clock, n: int)
	}
}</pre><p title="Textual representation of the constraint automata.">
</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch09s02.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch09.html">Up</a></td><td width="40%" align="right">&nbsp;</td></tr><tr><td width="40%" align="left" valign="top">9.2.&nbsp;Using it in the ECL file&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="GuideTutorialMarkedGraph.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;</td></tr></table></div></body></html>