<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>GEMOC Studio Guide</title><link rel="stylesheet" href="css/docbook.css" type="text/css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="en" class="book" title="GEMOC Studio Guide"><div class="titlepage"><div><div><h1 class="title"><a name="d0e3"></a>GEMOC Studio Guide</h1></div><div><div class="author"><h3 class="author"><span class="firstname">Collective work __ENSEEIHT, ENSTA, I3S, Inria, IRIT, Obeo, Thales, ...__</span></h3></div></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="preface"><a href="#_introduction">Introduction</a></span></dt><dd><dl><dt><span class="section"><a href="#_language_workbench_overview_inlinemediaobject_imageobject_imagedata_fileref_images_icons_iconegemoclanguage_16_png_contentwidth_16_contentdepth_16_imageobject_textobject_phrase_iconegemoclanguage_16_phrase_textobject_inlinemediaobject">1. Language Workbench overview <span class="inlinemediaobject"><img src="./images/icons/IconeGemocLanguage_16.png" width="16" height="16" alt="IconeGemocLanguage_16"></span></a></span></dt><dt><span class="section"><a href="#_modeling_workbench_overview_inlinemediaobject_imageobject_imagedata_fileref_images_icons_iconegemocmodel_16_png_contentwidth_16_contentdepth_16_imageobject_textobject_phrase_iconegemocmodel_16_phrase_textobject_inlinemediaobject">2. Modeling workbench overview <span class="inlinemediaobject"><img src="./images/icons/IconeGemocModel_16.png" width="16" height="16" alt="IconeGemocModel_16"></span></a></span></dt><dt><span class="section"><a href="#_general_concerns_and_prerequisite">3. General concerns and prerequisite</a></span></dt></dl></dd><dt><span class="chapter"><a href="#gemoc-language-workbench">1. GEMOC Language Workbench <span class="inlinemediaobject"><img src="./images/icons/IconeGemocLanguage_16.png" width="16" height="16" alt="IconeGemocLanguage_16"></span></a></span></dt><dd><dl><dt><span class="section"><a href="#_overview">1.1. Overview</a></span></dt><dt><span class="section"><a href="#section-gemoc-language-project">1.2. xDSML Project</a></span></dt><dd><dl><dt><span class="section"><a href="#_purpose">1.2.1. Purpose</a></span></dt><dt><span class="section"><a href="#_creating_the_xdsml_project">1.2.2. Creating the xDSML Project</a></span></dt><dt><span class="section"><a href="#_editing_the_xdsml_project">1.2.3. Editing the xDSML Project</a></span></dt></dl></dd><dt><span class="section"><a href="#section-define-AS-project">1.3. Domain Model Project</a></span></dt><dd><dl><dt><span class="section"><a href="#_purpose_2">1.3.1. Purpose</a></span></dt><dt><span class="section"><a href="#_creating_the_domain_model_project">1.3.2. Creating the Domain Model Project</a></span></dt><dt><span class="section"><a href="#_editing_the_domain_model_project">1.3.3. Editing the Domain Model Project</a></span></dt></dl></dd><dt><span class="section"><a href="#section-define-dsa-project">1.4. Defining the Domain-Specific Actions (DSA) Project</a></span></dt><dd><dl><dt><span class="section"><a href="#_purpose_3">1.4.1. Purpose</a></span></dt><dt><span class="section"><a href="#_creating_the_dsa_project">1.4.2. Creating the DSA Project</a></span></dt><dt><span class="section"><a href="#_editing_the_dsa_project">1.4.3. Editing the DSA Project</a></span></dt><dt><span class="section"><a href="#_testing_the_domain_specific_actions">1.4.4. Testing the Domain-Specific Actions</a></span></dt></dl></dd><dt><span class="section"><a href="#_defining_domain_specific_constraints">1.5. Defining Domain-Specific Constraints</a></span></dt><dt><span class="section"><a href="#defining-a-concrete-syntax-section">1.6. Defining a Concrete Syntax</a></span></dt><dd><dl><dt><span class="section"><a href="#defining-a-concrete-syntax-with-xtext-section">1.6.1. Defining a Concrete Syntax with Xtext</a></span></dt><dt><span class="section"><a href="#defining-a-concrete-syntax-with-sirius-section">1.6.2. Defining a Concrete Syntax with Sirius</a></span></dt></dl></dd><dt><span class="section"><a href="#section-defining-a-mocc">1.7. Defining a Model of Concurrency and Communication (MoCC)</a></span></dt><dd><dl><dt><span class="section"><a href="#_introduction_2">1.7.1. Introduction</a></span></dt><dt><span class="section"><a href="#_the_ecl_approach_to_identify_dse_and_constraints">1.7.2. The ECL approach to Identify DSE and constraints</a></span></dt><dt><span class="section"><a href="#_the_moccml_approach_to_define_constraints">1.7.3. The MoCCML approach to define constraints</a></span></dt></dl></dd><dt><span class="section"><a href="#_defining_the_domain_specific_events_dse">1.8. Defining the Domain-Specific Events (DSE)</a></span></dt><dd><dl><dt><span class="section"><a href="#_purpose_4">1.8.1. Purpose</a></span></dt><dt><span class="section"><a href="#_creating_the_dse_project">1.8.2. Creating the DSE Project</a></span></dt><dt><span class="section"><a href="#_editing_the_dse_project">1.8.3. Editing the DSE Project</a></span></dt></dl></dd><dt><span class="section"><a href="#_defining_the_indexterm_primary_feedback_specification_primary_indexterm_feedback_specification">1.9. Defining the Feedback Specification</a></span></dt><dd><dl><dt><span class="section"><a href="#_purpose_5">1.9.1. Purpose</a></span></dt><dt><span class="section"><a href="#_creating_a_indexterm_primary_feedback_policy_primary_indexterm_feedback_policy">1.9.2. Creating a Feedback Policy</a></span></dt><dt><span class="section"><a href="#_semantics_of_the_feedback_policy">1.9.3. Semantics of the Feedback Policy</a></span></dt></dl></dd><dt><span class="section"><a href="#defining-a-debug-representation-section">1.10. Defining a debug representation</a></span></dt><dd><dl><dt><span class="section"><a href="#_the_debug_representation_wizard">1.10.1. The debug representation wizard</a></span></dt><dt><span class="section"><a href="#_implementation_details">1.10.2. Implementation details</a></span></dt></dl></dd><dt><span class="section"><a href="#language-workbench-dashboard-section">1.11. Language workbench dashboard</a></span></dt><dd><dl><dt><span class="section"><a href="#_open_the_dashboard">1.11.1. Open the dashboard</a></span></dt><dt><span class="section"><a href="#_overview_2">1.11.2. Overview</a></span></dt><dt><span class="section"><a href="#_sections">1.11.3. Sections</a></span></dt><dt><span class="section"><a href="#_projects_view">1.11.4. Projects view</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#chapter-gemoc-modeling-workbench">2. Gemoc Modeling workbench</a></span></dt><dd><dl><dt><span class="section"><a href="#_modeling_workbench_overview">2.1. Modeling workbench overview</a></span></dt><dt><span class="section"><a href="#section-editing-model">2.2. Editing model</a></span></dt><dd><dl><dt><span class="section"><a href="#modeling-workbench-editing-model-with-sirius-section">2.2.1. Editing model with Sirius</a></span></dt><dt><span class="section"><a href="#section-modeling-workbench-editing-model-with-emf-tree-editor">2.2.2. Editing model with EMF Tree Editor</a></span></dt></dl></dd><dt><span class="section"><a href="#modeling-workbench-executing-model-section">2.3. Executing model</a></span></dt><dd><dl><dt><span class="section"><a href="#_launch_configuration">2.3.1. Launch configuration</a></span></dt><dt><span class="section"><a href="#modeling-workbench-executing-model-engine-view-section">2.3.2. Engine View</a></span></dt><dt><span class="section"><a href="#modeling-workbench-executing-model-logical-step-view-section">2.3.3. Logical Steps View</a></span></dt><dt><span class="section"><a href="#modeling-workbench-executing-model-timeline-view-section">2.3.4. Timeline View</a></span></dt><dt><span class="section"><a href="#modeling-workbench-executing-model-event-manager-view-section">2.3.5. Event Manager View</a></span></dt><dt><span class="section"><a href="#modeling-workbench-executing-model-animation-view-section">2.3.6. Animation View</a></span></dt><dt><span class="section"><a href="#modeling-workbench-executing-model-debug-view-section">2.3.7. Debug View</a></span></dt><dt><span class="section"><a href="#modeling-workbench-executing-model-variable-view-section">2.3.8. Variable View</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#_gemoc_xdsml_definition_tutorial_with_automaton_dsml">3. GEMOC xDSML definition tutorial with Automaton DSML</a></span></dt><dd><dl><dt><span class="section"><a href="#_introduction_3">3.1. Introduction</a></span></dt><dt><span class="section"><a href="#sec-GEMOC-approach">3.2. The GEMOC Approach for defining eXecutable DSML (xDSML)</a></span></dt><dd><dl><dt><span class="section"><a href="#sec-GEMOC-architecture">3.2.1. Architecture of a GEMOC xDSML</a></span></dt><dt><span class="section"><a href="#sec-GEMOC-characteristics">3.2.2. Main Characteristics of the GEMOC Process.</a></span></dt><dt><span class="section"><a href="#sec-GEMOC-process">3.2.3. Recommanded GEMOC Process</a></span></dt></dl></dd><dt><span class="section"><a href="#sec-requirements">3.3. Definition of the requirements/expectations on the xDSML</a></span></dt><dd><dl><dt><span class="section"><a href="#automata-domain">3.3.1. Application Domain: Automata</a></span></dt><dt><span class="section"><a href="#_description_of_automata">3.3.2. Description of automata</a></span></dt><dt><span class="section"><a href="#_informal_behavior">3.3.3. Informal behavior</a></span></dt><dt><span class="section"><a href="#_scenarios">3.3.4. Scenarios</a></span></dt><dt><span class="section"><a href="#_examples_of_models">3.3.5. Examples of models</a></span></dt></dl></dd><dt><span class="section"><a href="#_creating_an_xdsml_project">3.4. Creating an xDSML Project</a></span></dt><dt><span class="section"><a href="#sec-increment1">3.5. Increment 1 : Deterministic Automata</a></span></dt><dd><dl><dt><span class="section"><a href="#_specification_of_the_xdsml_interface">3.5.1. Specification of the xDSML interface</a></span></dt><dt><span class="section"><a href="#_define_the_abstract_syntax_as">3.5.2. Define the Abstract Syntax (AS)</a></span></dt><dt><span class="section"><a href="#_define_concrete_syntaxes_cs">3.5.3. Define concrete syntaxes (CS)</a></span></dt><dt><span class="section"><a href="#_identifying_dse">3.5.4. Identifying DSE</a></span></dt><dt><span class="section"><a href="#_defining_domain_specific_actions_dsa">3.5.5. Defining Domain-Specific Actions (DSA)</a></span></dt><dt><span class="section"><a href="#_model_of_concurrency_and_communication_mocc">3.5.6. Model of Concurrency and Communication (MoCC)</a></span></dt><dt><span class="section"><a href="#_using_the_modeling_workbench">3.5.7. Using the Modeling Workbench</a></span></dt></dl></dd><dt><span class="section"><a href="#sec-increment2">3.6. Increment 2: new MoCC and DSA for Automata (using State Machines of MoCCML)</a></span></dt><dt><span class="section"><a href="#sec-increment3">3.7. Increment 3: new MoCC and DSA for Automata (MoCC focused version)</a></span></dt><dt><span class="section"><a href="#sec-visualization">3.8. Increment 4: Graphical visualization</a></span></dt><dt><span class="section"><a href="#sec-nondeterministic">3.9. Increment 5: Consider nondeterministic automata.</a></span></dt><dt><span class="section"><a href="#sec-pushdown">3.10. Increment 6: Pushdown automaton</a></span></dt><dt><span class="section"><a href="#sec-userCode">3.11. Increment 7: Call of user actions</a></span></dt><dt><span class="section"><a href="#sec-otherIncrements">3.12. Increment: TBD</a></span></dt><dt><span class="section"><a href="#_todo">3.13. TODO</a></span></dt></dl></dd><dt><span class="bibliography"><a href="#_bibliography">Bibliography</a></span></dt><dt><span class="glossary"><a href="#_glossary">Glossary</a></span></dt><dt><span class="index"><a href="#_index">Index</a></span></dt></dl></div><div class="list-of-figures"><p><b>List of Figures</b></p><dl><dt>1. <a href="#img-GemocWorkbenchesGlobalPicture">Gemoc Workbenches Global Picture</a></dt><dt>1.1. <a href="#figure-glw-screenshot-of-language_workbench">Screenshot of the GEMOC Language Workbench showing the design of a Timed Finite State Machine (TFSM) example.</a></dt><dt>1.2. <a href="#figure-glw-screenshot-of-moccmlLevelFirst">Screenshot of the First graphical level of Edition in MoCCML.</a></dt><dt>1.3. <a href="#figure-glw-screenshot-of-moccmlLevelSecond">Screenshot of the Second graphical level of Edition in MoCCML (Constraint Implementation).</a></dt><dt>2.1. <a href="#figure-glw-screenshot-of-modeling_workbench">Screenshot of GEMOC Studio Modeling Workbench on the TFSM example (execution and animation).</a></dt><dt>3.1. <a href="#GEMOC-process-overview">Overview of the GEMOC process</a></dt><dt>3.2. <a href="#GEMOC-process">Recommended GEMOC Process</a></dt><dt>3.3. <a href="#automata-aSbaS">Automata which reads a*ba*</a></dt><dt>3.4. <a href="#automata-abcdS">Automata which reads (ABCD)*</a></dt><dt>3.5. <a href="#automata-mots">Automata which reads words</a></dt><dt>3.6. <a href="#automata-ccomm">Automata which reads C commentary</a></dt><dt>3.7. <a href="#fig-automata-classDiagram">Automata Metamodel</a></dt></dl></div><div class="preface" title="Introduction"><div class="titlepage"><div><div><h2 class="title"><a name="_introduction"></a>Introduction</h2></div></div></div><p>The GEMOC Studio offers 2 main usages:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Building and composing new executable DSML. This mode is intended to be used by language designers and language integragtors (aka domain experts).</li><li class="listitem">Creating and executing models conformant to executable DSMLs. This mode is intended to be used by domain designers.</li></ul></div><p>Each of these usage has it own set of tools that are referenced as <span class="strong"><strong>Gemoc Language workbench</strong></span> for the tools for <span class="emphasis"><em>language designers</em></span> and <span class="strong"><strong>Gemoc Modeling Workbench</strong></span> for the tools for <span class="emphasis"><em>domain designers</em></span>.</p><div class="figure"><a name="img-GemocWorkbenchesGlobalPicture"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/intro/GemocWorkbenchesGlobalPicture.png" width="800" alt="Sunset"></div></div><p class="title"><b>Figure&nbsp;1.&nbsp;Gemoc Workbenches Global Picture</b></p></div><br class="figure-break"><p>In this document:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">items or roles relative to the Language Workbench are identified with the following icon : <span class="inlinemediaobject"><img src="./images/icons/IconeGemocLanguage_32.png" width="48" height="48" alt="IconeGemocLanguage_32"></span></li><li class="listitem">items or roles relative to the Modeling Workbench are identified with the following icon : <span class="inlinemediaobject"><img src="./images/icons/IconeGemocModel_32.png" width="48" height="48" alt="IconeGemocModel_32"></span></li></ul></div><div class="section" title="1.&nbsp;Language Workbench overview"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_language_workbench_overview_inlinemediaobject_imageobject_imagedata_fileref_images_icons_iconegemoclanguage_16_png_contentwidth_16_contentdepth_16_imageobject_textobject_phrase_iconegemoclanguage_16_phrase_textobject_inlinemediaobject"></a>1.&nbsp;Language Workbench overview <span class="inlinemediaobject"><img src="./images/icons/IconeGemocLanguage_16.png" width="16" height="16" alt="IconeGemocLanguage_16"></span></h2></div></div></div><p>The GEMOC Language Workbench allows building and composing new executable DSMLs.</p><p>To acheive that, it offers appropriate tools and guidance for the underlying activities wich are grouped in categories.</p><p title="Build executable language"><b>Build executable language.&nbsp;</b>The first main activity is to build an executable language. The language designer is assited by a dedicated Dashboard to guide him during his work.</p><p>This first dashboard groups the activities as follow:</p><div class="variablelist"><dl><dt><span class="term">Create a language</span></dt><dd><p class="simpara">This activity can be decomposed in activities in two groups :</p><div class="variablelist"><dl><dt><span class="term">Domain model (abstract syntax)</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Create the abstract syntax with EMF (incl., the ecore model and the genmodel)</li></ul></div></dd><dt><span class="term"><a class="link" href="#defining-a-concrete-syntax-section" title="1.6.&nbsp;Defining a Concrete Syntax">Model editors (concrete syntax)</a></span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><a class="link" href="#defining-a-concrete-syntax-with-sirius-section" title="1.6.2.&nbsp;Defining a Concrete Syntax with Sirius">Create a graphical editor with Sirius Designer</a></li><li class="listitem">Create a textual editor with Xtext</li></ul></div></dd></dl></div></dd><dt><span class="term">Make your language executable</span></dt><dd><p class="simpara">This activity is decomposed in 2 main parts:</p><div class="variablelist"><dl><dt><span class="term">Sequential Execution semantics</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Create the execution semantics with Kermeta and Melange</li></ul></div></dd><dt><span class="term">Concurrent Execution semantics</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Create the Domain-Specific Actions with Kermeta and Melange</li><li class="listitem">Create the Domain-Specific Events with ECL</li><li class="listitem">Create a library of Model of Computation with MoccML</li></ul></div></dd></dl></div></dd><dt><span class="term">Define the runtime environnement for the language</span></dt><dd><div class="variablelist"><dl><dt><span class="term">Model Debugger</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Select your breakpointable elements</li></ul></div></dd><dt><span class="term">Model dynamic representation (for debugging, animation, monitoring)</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Create the graphical representation with Sirius Animator</li><li class="listitem">Plug your own add-ons</li></ul></div></dd></dl></div></dd></dl></div><p>TODO add links to the corresponding sections in the main chapters</p><p>TODO: add snapshot of the dashboard</p><p title="Compose executable languages"><b>Compose executable languages.&nbsp;</b>The second main activity is to define the composition between executable languages.
The language integrator is also assisted by a dedicated dashboard that proposes the following activity groups:</p><div class="variablelist"><dl><dt><span class="term">Compose languages</span></dt><dd><p class="simpara">This activity can be decomposed in activities in two groups :</p><div class="variablelist"><dl><dt><span class="term">Create composition operators</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Create operators with BCOoL</li></ul></div></dd></dl></div></dd><dt><span class="term">Combine languages</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Select a set of language to combine</li><li class="listitem">Apply composition operators to a set of languages.</li><li class="listitem">Customize composition</li></ul></div></dd></dl></div><p>TODO: add snapshot of the dashboard</p></div><div class="section" title="2.&nbsp;Modeling workbench overview"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_modeling_workbench_overview_inlinemediaobject_imageobject_imagedata_fileref_images_icons_iconegemocmodel_16_png_contentwidth_16_contentdepth_16_imageobject_textobject_phrase_iconegemocmodel_16_phrase_textobject_inlinemediaobject"></a>2.&nbsp;Modeling workbench overview <span class="inlinemediaobject"><img src="./images/icons/IconeGemocModel_16.png" width="16" height="16" alt="IconeGemocModel_16"></span></h2></div></div></div><p>The GEMOC Modeling Workbench allows the use of available languages to create and execute models.</p><div class="variablelist"><dl><dt><span class="term">Create Models</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Use available editors to create domain models.</li></ul></div></dd><dt><span class="term">Execute and debug models</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Use execution engine</li><li class="listitem">Use step by step debugger</li><li class="listitem">Analyse time trace</li></ul></div></dd><dt><span class="term">Animate models</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Use animation views</li></ul></div></dd></dl></div></div><div class="section" title="3.&nbsp;General concerns and prerequisite"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_general_concerns_and_prerequisite"></a>3.&nbsp;General concerns and prerequisite</h2></div></div></div><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p xmlns="">In order to run, Eclipse workbench work better with additional memory. Use the following setting to start Eclipse: -Xms1024m -Xmx1024m -XX:PermSize=512m -XX:MaxPermSize=512m</p></div></div></div><div class="chapter" title="Chapter&nbsp;1.&nbsp;GEMOC Language Workbench"><div class="titlepage"><div><div><h2 class="title"><a name="gemoc-language-workbench"></a>Chapter&nbsp;1.&nbsp;GEMOC Language Workbench <span class="inlinemediaobject"><img src="./images/icons/IconeGemocLanguage_16.png" width="16" height="16" alt="IconeGemocLanguage_16"></span></h2></div></div></div><div class="section" title="1.1.&nbsp;Overview"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_overview"></a>1.1.&nbsp;Overview</h2></div></div></div><p>The <span class="strong"><strong><a class="indexterm" name="d0e281"></a>GEMOC Language Workbench</strong></span> is intended to be used by the <a class="indexterm" name="d0e286"></a>Language Designers and the <a class="indexterm" name="d0e290"></a>Language Integrators. It provides the tools to create and compose eXecutable Domain-Specific Modeling Languages (xDSMLs) using the GEMOC approach.</p><div class="figure"><a name="figure-glw-screenshot-of-language_workbench"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/gemoc_language_workbench_TFSM_screenshot.png" width="800" alt="Screenshot of the GEMOC Language Workbench"></div></div><p class="title"><b>Figure&nbsp;1.1.&nbsp;Screenshot of the GEMOC Language Workbench showing the design of a Timed Finite State Machine (TFSM) example.</b></p></div><br class="figure-break"><p><a class="indexterm" name="d0e304"></a>
<a class="indexterm" name="d0e310"></a></p><p></p></div><div class="section" title="1.2.&nbsp;xDSML Project"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="section-gemoc-language-project"></a>1.2.&nbsp;xDSML Project</h2></div></div></div><div class="section" title="1.2.1.&nbsp;Purpose"><div class="titlepage"><div><div><h3 class="title"><a name="_purpose"></a>1.2.1.&nbsp;Purpose</h3></div></div></div><p>The xDSML Project is the core project of languages created using the GEMOC Studio. It has two main purposes:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Referencing the different projects implementing the various parts constituting an xDSML;</li><li class="listitem">Guiding the <a class="indexterm" name="d0e330"></a>Language Designer in the language creation process through the <a class="indexterm" name="d0e334"></a>GEMOC Dashboard illustrating the workflow of creating an xDSML using the GEMOC Studio.</li></ul></div></div><div class="section" title="1.2.2.&nbsp;Creating the xDSML Project"><div class="titlepage"><div><div><h3 class="title"><a name="_creating_the_xdsml_project"></a>1.2.2.&nbsp;Creating the xDSML Project</h3></div></div></div><p>In the GEMOC Studio, go to: <span class="emphasis"><em>File &gt; New &gt; Project&#8230;&#8203; &gt; New GEMOC Language Project</em></span>. This will create a new xDSML Project in your workspace.</p></div><div class="section" title="1.2.3.&nbsp;Editing the xDSML Project"><div class="titlepage"><div><div><h3 class="title"><a name="_editing_the_xdsml_project"></a>1.2.3.&nbsp;Editing the xDSML Project</h3></div></div></div><p>The main file constituting the xDSML Project is the <span class="emphasis"><em>project.xdsml</em></span>. To edit this file, open it with the <span class="emphasis"><em>XDSML Model Editor</em></span>.</p><p>From the information contained in this file, the project generates additional code that is used by the Execution Engine during the execution of models conforming to the xDSML (see <a class="xref" href="#chapter-gemoc-modeling-workbench" title="Chapter&nbsp;2.&nbsp;Gemoc Modeling workbench">Chapter&nbsp;2, <i>Gemoc Modeling workbench</i></a>).</p></div></div><div class="section" title="1.3.&nbsp;Domain Model Project"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="section-define-AS-project"></a>1.3.&nbsp;Domain Model Project</h2></div></div></div><div class="section" title="1.3.1.&nbsp;Purpose"><div class="titlepage"><div><div><h3 class="title"><a name="_purpose_2"></a>1.3.1.&nbsp;Purpose</h3></div></div></div><p>The Domain Model Project specifies the concepts of the domain at hand and the structural relations between the concepts.</p></div><div class="section" title="1.3.2.&nbsp;Creating the Domain Model Project"><div class="titlepage"><div><div><h3 class="title"><a name="_creating_the_domain_model_project"></a>1.3.2.&nbsp;Creating the Domain Model Project</h3></div></div></div><p>The GEMOC Studio relies on the Eclipse Modeling Framework for its Domain Model Projects. See <a class="link" href="http://eclipse.org/modeling/emf/" target="_top">the EMF website</a> for more information on how to create an EMF project in Eclipse. The Domain Model is materialized as an Ecore metamodel.</p><p>When your EMF Project is done, connect your xDSML Project to it by specifying in the <span class="emphasis"><em>project.xdsml</em></span> file the name of the EMF Project, the path to the genmodel of your Ecore metamodel and the name of the root element as <span class="emphasis"><em>package::root</em></span>.</p><p>TODO: Melange?</p></div><div class="section" title="1.3.3.&nbsp;Editing the Domain Model Project"><div class="titlepage"><div><div><h3 class="title"><a name="_editing_the_domain_model_project"></a>1.3.3.&nbsp;Editing the Domain Model Project</h3></div></div></div><p>If you wish to modify your Domain Model, do not forget to reload the associated genmodel and regenerate the EMF model code (and edit/editor code if you use them).</p></div></div><div class="section" title="1.4.&nbsp;Defining the Domain-Specific Actions (DSA) Project"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="section-define-dsa-project"></a>1.4.&nbsp;Defining the Domain-Specific Actions (DSA) Project</h2></div></div></div><div class="section" title="1.4.1.&nbsp;Purpose"><div class="titlepage"><div><div><h3 class="title"><a name="_purpose_3"></a>1.4.1.&nbsp;Purpose</h3></div></div></div><p>The Domain-Specific Actions define the runtime state (<span class="strong"><strong>Execution Data</strong></span>) of the model and the operations (<span class="strong"><strong>Execution Functions</strong></span>) which modify the runtime state of the model.</p></div><div class="section" title="1.4.2.&nbsp;Creating the DSA Project"><div class="titlepage"><div><div><h3 class="title"><a name="_creating_the_dsa_project"></a>1.4.2.&nbsp;Creating the DSA Project</h3></div></div></div><p>In the GEMOC Studio, the DSA are implemented using <a class="link" href="https://github.com/diverse-project/k3/wiki" target="_top">Kermeta 3</a>.
To create a new DSA Project, in the main menu of the GEMOC Studio, go to: <span class="emphasis"><em>File &gt; New &gt; Project&#8230;&#8203; &gt; K3 Project</em></span>. In the wizard, create it as a Plug-in with EMF using the template of your choice.
Then, connect the xDSML Project to the DSA Project by referencing the DSA Project in the <span class="emphasis"><em>project.xdsml</em></span> file.</p></div><div class="section" title="1.4.3.&nbsp;Editing the DSA Project"><div class="titlepage"><div><div><h3 class="title"><a name="_editing_the_dsa_project"></a>1.4.3.&nbsp;Editing the DSA Project</h3></div></div></div><p>Kermeta 3 is based on <a class="link" href="http://www.eclipse.org/xtend/index.html" target="_top">xTend</a>. The Execution Data and Execution Functions are defined through aspects weaved onto the metaclasses of the Domain Model.</p><div class="section" title="1.4.3.1.&nbsp;Defining the Execution Data"><div class="titlepage"><div><div><h4 class="title"><a name="_defining_the_execution_data"></a>1.4.3.1.&nbsp;Defining the Execution Data</h4></div></div></div><p>The Execution Data consist in attributes and references added to existing concepts (metaclasses) of the Abstract Syntax. They may also include new metaclasses which define the type of these new attributes and references.</p></div><div class="section" title="1.4.3.2.&nbsp;Defining the Execution Functions"><div class="titlepage"><div><div><h4 class="title"><a name="_defining_the_execution_functions"></a>1.4.3.2.&nbsp;Defining the Execution Functions</h4></div></div></div><p>The Execution Functions define how the Execution Data evolve during the execution of the model. Execution Functions can be implemented by defining the body of a method.</p><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p xmlns="">For now, Execution Functions are considered as <span class="strong"><strong>atomic, instantaneous and blocking</strong></span>. This means that any long computation will block the rest of the simulation, and concurrent Execution Functions are not executed in concurrence yet.</p></div><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Warning</h2><p xmlns="">For technical reasons, the Domain Model (Ecore metamodel) must specify the signature of the Execution Functions as EOperations.</p></div></div></div><div class="section" title="1.4.4.&nbsp;Testing the Domain-Specific Actions"><div class="titlepage"><div><div><h3 class="title"><a name="_testing_the_domain_specific_actions"></a>1.4.4.&nbsp;Testing the Domain-Specific Actions</h3></div></div></div><p>It is possible to test the DSA (in particular the Execution Functions) by simply writing a simple program with a <span class="emphasis"><em>main</em></span> function (using Java or Xtend/Kermeta3). Create or load a model conform to your Domain Model and call the Execution Functions in the right order to verify there are no runtime exceptions or domain issues.</p></div></div><div class="section" title="1.5.&nbsp;Defining Domain-Specific Constraints"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_defining_domain_specific_constraints"></a>1.5.&nbsp;Defining Domain-Specific Constraints</h2></div></div></div><p>TODO</p></div><div class="section" title="1.6.&nbsp;Defining a Concrete Syntax"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="defining-a-concrete-syntax-section"></a>1.6.&nbsp;Defining a Concrete Syntax</h2></div></div></div><p>An xDSML can support different concrete syntaxes. Most EMF-based editors should work with GEMOC, however the GEMOC Studio provides additional support for some specific editors. Thus, we recommend using: an EMF arborescent editor, an Xtext editor, and/or a Sirius editor.
Don&#8217;t forget to link the xDSML Project to the concrete syntax project(s) you want to use by editing the <span class="emphasis"><em>project.xdsml</em></span> file.</p><div class="section" title="1.6.1.&nbsp;Defining a Concrete Syntax with Xtext"><div class="titlepage"><div><div><h3 class="title"><a name="defining-a-concrete-syntax-with-xtext-section"></a>1.6.1.&nbsp;Defining a Concrete Syntax with Xtext</h3></div></div></div><p>See <a class="link" href="http://www.eclipse.org/Xtext/" target="_top">the Xtext website</a>.</p></div><div class="section" title="1.6.2.&nbsp;Defining a Concrete Syntax with Sirius"><div class="titlepage"><div><div><h3 class="title"><a name="defining-a-concrete-syntax-with-sirius-section"></a>1.6.2.&nbsp;Defining a Concrete Syntax with <a class="indexterm" name="d0e479"></a>Sirius</h3></div></div></div><p>If you want to create a graphical concrete syntax you can use Sirius. The <a class="link" href="http://www.eclipse.org/sirius/doc/" target="_top">Sirius documentation</a> provides information for <a class="link" href="http://www.eclipse.org/sirius/doc/specifier/Sirius%20Specifier%20Manual.html" target="_top">Sirius Specifier Manual</a>.</p></div></div><div class="section" title="1.7.&nbsp;Defining a Model of Concurrency and Communication (MoCC)"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="section-defining-a-mocc"></a>1.7.&nbsp;Defining a Model of Concurrency and Communication (MoCC)</h2></div></div></div><p>TODO: MoccML + ECL</p><div class="section" title="1.7.1.&nbsp;Introduction"><div class="titlepage"><div><div><h3 class="title"><a name="_introduction_2"></a>1.7.1.&nbsp;Introduction</h3></div></div></div><p>In the GEMOC approach, the executability characterization for a given language is done through several steps that include: the description of the actions associated with the language concepts (i.e. the Executions Functions); the description of the data / attributes that capture the state of a model or its evolution (the Execution Data); the description of the underlying language model of concurrency (the MoCC constraints).</p><p>A Model of Concurrency and Communication (MoCC) represents the concurrency, synchronizations and the possibly timed causalities in the behavioral semantics of a language. It must represent the acceptable schedules of the atomic actions of the language, which represent both computation and communication.</p><p>In this part of the guide, we assume that achieving the first two points has already been done based on <a class="xref" href="#">???</a>. In this part, we will mainly focus on the steps for the description and integration fo the model of concurrency in the language, once the <span class="emphasis"><em>EF</em></span> and <span class="emphasis"><em>ED</em></span> have been already taken into account and integrated to the language.
 The execution engine of the <span class="emphasis"><em>GEMOC Studio</em></span> is based on an event-based semantics, which means that events are used to activate the EF actions that can change the state of a model.</p><p>To describe and integrate the model of concurrency, we must 1) have a description of the useful events allowing activation of the <span class="emphasis"><em>EF</em></span>, 2) a mechanism to express the <span class="emphasis"><em>MoCC</em></span> constraints that apply on these events.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">1) is realized using the <span class="strong"><strong><a class="indexterm" name="d0e529"></a>ECL</strong></span> language whose description and use is provided below</li><li class="listitem">2) Is achieved through the <span class="strong"><strong><a class="indexterm" name="d0e538"></a>MoCCML</strong></span> language whose description and use is described below</li></ul></div></div><div class="section" title="1.7.2.&nbsp;The ECL approach to Identify DSE and constraints"><div class="titlepage"><div><div><h3 class="title"><a name="_the_ecl_approach_to_identify_dse_and_constraints"></a>1.7.2.&nbsp;The ECL approach to Identify DSE and constraints</h3></div></div></div><div class="section" title="1.7.2.1.&nbsp;Overview of ECL"><div class="titlepage"><div><div><h4 class="title"><a name="_overview_of_ecl"></a>1.7.2.1.&nbsp;Overview of ECL</h4></div></div></div><p>TODO</p></div><div class="section" title="1.7.2.2.&nbsp;Creation of an ECL model GEMOC Studio"><div class="titlepage"><div><div><h4 class="title"><a name="_creation_of_an_ecl_model_gemoc_studio"></a>1.7.2.2.&nbsp;Creation of an ECL model GEMOC Studio</h4></div></div></div><p><span class="emphasis"><em>ECL</em></span> models are created via files with the extension <span class="emphasis"><em>.ecl. The _xDSML</em></span> environment enables the creation and / or opening of new <span class="emphasis"><em>ECL</em></span> project that gives access to several functionalities such as (model transformation .qvto generator, etc) link to <a class="xref" href="#">???</a></p></div><div class="section" title="1.7.2.3.&nbsp;How to use ECL"><div class="titlepage"><div><div><h4 class="title"><a name="_how_to_use_ecl"></a>1.7.2.3.&nbsp;How to use ECL</h4></div></div></div><p>In this section, we show an exemplified way to use ECL. The required steps to go from a given language to the integration of its concurrency model are presented.</p><div class="section" title="1.7.2.3.1.&nbsp;Import Language"><div class="titlepage"><div><div><h5 class="title"><a name="_import_language"></a>1.7.2.3.1.&nbsp;Import Language</h5></div></div></div><p>As shown in Listing <a class="xref" href="#eclimport">???</a>, an <span class="emphasis"><em>ECL</em></span> file imports the extended language that contains the language metaclasses, the <span class="emphasis"><em>EF</em></span> and <span class="emphasis"><em>ED</em></span>. The <span class="emphasis"><em>ECL</em></span> language defines the notion of <span class="strong"><strong><a class="indexterm" name="d0e590"></a>import</strong></span> to import the extended metamodel (see import of <span class="emphasis"><em>dplExtended.ecore</em></span> in Listing <a class="xref" href="#eclimport">???</a>).
The import is used to load all the concepts of language that are used to clarify: the <span class="emphasis"><em>EF</em></span> activation events; static properties numeric or Boolean values, and constraints associated with concepts.</p><a name="eclimport"></a><pre class="programlisting"><b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">import</b> <i xmlns:fo="http://www.w3.org/1999/XSL/Format" style="color:blue" class="hl-string">"platform:/resource/org.gemoc.model.dpl.dplextended/model/dplExtended.ecore"</i></pre></div><div class="section" title="1.7.2.3.2.&nbsp;Define Event-Action Creation"><div class="titlepage"><div><div><h5 class="title"><a name="_define_event_action_creation"></a>1.7.2.3.2.&nbsp;Define Event-Action Creation</h5></div></div></div><p>The <span class="emphasis"><em>ECL</em></span> model gives access to the concept of the language via the declaration of their package container. In the illustration below, the package container is <span class="emphasis"><em>dplextended</em></span>.  Every metaclass/ concept is declared as a <span class="emphasis"><em>context</em></span>. In a given context, we define the mapping between events and actions and the <span class="emphasis"><em>MoCC</em></span> constraints of the context.
The illustration shows the definition and mapping of events associated with the concept of <span class="emphasis"><em>Philosopher</em></span>. For the context <span class="emphasis"><em>Philosopher</em></span>, the events are used to enable its actions ie <span class="emphasis"><em>eat()</em></span> and <span class="emphasis"><em>think()</em></span> actions.
<span class="emphasis"><em>ECL</em></span> syntax for declaring the mapping Event / Action is as follows:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">Define the type of the event: def: think: Event</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">When the event activate actions: the action associated to the event is accessed through the context via <span class="emphasis"><em>self.actionName()</em></span> (e.g. in Listing <a class="xref" href="#eclContextEventDeclaration">???</a> <span class="emphasis"><em>Philosopher</em></span> <span class="emphasis"><em>self.think()</em></span> and <span class="emphasis"><em>self.eat()</em></span>)</li><li class="listitem">When the event does not trigger an action i.e. used as internal control events : Its declaration does not mention any related action (e.g. <span class="emphasis"><em>getrightFork</em></span>, <span class="emphasis"><em>getleftFork</em></span>, <span class="emphasis"><em>putrightFork</em></span>, <span class="emphasis"><em>putleftFork</em></span>)</li></ul></div></li><li class="listitem">Finally, we can define local attributes to capture the value of static properties that can be for instance integers or booleans (e.g. <span class="emphasis"><em>def: eatcycleMax: Integer = self.eatCycles</em></span>)
The above steps specify the declaration of events and attributes that are used to control the actions for each language concept. We can focus on the description of the model of concurrency defined using <span class="emphasis"><em>MoCCML</em></span>.</li></ul></div><a name="eclContextEventDeclaration"></a><pre class="programlisting">package dplextended
	context Philosopher
		<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b>: think : Event = self.think()
		<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b>: getrightFork : Event = self
		<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b>: getleftFork : Event = self
		<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b>: eat : Event = self.eat()
		<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b>: putrightFork : Event = self
		<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b>: putleftFork : Event = self
		<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b>: thinkcycleMax : Integer = self.thinkCycles
		<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b>: eatcycleMax : Integer = self.eatCycles
endpackage</pre><p>The latter phase is done in two steps: the implementation of the execution control constraints with <span class="emphasis"><em>MoCCML</em></span>; the use of these constraints in the context definition to specify how the events should be scheduled (determine their causalities).</p></div></div></div><div class="section" title="1.7.3.&nbsp;The MoCCML approach to define constraints"><div class="titlepage"><div><div><h3 class="title"><a name="_the_moccml_approach_to_define_constraints"></a>1.7.3.&nbsp;The MoCCML approach to define constraints</h3></div></div></div><p>This section presents the MoCCML editor that supports the edition of <span class="emphasis"><em>MoCC_s. To keep the de&#64257;ned models formal and to provide a solver for the _MoCC</em></span>, an operational semantics and a solver based on this formal semantics were defined. For more information on the operational semantics the reader can refer to <a class="link" href="https://hal.inria.fr/hal-01060601v1" target="_top">MoCCML Operational Semantics</a>.</p><div class="section" title="1.7.3.1.&nbsp;Creating a MoCCML model in the GEMOC Studio"><div class="titlepage"><div><div><h4 class="title"><a name="_creating_a_moccml_model_in_the_gemoc_studio"></a>1.7.3.1.&nbsp;Creating a MoCCML model in the GEMOC Studio</h4></div></div></div><p>The <span class="emphasis"><em>MoCCML</em></span> models are created via files with an <span class="emphasis"><em>.moccml extension. They are also natively created from the dashboard _xDSML</em></span>, where you can create a <span class="emphasis"><em>MoCC</em></span> project. The project defines an empty model _.moccml with just the name of the library to be created. For a graphical representation of the models, you have to right-click on the file (New Representation File) and run next until the creation of the _.aird representation. This procedure is described in the Sirius tutorial <a class="link" href="http://www.eclipse.org/sirius/doc/" target="_top">Sirius documentation</a> and <a class="link" href="http://www.eclipse.org/sirius/doc/specifier/Sirius%20Specifier%20Manual.html" target="_top">Sirius Specifier Manual</a> to create new diagrams starting from a model whose graphical editor was made from Sirius.</p></div><div class="section" title="1.7.3.2.&nbsp;Overview de MoCCML"><div class="titlepage"><div><div><h4 class="title"><a name="_overview_de_moccml"></a>1.7.3.2.&nbsp;Overview de MoCCML</h4></div></div></div><p><span class="emphasis"><em>MoCCML</em></span> is a declarative meta-language specifying constraints between the events of a <span class="emphasis"><em>MoCC</em></span>. At any moment during a run, an event that does not violate the constraints can occur. The constraints are grouped in libraries that specify <span class="emphasis"><em>MoCC</em></span> speci&#64257;c constraints. The constraints are eventually instantiated to de&#64257;ne the execution model of a speci&#64257;c model. The execution model is a symbolic representation of all the acceptable schedules for a particular model.
<span class="emphasis"><em>MoCCML</em></span> is based on the principle of defining constraints on events. There are two categories of constraint de&#64257;nitions: the Declarative De&#64257;nitions and the Constraint Automata De&#64257;nitions. Each constraint definition has an associated ConstraintDeclaration that defines the prototype of the constraint.</p></div><div class="section" title="1.7.3.3.&nbsp;Presentation of the MoCCML Editor"><div class="titlepage"><div><div><h4 class="title"><a name="_presentation_of_the_moccml_editor"></a>1.7.3.3.&nbsp;Presentation of the MoCCML Editor</h4></div></div></div><p>The concrete syntax of <span class="emphasis"><em>MoCCML</em></span> is implemented as a combination of graphical and textual syntaxes to provide the most appropriate representation for each part of a <span class="emphasis"><em>MoCC</em></span> model library.
The graphical syntax can be divided into two levels of representation: one for the definition of the <span class="emphasis"><em>MoCC</em></span> libraries (the declaration and definition of the automata constraints); another for the implementation of the constraints in the form of automata. For instance:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">The first level of representation contains elements as illustrated in Figure <a class="xref" href="#figure-glw-screenshot-of-moccmlLevelFirst" title="Figure&nbsp;1.2.&nbsp;Screenshot of the First graphical level of Edition in MoCCML.">Figure&nbsp;1.2, &#8220;Screenshot of the First graphical level of Edition in MoCCML.&#8221;</a>. The represented model imports two <span class="emphasis"><em>CCSL</em></span> libraries (<span class="emphasis"><em>kernel.ccslLib</em></span> and <span class="emphasis"><em>CCSL.ccslLib</em></span>). The imported libraries provide predefined types that are used to define formal parameters such as DiscreteClocks, Integers, etc. Each defined Relation Declaration is associated to a Automata constraint definition. The association is done through the <span class="emphasis"><em>Set Declaration Relation</em></span> link.</li><li class="listitem">The second level of graphical representation defines the graphical syntax for the modeling of the Automata constraints.</li><li class="listitem">The overall <span class="emphasis"><em>MoCC</em></span> models are serialized to a textual syntax, which means that the graphical models are transformed into their equivalent representation in a textual formal. <span class="strong"><strong><a class="indexterm" name="d0e779"></a>Both representations (graphical or textual) can be used for edition of models</strong></span>.
Moreover, we define the integration of an embedded textual editor in the graphical representation to focus on specific parts of the <span class="emphasis"><em>MoCC</em></span> model that are better edited using a textual syntax (eg trigger, the guards and the actions on transitions). Embedded editors are called by double-clic, and are placed on specific graphical edition elements (Relation Declaration, Relation Definition, DeclarationBlock, Transition).</li></ul></div></div><div class="section" title="1.7.3.4.&nbsp;Example-Driven use of MoCCML"><div class="titlepage"><div><div><h4 class="title"><a name="_example_driven_use_of_moccml"></a>1.7.3.4.&nbsp;Example-Driven use of MoCCML</h4></div></div></div><p>NB: <span class="emphasis"><em>MoCCML</em></span> has multiple pallets to instantiate a library. The pallets are located on the right branch of the editor. The creation of new library is preceded by an import of the native <span class="emphasis"><em>CCSL</em></span> libraries (<span class="emphasis"><em>kernel.ccslLib</em></span>, <span class="emphasis"><em>CCSL.ccslLib</em></span>) which provide primitives for the description of events and variables that are handled by the constraints in the <span class="emphasis"><em>MoCC</em></span> library. We use the third pallet in Figure <a class="xref" href="#figure-glw-screenshot-of-moccmlLevelFirst" title="Figure&nbsp;1.2.&nbsp;Screenshot of the First graphical level of Edition in MoCCML.">Figure&nbsp;1.2, &#8220;Screenshot of the First graphical level of Edition in MoCCML.&#8221;</a>to import such <span class="emphasis"><em>CCSL</em></span> libraries.</p><div class="figure"><a name="figure-glw-screenshot-of-moccmlLevelFirst"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/eclmoccml/moccmlLevFirst.png" alt="Screenshot of MoCCML First Level of Edition"></div></div><p class="title"><b>Figure&nbsp;1.2.&nbsp;Screenshot of the First graphical level of Edition in MoCCML.</b></p></div><br class="figure-break"><div class="section" title="1.7.3.4.1.&nbsp;Creating MoCC Libraries"><div class="titlepage"><div><div><h5 class="title"><a name="_creating_mocc_libraries"></a>1.7.3.4.1.&nbsp;Creating MoCC Libraries</h5></div></div></div><p>As shown in Figure <a class="xref" href="#figure-glw-screenshot-of-moccmlLevelFirst" title="Figure&nbsp;1.2.&nbsp;Screenshot of the First graphical level of Edition in MoCCML.">Figure&nbsp;1.2, &#8220;Screenshot of the First graphical level of Edition in MoCCML.&#8221;</a>, creating new <span class="emphasis"><em>MoCC</em></span> libraries can be done by using the first two pallets on the right (Library Edition, New Library &amp; Required Feature). In these pallets, the element (Library New Library + New Relationship and Relationship) can be used for the instantiation of a new <span class="emphasis"><em>MoCC</em></span> library. The two are distinguished by the fact that the last mentioned will create a new library of <span class="emphasis"><em>MoCC</em></span>, while adding a default Relation Declaration. In Figure <a class="xref" href="#figure-glw-screenshot-of-moccmlLevelFirst" title="Figure&nbsp;1.2.&nbsp;Screenshot of the First graphical level of Edition in MoCCML.">Figure&nbsp;1.2, &#8220;Screenshot of the First graphical level of Edition in MoCCML.&#8221;</a> we create a new Library called <span class="emphasis"><em>RendezVous_Relations</em></span>.</p></div><div class="section" title="1.7.3.4.2.&nbsp;Declaring the constrained events"><div class="titlepage"><div><div><h5 class="title"><a name="_declaring_the_constrained_events"></a>1.7.3.4.2.&nbsp;Declaring the constrained events</h5></div></div></div><p>In a <span class="emphasis"><em>MoCC</em></span> library, we define constraints and their declarations. The declarations identify events and parameters to be considered in the implementation of the constraint. In the editor, the declaration is made using the two above mentioned pallets, and using the elements in the pallets i.e.: <span class="emphasis"><em>New Relationship Declaration</em></span> and <span class="emphasis"><em>New Relationship Declaration +</em></span>. The two differ in that the latter creates a Relation Declaration with a default formal parameter declaration. In the Figure <a class="xref" href="#figure-glw-screenshot-of-moccmlLevelFirst" title="Figure&nbsp;1.2.&nbsp;Screenshot of the First graphical level of Edition in MoCCML.">Figure&nbsp;1.2, &#8220;Screenshot of the First graphical level of Edition in MoCCML.&#8221;</a>, we create two relation declarations (<span class="emphasis"><em>ForkConstraintDecl</em></span> and <span class="emphasis"><em>PhilosopherConstraintDecl</em></span>). Listing <a class="xref" href="#philoDeclarationTextual">???</a> also shows the equivalent textual code generated for the <span class="emphasis"><em>PhilosopherConstraintDecl</em></span>.</p><a name="philoDeclarationTextual"></a><pre class="programlisting">RelationDeclaration PhilosopherConstraintDcl(
			pthink : clock,
			grfork : clock,
			glfork : clock,
			peat : clock,
			prfork : clock,
			plfork : clock,
			thinkCyc:int,
			eatCyc:int
		)</pre></div><div class="section" title="1.7.3.4.3.&nbsp;Defining the constraints"><div class="titlepage"><div><div><h5 class="title"><a name="_defining_the_constraints"></a>1.7.3.4.3.&nbsp;Defining the constraints</h5></div></div></div><p>The implementation of constraints can be specified textually or graphically. Graphically, the first two pallets are used to create new definitions of constraints associated with their declarations. Constraint definitions is done using the menu items (<span class="emphasis"><em>New Automata Definition</em></span> and <span class="emphasis"><em>New Automata Definition +</em></span>). In Figure <a class="xref" href="#figure-glw-screenshot-of-moccmlLevelFirst" title="Figure&nbsp;1.2.&nbsp;Screenshot of the First graphical level of Edition in MoCCML.">Figure&nbsp;1.2, &#8220;Screenshot of the First graphical level of Edition in MoCCML.&#8221;</a>, the following constraints are specified: <span class="emphasis"><em>ForkConstraintDef</em></span>, <span class="emphasis"><em>PhilosopherConstraintDef</em></span>). At this stage, we toured the main notions that can be set on the first level of graphical description with <span class="emphasis"><em>MoCCML</em></span>.
To navigate in the second level of graphical description (Constraint implementation), one should right-click on a specified constraint definition using (Open Diagram / New Diagram). Open Diagram will navigate to an existing diagram; New Diagram will create a new diagram to edit.
The <span class="emphasis"><em>MoCCML</em></span> Editor offers 3 different pallets for: editing the automata, defining the local variables and editing the transitons (ie adding <span class="emphasis"><em>Trigger</em></span>, <span class="emphasis"><em>Guard</em></span>, <span class="emphasis"><em>Actions</em></span>). Figure <a class="xref" href="#figure-glw-screenshot-of-moccmlLevelSecond" title="Figure&nbsp;1.3.&nbsp;Screenshot of the Second graphical level of Edition in MoCCML (Constraint Implementation).">Figure&nbsp;1.3, &#8220;Screenshot of the Second graphical level of Edition in MoCCML (Constraint Implementation).&#8221;</a> shows a simple example with two control states. An additional Layer displays the details of the transitions (<span class="emphasis"><em>Trigger</em></span>, <span class="emphasis"><em>Guard</em></span>, <span class="emphasis"><em>Action</em></span>) as shown in Figure <a class="xref" href="#figure-glw-screenshot-of-moccmlLevelSecond" title="Figure&nbsp;1.3.&nbsp;Screenshot of the Second graphical level of Edition in MoCCML (Constraint Implementation).">Figure&nbsp;1.3, &#8220;Screenshot of the Second graphical level of Edition in MoCCML (Constraint Implementation).&#8221;</a>, see yellow boxes.
Besides, editing <span class="emphasis"><em>DeclarationBlock</em></span> boxes and <span class="emphasis"><em>details in Transitions</em></span> can be done using embedded text editor by double-clicking on the related boxes. We can then edit the properties of transitions and local variables textually.</p><p>One can define the desired set of constraints on the concepts of language using the <span class="emphasis"><em>MoCCML</em></span> editor. To see the text code corresponding to the serialization of the edited <span class="emphasis"><em>MoCC</em></span> models, the user can open the _.moccml file. Editing can also be directly made from this file and all the changes will be reflected in the graphical editor.
The use of constraints is shown in the next section.</p><div class="figure"><a name="figure-glw-screenshot-of-moccmlLevelSecond"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/eclmoccml/moccmlLevSecond.png" alt="Screenshot of MoCCML Second Level of Edition"></div></div><p class="title"><b>Figure&nbsp;1.3.&nbsp;Screenshot of the Second graphical level of Edition in MoCCML (Constraint Implementation).</b></p></div><br class="figure-break"></div><div class="section" title="1.7.3.4.4.&nbsp;Using the constraints on the ECL"><div class="titlepage"><div><div><h5 class="title"><a name="_using_the_constraints_on_the_ecl"></a>1.7.3.4.4.&nbsp;Using the constraints on the ECL</h5></div></div></div><p>The <span class="emphasis"><em>MoCC</em></span> constraints models can be used in the <span class="emphasis"><em>ECL</em></span> file on concepts which they are attached. To declare the constraint on the events, we re-declare the context of the concept then define an invariant <span class="emphasis"><em>inv</em></span>, see Listing <a class="xref" href="#eclContextConstraintUse">???</a>. In this listing we also import the <span class="emphasis"><em>MoCCML</em></span> library that was defined previously (i.e. rendez_vous.moccml)
For instance, the invariant related to the context Philosopher (<span class="emphasis"><em>PhilosopherConstraintInv</em></span>) uses the <span class="emphasis"><em>PhilosopherConstraintDef</em></span> via its <span class="emphasis"><em>PhilosopherConstraintDcl</em></span> declaration? It takes as input the set of control events and static variables used to calculate the causality between events.</p><a name="eclContextConstraintUse"></a><pre class="programlisting">ECLimport <i xmlns:fo="http://www.w3.org/1999/XSL/Format" style="color:blue" class="hl-string">"platform:/resource/org.gemoc.dpl.xdsml.mocc.model/mocc/rendez_vous.moccml"</i>
ECLimport <i xmlns:fo="http://www.w3.org/1999/XSL/Format" style="color:blue" class="hl-string">"platform:/plugin/fr.inria.aoste.timesquare.ccslkernel.model/ccsllibrary/kernel.ccslLib"</i>
ECLimport <i xmlns:fo="http://www.w3.org/1999/XSL/Format" style="color:blue" class="hl-string">"platform:/plugin/fr.inria.aoste.timesquare.ccslkernel.model/ccsllibrary/CCSL.ccslLib"</i>

package dplextended
	context Philosopher
		<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b>: think : Event = self.think()
		<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b>: getrightFork : Event = self
		<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b>: getleftFork : Event = self
		<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b>: eat : Event = self.eat()
		<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b>: putrightFork : Event = self
		<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b>: putleftFork : Event = self
		<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b>: thinkcycleMax : Integer = self.thinkCycles
		<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b>: eatcycleMax : Integer = self.eatCycles

	context Philosopher
	inv PhilosopherConstraintInv:
		Relation PhilosopherConstraintDcl(
                self.think,
                self.getrightFork,
                self.getleftFork,self.eat,
                self.putrightFork,
                self.putleftFork,
                self.thinkcycleMax,
                self.eatcycleMax
                )
endpackage</pre></div></div></div></div><div class="section" title="1.8.&nbsp;Defining the Domain-Specific Events (DSE)"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_defining_the_domain_specific_events_dse"></a>1.8.&nbsp;Defining the Domain-Specific Events (DSE)</h2></div></div></div><div class="section" title="1.8.1.&nbsp;Purpose"><div class="titlepage"><div><div><h3 class="title"><a name="_purpose_4"></a>1.8.1.&nbsp;Purpose</h3></div></div></div><p>The DSE define a mapping between MoccEvents from the MoCC and the Execution Functions. They specify the coordination between what happens in the MoCC, depending on its constraints, and which operations must be called in the model (thus resulting in changes in the Execution Data).
They are also exposed as the behavioral interface of the xDSML, based on which the Behavioral COmposition Operator Language (BCOoL) defines the composition of xDSMLs.</p></div><div class="section" title="1.8.2.&nbsp;Creating the DSE Project"><div class="titlepage"><div><div><h3 class="title"><a name="_creating_the_dse_project"></a>1.8.2.&nbsp;Creating the DSE Project</h3></div></div></div><p>Create an empty Plug-in Project. In this project, create a new file with the ".GEL" extension. The DSE can be defined using the <span class="strong"><strong>Gemoc Events Language</strong></span> (GEL).</p></div><div class="section" title="1.8.3.&nbsp;Editing the DSE Project"><div class="titlepage"><div><div><h3 class="title"><a name="_editing_the_dse_project"></a>1.8.3.&nbsp;Editing the DSE Project</h3></div></div></div><p>The first step to designing the DSE in GEL consists in importing the MoCC2AS Mapping (ECL file) and the Domain Model (Ecore metamodel) of the xDSML. You can do so by using the <span class="emphasis"><em>import platform:/resource/&#8230;&#8203;</em></span> syntax at the beginning of the file.</p><div class="section" title="1.8.3.1.&nbsp;Defining an Atomic Domain-Specific Event"><div class="titlepage"><div><div><h4 class="title"><a name="_defining_an_atomic_domain_specific_event"></a>1.8.3.1.&nbsp;Defining an Atomic Domain-Specific Event</h4></div></div></div><p>Atomic Domain-Specific Events realize a 1-to-1 mapping between the MoccEvents and the Execution Functions of the xDSML.
An atomic DSE is defined using the following syntax:</p><pre class="screen">DSE &lt;name&gt;:
  upon &lt;MoccEvent&gt;
  triggers &lt;Path-to-ExecutionFunction&gt;
end</pre><p>Where:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">&lt;name&gt; is the name of the Domain-Specific Event;</li><li class="listitem">&lt;MoccEvent&gt; is any MoccEvent from the MoCC2AS Mapping. This will also automatically define the DSE in the same context as the MoccEvent referenced, thus defining the starting point of navigation expressions from this DSE;</li><li class="listitem">&lt;Path-to-ExecutionFunction&gt; is a navigation path from the context of this DSE to an Execution Function.</li></ul></div><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Tip</h2><p xmlns="">In case of difficulty, make use of the auto-completion feature.</p></div><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p xmlns="">The implicit context of a Domain-Specific Event is inferred from the context in which its associated MoccEvent is defined in the MoCC2AS Mapping. Therefore, the DSE will be usable for any instance in the model of the context of the DSE. For instance if a DSE is mapped to a MoccEvent defined in the context of the metaclass <span class="emphasis"><em>Transition</em></span>, and there are 3 Transitions in the model being executed, this DSE will be usable for each of the 3 Transitions of the model.</p></div></div><div class="section" title="1.8.3.2.&nbsp;Semantics of Atomic Domain-Specific Events"><div class="titlepage"><div><div><h4 class="title"><a name="_semantics_of_atomic_domain_specific_events"></a>1.8.3.2.&nbsp;Semantics of Atomic Domain-Specific Events</h4></div></div></div><p>Upon an occurrence of the associated MoccEvent, an occurrence of the Domain-Specific Event is created and consumed by the GEMOC Execution Engine. Its consumption triggers the execution of the designated Execution Function.</p></div><div class="section" title="1.8.3.3.&nbsp;Defining a Composite Domain-Specific Events"><div class="titlepage"><div><div><h4 class="title"><a name="_defining_a_composite_domain_specific_events"></a>1.8.3.3.&nbsp;Defining a Composite Domain-Specific Events</h4></div></div></div><p>TODO</p></div><div class="section" title="1.8.3.4.&nbsp;Semantics of Composite Domain-Specific Events"><div class="titlepage"><div><div><h4 class="title"><a name="_semantics_of_composite_domain_specific_events"></a>1.8.3.4.&nbsp;Semantics of Composite Domain-Specific Events</h4></div></div></div><p>TODO</p></div></div></div><div class="section" title="1.9.&nbsp;Defining the Feedback Specification"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_defining_the_indexterm_primary_feedback_specification_primary_indexterm_feedback_specification"></a>1.9.&nbsp;Defining the <a class="indexterm" name="d0e1041"></a>Feedback Specification</h2></div></div></div><div class="section" title="1.9.1.&nbsp;Purpose"><div class="titlepage"><div><div><h3 class="title"><a name="_purpose_5"></a>1.9.1.&nbsp;Purpose</h3></div></div></div><p>Many languages need to be able to parameterize their control flow with their data flow. For instance, conditional statements like <span class="emphasis"><em>if&#8230;&#8203;then&#8230;&#8203;else</em></span> or <span class="emphasis"><em>switch&#8230;&#8203;case</em></span> statements depend on the result of a boolean expression.
Since the GEMOC approach at designing xDSMLs promotes the separation of the concurrency (MoCC from the domain-specific data (DSA), there needs to be a form of communication from the DSA to the MoCC. For instance, the MoCC of an xDSML with a conditional statement specifies that after evaluating the condition, either the 'then' or the 'else' branch will be taken (in exclusion from one another), while the DSA provide the Execution Function that evaluates the condition, returning a boolean value. Making the link between the 'true' value and the 'then' branch, and between the 'false' value and the 'else' branch is the role of the Feedback Specification.
More formally, the Feedback Specification specifies how domain data returned by an Execution Function must be interpreted to parameterize the MoCC. The Feedback Specification consists in a set of Feedback Policies which are associated to the atomic Domain-Specific Events. Therefore, the Feedback Specification is also done using <a class="indexterm" name="d0e1056"></a>GEL.</p></div><div class="section" title="1.9.2.&nbsp;Creating a Feedback Policy"><div class="titlepage"><div><div><h3 class="title"><a name="_creating_a_indexterm_primary_feedback_policy_primary_indexterm_feedback_policy"></a>1.9.2.&nbsp;Creating a <a class="indexterm" name="d0e1063"></a>Feedback Policy</h3></div></div></div><p>A Feedback Policy is associated to an atomic DSE by extending the syntax for defining the atomic DSE as follows:</p><pre class="screen">DSE &lt;name&gt;:
  upon &lt;MoccEvent&gt;
  triggers &lt;Path-to-ExecutionFunction&gt; returning &lt;resultName&gt;
  feedback:
    [&lt;filter1&gt;] =&gt; allow &lt;PathToMoccEventConsequence1&gt;
    [&lt;filter2&gt;] =&gt; allow &lt;PathToMoccEventConsequence2&gt;
    ...
    default =&gt; allow &lt;PathToMoccEventDefaultConsequence&gt;
  end
end</pre><p>Where:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">&lt;resultName&gt; is a local variable which will be affected with the value returned by the associated Execution Function;</li><li class="listitem">Between the <span class="emphasis"><em>feedback</em></span> and <span class="emphasis"><em>end</em></span> keywords, a set of Feedback Rules are defined (including a default Feedback Rule, with the <span class="emphasis"><em>default</em></span> keyword). A Feedback Rule is composed of a filter (between squared brackets) and a consequence;</li><li class="listitem">&lt;filterN&gt; are predicates, most likely using &lt;resultName&gt; which define whether or not this Feedback Rule must be applied;</li><li class="listitem">&lt;PathToMoccEventConsequenceN&gt; is a navigation expression to a MoccEvent which specifies which MoccEvent is allowed as a result of the data returned by the Execution Function.</li></ul></div></div><div class="section" title="1.9.3.&nbsp;Semantics of the Feedback Policy"><div class="titlepage"><div><div><h3 class="title"><a name="_semantics_of_the_feedback_policy"></a>1.9.3.&nbsp;Semantics of the Feedback Policy</h3></div></div></div><p>When the Execution Function associated to a DSE returns a result, the filter of every Feedback Policy is evaluated. If none of the filters is validated, then the default rule is applied. Else, the collection of rules for which the filter validated are applied.
For each rule to apply, the associated consequence is allowed to have occurrences in upcoming steps of execution. This is done by the Execution Engine by filtering out some solutions provided by the MoCC interpreter and only allowing the ones complying with the Feedback Specification.</p><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="caution" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Caution</h2><p xmlns="">Using the Feedback Specification implies the use of a certain design pattern in the MoCC. Make sure your MoCC is well-designed for using the Feedback Specification. Don&#8217;t forget to check the tutorial concerning the Feedback Specification.</p></div></div></div><div class="section" title="1.10.&nbsp;Defining a debug representation"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="defining-a-debug-representation-section"></a>1.10.&nbsp;Defining a debug representation</h2></div></div></div><p>The debug layer is an extension on top of a graphical editor defined with <a class="indexterm" name="d0e1108"></a>Sirius which represents runtime data and the current instruction. See <a class="xref" href="#defining-a-concrete-syntax-with-sirius-section" title="1.6.2.&nbsp;Defining a Concrete Syntax with Sirius">Section&nbsp;1.6.2, &#8220;Defining a Concrete Syntax with Sirius&#8221;</a> for more details about <a class="indexterm" name="d0e1114"></a>Sirius. This section covers the debug representation creation wizard and the technical implementation details. Technical implementation details are only useful for advanced use case and troubleshooting.</p><div class="section" title="1.10.1.&nbsp;The debug representation wizard"><div class="titlepage"><div><div><h3 class="title"><a name="_the_debug_representation_wizard"></a>1.10.1.&nbsp;The debug representation wizard</h3></div></div></div><p>This wizard creates a layer to represent the current instruction and add commands in order to manage breakpoints and launch a simulation in debug mode. This is a default implementation, it can be customized to represent runtime data for instance. The customization uses the <a class="indexterm" name="d0e1123"></a>Sirius description definition, see the <a class="link" href="http://www.eclipse.org/sirius/doc/specifier/Sirius%20Specifier%20Manual.html" target="_top">Sirius Specifier Manual</a> for more details.
The wizard presents three ways to implement this layer:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Create a debug diagram description</li><li class="listitem">Extend an existing diagram description</li><li class="listitem">Add a debug layer to an existing diagram description</li></ul></div><div class="informalfigure"><div class="mediaobject"><img src="./images/workbench/language/debug_representation_wizard/wizard.png" alt="Debug representation wizard"></div></div><div class="section" title="1.10.1.1.&nbsp;Create a debug diagram description"><div class="titlepage"><div><div><h4 class="title"><a name="_create_a_debug_diagram_description"></a>1.10.1.1.&nbsp;Create a debug diagram description</h4></div></div></div><p>It creates a diagram representation with a default debug layer. The representation does not depend on another representation. A typical use case is a language where the runtime data representation is too far from the language graphical syntax.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/workbench/language/debug_representation_wizard/create/1.png" alt="Debug representation wizard"></div></div><div class="informalfigure"><div class="mediaobject"><img src="./images/workbench/language/debug_representation_wizard/create/2.png" alt="Debug representation wizard"></div></div></div><div class="section" title="1.10.1.2.&nbsp;Extend an existing diagram description"><div class="titlepage"><div><div><h4 class="title"><a name="_extend_an_existing_diagram_description"></a>1.10.1.2.&nbsp;Extend an existing diagram description</h4></div></div></div><p>It creates a diagram representation with a default debug layer that extends an existing representation. This allows to have a debug layer based on the representation of the language concrete syntax. The language concrete syntax can be deployed without the debug representation. A typical use case is the reuse of an existing diagram definition that you cannot modify by yourself. For instance if you want to use <a class="link" href="http://eclipse.org/modeling/mdt/?project=uml2" target="_top">UML</a>, you can reuse the <a class="link" href="http://www.umldesigner.org/" target="_top">UML Designer</a>.</p><p>You can select any diagram description.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/workbench/language/debug_representation_wizard/extend/1.png" alt="Debug representation wizard"></div></div><p>And then define the new diagram description which extends the one you previously selected.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/workbench/language/debug_representation_wizard/extend/2.png" alt="Debug representation wizard"></div></div><div class="informalfigure"><div class="mediaobject"><img src="./images/workbench/language/debug_representation_wizard/extend/3.png" alt="Debug representation wizard"></div></div></div><div class="section" title="1.10.1.3.&nbsp;Add a debug layer to an existing diagram description"><div class="titlepage"><div><div><h4 class="title"><a name="_add_a_debug_layer_to_an_existing_diagram_description"></a>1.10.1.3.&nbsp;Add a debug layer to an existing diagram description</h4></div></div></div><p>It creates a default debug layer in an existing diagram representation. This should be used if you are also in charge of the language concrete syntax.</p><p>In this case, you can only select a diagram description from the workspace.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/workbench/language/debug_representation_wizard/add/1.png" alt="Debug representation wizard"></div></div><div class="informalfigure"><div class="mediaobject"><img src="./images/workbench/language/debug_representation_wizard/add/2.png" alt="Debug representation wizard"></div></div></div></div><div class="section" title="1.10.2.&nbsp;Implementation details"><div class="titlepage"><div><div><h3 class="title"><a name="_implementation_details"></a>1.10.2.&nbsp;Implementation details</h3></div></div></div><p>Implementation details are for advanced use and troubleshooting. It explains how the implementation works behind the scene. There are two main elements covered here : the debugger services class and the debug layer itself.</p><div class="section" title="1.10.2.1.&nbsp;Debugger services"><div class="titlepage"><div><div><h4 class="title"><a name="_debugger_services"></a>1.10.2.1.&nbsp;Debugger services</h4></div></div></div><p>The debugger services class is use to tell which representations should be activated and refreshed during debug (see the getRepresentationRefreshList() method). It also provides a method to know if an element of the diagram is the current instruction. This is provided by the isCurrentInstruction() method.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/workbench/language/debug_services.png" alt="Debug services"></div></div></div><div class="section" title="1.10.2.2.&nbsp;Debug layer"><div class="titlepage"><div><div><h4 class="title"><a name="_debug_layer"></a>1.10.2.2.&nbsp;Debug layer</h4></div></div></div><p>The default debug layer adds action to start the simulation in debug mode and to toggle breakpoints (1). When a breakpoint exists for an element of the diagram, a visual feedback is displayed according to the breakpoint state (2). The current instruction is also highlighted in yellow by default (3).</p><div class="informalfigure"><div class="mediaobject"><img src="./images/workbench/language/debug_layer.png" alt="Debug layer"></div></div><p>This is a default debug layer, it can be customized to fit your needs. The customization use the <a class="indexterm" name="d0e1254"></a>Sirius description definition, see the <a class="link" href="http://www.eclipse.org/sirius/doc/specifier/Sirius%20Specifier%20Manual.html" target="_top">Sirius Specifier Manual</a> for more details.</p></div></div></div><div class="section" title="1.11.&nbsp;Language workbench dashboard"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="language-workbench-dashboard-section"></a>1.11.&nbsp;Language workbench dashboard</h2></div></div></div><div class="section" title="1.11.1.&nbsp;Open the dashboard"><div class="titlepage"><div><div><h3 class="title"><a name="_open_the_dashboard"></a>1.11.1.&nbsp;Open the dashboard</h3></div></div></div><p>The dashboard is available on .xdsml files from the Project Explorer or the Model Explorer views. See <a class="xref" href="#section-gemoc-language-project" title="1.2.&nbsp;xDSML Project">Section&nbsp;1.2, &#8220;xDSML Project&#8221;</a> to view how to create an xDSML project.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/workbench/language/dashboard/open_dashboard_menu.png" alt="Dashboard menu"></div></div><p>When the <code class="literal">Gemoc Dashboard</code> menu is selected a new editor opens.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/workbench/language/dashboard/dashboard_create_language.png" alt="Dashboard"></div></div><p>This editor is divided in three main parts:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">Overview part</li><li class="listitem">Sections part</li><li class="listitem">Projects view</li></ol></div><div class="informalfigure"><div class="mediaobject"><img src="./images/workbench/language/dashboard/dashboard_parts.png" alt="Dashboard parts"></div></div></div><div class="section" title="1.11.2.&nbsp;Overview"><div class="titlepage"><div><div><h3 class="title"><a name="_overview_2"></a>1.11.2.&nbsp;Overview</h3></div></div></div><p>The overview allows to access to the different parts of the <a class="xref" href="#gemoc-language-workbench" title="Chapter&nbsp;1.&nbsp;GEMOC Language Workbench">Chapter&nbsp;1, <i>GEMOC Language Workbench <span class="inlinemediaobject"><img src="./images/icons/IconeGemocLanguage_16.png" width="16" height="16" alt="IconeGemocLanguage_16"></span></i></a> process :</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Create your language</li><li class="listitem">Make your language executable</li><li class="listitem">Define your runtime environment</li></ul></div><p>When you click on a step in the overview the related actions are automatically presented in the sections part.</p></div><div class="section" title="1.11.3.&nbsp;Sections"><div class="titlepage"><div><div><h3 class="title"><a name="_sections"></a>1.11.3.&nbsp;Sections</h3></div></div></div><p>This part provides sections which depends on the selected overview. The sections contain links that can be used to activate the different actions : create the domain model project, edit the DSA project, define a concrete syntax&#8230;&#8203;</p><div class="informalfigure"><div class="mediaobject"><img src="./images/workbench/language/dashboard/dashboard_create_language_sections.png" alt="Dashboard sections"></div></div><div class="section" title="1.11.3.1.&nbsp;Description"><div class="titlepage"><div><div><h4 class="title"><a name="_description"></a>1.11.3.1.&nbsp;Description</h4></div></div></div><p>Each section provides a help button which shows the description associated to the section and explains the process step and which actions are available.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/workbench/language/dashboard/section_description.png" alt="Section description"></div></div></div><div class="section" title="1.11.3.2.&nbsp;Links"><div class="titlepage"><div><div><h4 class="title"><a name="_links"></a>1.11.3.2.&nbsp;Links</h4></div></div></div><p>When a link is selected, the corresponding action is launched : open a wizard, open the documentation&#8230;&#8203;</p><div class="informalfigure"><div class="mediaobject"><img src="./images/workbench/language/dashboard/link.png" alt="Link"></div></div><div class="informalfigure"><div class="mediaobject"><img src="./images/workbench/language/dashboard/link_open_wizard.png" alt="Open wizard"></div></div></div></div><div class="section" title="1.11.4.&nbsp;Projects view"><div class="titlepage"><div><div><h3 class="title"><a name="_projects_view"></a>1.11.4.&nbsp;Projects view</h3></div></div></div><p>On the right side of the dashboard, a tree viewer shows the projects associated to the current xDSML project.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/workbench/language/dashboard/projects_viewer.png" alt="Projects viewer"></div></div><div class="section" title="1.11.4.1.&nbsp;Synchronize"><div class="titlepage"><div><div><h4 class="title"><a name="_synchronize"></a>1.11.4.1.&nbsp;Synchronize</h4></div></div></div><p>The section toolbar provides a <code class="literal">synchronize</code> action. This action filters the content of the tree viewer to keep only projects relevant according to the current process step represented by the section.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/workbench/language/dashboard/synchronize.png" alt="Synchronize projects"></div></div></div><div class="section" title="1.11.4.2.&nbsp;Open existing projects"><div class="titlepage"><div><div><h4 class="title"><a name="_open_existing_projects"></a>1.11.4.2.&nbsp;Open existing projects</h4></div></div></div><p>By double-clicking on a projet in the tree viewer, it is possible to open and update the corresponding file.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/workbench/language/dashboard/edit_project.png" alt="Edit project"></div></div></div></div></div></div><div class="chapter" title="Chapter&nbsp;2.&nbsp;Gemoc Modeling workbench"><div class="titlepage"><div><div><h2 class="title"><a name="chapter-gemoc-modeling-workbench"></a>Chapter&nbsp;2.&nbsp;Gemoc Modeling workbench</h2></div></div></div><div class="section" title="2.1.&nbsp;Modeling workbench overview"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_modeling_workbench_overview"></a>2.1.&nbsp;Modeling workbench overview</h2></div></div></div><p>The GEMOC Modeling Workbench, intended to be used by domain designers: it allows creating and executing models conformant to executable DSMLs.</p><div class="figure"><a name="figure-glw-screenshot-of-modeling_workbench"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/gemoc_modeling_workbench_TFSM_animation_screenshot.png" width="800" alt="Screenshot of GEMOC Studio Modeling Workbench on the TFSM example (execution and animation)"></div></div><p class="title"><b>Figure&nbsp;2.1.&nbsp;Screenshot of GEMOC Studio Modeling Workbench on the TFSM example (execution and animation).</b></p></div><br class="figure-break"><p><a class="indexterm" name="d0e1428"></a>
<a class="indexterm" name="d0e1432"></a>
<a class="indexterm" name="d0e1438"></a></p><p></p></div><div class="section" title="2.2.&nbsp;Editing model"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="section-editing-model"></a>2.2.&nbsp;Editing model</h2></div></div></div><p>As seen in Section <a class="xref" href="#defining-a-concrete-syntax-section" title="1.6.&nbsp;Defining a Concrete Syntax">Section&nbsp;1.6, &#8220;Defining a Concrete Syntax&#8221;</a>, an xDSML can provide different concrete syntaxes.</p><div class="section" title="2.2.1.&nbsp;Editing model with Sirius"><div class="titlepage"><div><div><h3 class="title"><a name="modeling-workbench-editing-model-with-sirius-section"></a>2.2.1.&nbsp;Editing model with <a class="indexterm" name="d0e1453"></a>Sirius</h3></div></div></div><p>After defining your editor with <a class="indexterm" name="d0e1459"></a>Sirius (see <a class="xref" href="#defining-a-concrete-syntax-with-sirius-section" title="1.6.2.&nbsp;Defining a Concrete Syntax with Sirius">Section&nbsp;1.6.2, &#8220;Defining a Concrete Syntax with Sirius&#8221;</a> for more details about <a class="indexterm" name="d0e1465"></a>Sirius), you can use your editor as described in the <a class="link" href="http://www.eclipse.org/sirius/doc/user/Sirius%20User%20Manual.html" target="_top">Sirius User Manual</a>.</p><div class="section" title="2.2.1.1.&nbsp;Debug specific"><div class="titlepage"><div><div><h4 class="title"><a name="_debug_specific"></a>2.2.1.1.&nbsp;Debug specific</h4></div></div></div><p>If you have defined a debug representation using <a class="xref" href="#defining-a-debug-representation-section" title="1.10.&nbsp;Defining a debug representation">Section&nbsp;1.10, &#8220;Defining a debug representation&#8221;</a>. You can use the following actions to start a debug session and toggle breakpoints.</p><div class="informalfigure"><div class="mediaobject"><img src="./images/workbench/modeling/debug_actions.png" alt="Debug actions"></div></div></div></div><div class="section" title="2.2.2.&nbsp;Editing model with EMF Tree Editor"><div class="titlepage"><div><div><h3 class="title"><a name="section-modeling-workbench-editing-model-with-emf-tree-editor"></a>2.2.2.&nbsp;Editing model with <a class="indexterm" name="d0e1489"></a>EMF Tree Editor</h3></div></div></div><p>TODO</p></div></div><div class="section" title="2.3.&nbsp;Executing model"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="modeling-workbench-executing-model-section"></a>2.3.&nbsp;Executing model</h2></div></div></div><div class="section" title="2.3.1.&nbsp;Launch configuration"><div class="titlepage"><div><div><h3 class="title"><a name="_launch_configuration"></a>2.3.1.&nbsp;Launch configuration</h3></div></div></div><p>The Gemoc launch configuration offers both a Run and a Debug mode.</p><div class="section" title="2.3.1.1.&nbsp;General options"><div class="titlepage"><div><div><h4 class="title"><a name="_general_options"></a>2.3.1.1.&nbsp;General options</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Model to execute : this is the model that will be run</li><li class="listitem">xDSML : this field allows to select among the valid variants of the executable language that are available for the model (Ie. the combinaison of DSA, DSE and MoCC that can be used on the given domain model)</li><li class="listitem"><p class="simpara"><a class="indexterm" name="d0e1515"></a>Decider : this field allows to select the solver strategy used by the engine when several <a class="indexterm" name="d0e1519"></a>Logical Steps can be triggered. Possible choice are :</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">Solver proposition : the solver internal stategy will be used to selecton Logical Step</li><li class="listitem">Random : will randomly select one of the available Logical Step (warning: execution cannot be reproduced when using this Decider)</li><li class="listitem">Ask user : (available only in Debug mode), this option will use the <a class="link" href="#modeling-workbench-executing-model-logical-step-view-section" title="2.3.3.&nbsp;Logical Steps View">Logical Step View</a> or the <a class="link" href="#modeling-workbench-executing-model-timeline-view-section" title="2.3.4.&nbsp;Timeline View">Timeline View</a> to present the available Logical Steps and pause if there are more than one Logical Step. The user will then need to click on one of the Logical Step to continue.</li><li class="listitem">Ask user (Step by step) : (available only in Debug mode), this option is similar to the previous one. However, it will pause on every Logical Step, even if there is only one Logical Step that can be triggered. This is more or less equivalent as putting a breakpoint on every MSE of the language.</li></ul></div></li></ul></div><p>More Deciders will be developped (for example for playing predefined scenario).</p></div><div class="section" title="2.3.1.2.&nbsp;Run mode"><div class="titlepage"><div><div><h4 class="title"><a name="_run_mode"></a>2.3.1.2.&nbsp;Run mode</h4></div></div></div><p>In run mode, it offers the faster way to run the model.
It cannot be paused. However, you can stop it.
It offers a limited set of views :</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">the <a class="link" href="#modeling-workbench-executing-model-engine-view-section" title="2.3.2.&nbsp;Engine View"></a><a class="indexterm" name="d0e1554"></a><a class="link" href="#modeling-workbench-executing-model-engine-view-section" title="2.3.2.&nbsp;Engine View">Engine View</a> allows to stop a running model.</li><li class="listitem">the <a class="link" href="#modeling-workbench-executing-model-timeline-view-section" title="2.3.4.&nbsp;Timeline View"></a><a class="indexterm" name="d0e1563"></a><a class="link" href="#modeling-workbench-executing-model-timeline-view-section" title="2.3.4.&nbsp;Timeline View">Timeline View</a> is displayed at the end of the execution in order to control the resulting execution trace.</li></ul></div><p>If more feed back are required, please use one of the front end or back end available for the xDSML.</p></div><div class="section" title="2.3.1.3.&nbsp;Debug mode"><div class="titlepage"><div><div><h4 class="title"><a name="_debug_mode"></a>2.3.1.3.&nbsp;Debug mode</h4></div></div></div><p>In debug mode, the engine offers more control on the execution.
It allows to pause, add break point, and run in a step by step mode.</p><p>It reuses the Eclipse Debug perspective and some of its views and add some Gemoc specific views.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">the <a class="link" href="#modeling-workbench-executing-model-engine-view-section" title="2.3.2.&nbsp;Engine View"></a><a class="indexterm" name="d0e1582"></a><a class="link" href="#modeling-workbench-executing-model-engine-view-section" title="2.3.2.&nbsp;Engine View">Engine View</a> allows to stop a running model.</li><li class="listitem">the <a class="link" href="#modeling-workbench-executing-model-timeline-view-section" title="2.3.4.&nbsp;Timeline View"></a><a class="indexterm" name="d0e1591"></a><a class="link" href="#modeling-workbench-executing-model-timeline-view-section" title="2.3.4.&nbsp;Timeline View">Timeline View</a> is displayed during all the simulation.</li><li class="listitem">the <a class="link" href="#modeling-workbench-executing-model-event-manager-view-section" title="2.3.5.&nbsp;Event Manager View"></a><a class="indexterm" name="d0e1600"></a><a class="link" href="#modeling-workbench-executing-model-event-manager-view-section" title="2.3.5.&nbsp;Event Manager View">Event Manager View</a> is displayed during all the simulation.</li><li class="listitem">the <a class="link" href="#modeling-workbench-executing-model-animation-view-section" title="2.3.6.&nbsp;Animation View"></a><a class="indexterm" name="d0e1609"></a><a class="link" href="#modeling-workbench-executing-model-animation-view-section" title="2.3.6.&nbsp;Animation View">Event Manager View</a> is displayed during all the simulation. It can display both an animation layer and a debug layer.</li><li class="listitem">the <a class="link" href="#modeling-workbench-executing-model-debug-view-section" title="2.3.7.&nbsp;Debug View">Debug View</a>. This view presents an interface for Step by Step execution at the Logical Step level or even at the DSA level.</li><li class="listitem">the <a class="link" href="#modeling-workbench-executing-model-variable-view-section" title="2.3.8.&nbsp;Variable View">Variable View</a>. This view presents the <a class="indexterm" name="d0e1626"></a>Runtime Data as a (EMF based) tree.</li></ul></div><p>When running a simulation in Debug mode, it is configured to activate automatically the Debug layer and the Animation layer in the Animation view.</p></div><div class="section" title="2.3.1.4.&nbsp;Backends and frontends"><div class="titlepage"><div><div><h4 class="title"><a name="_backends_and_frontends"></a>2.3.1.4.&nbsp;Backends and frontends</h4></div></div></div><p>Back ends and front ends offer additionnal view that can respectivly display informations from the running model or provide event input to the running model.</p><p>These backends and front ends usually open dedicated views. These views are always opened in all modes (Run or Debug).</p></div></div><div class="section" title="2.3.2.&nbsp;Engine View"><div class="titlepage"><div><div><h3 class="title"><a name="modeling-workbench-executing-model-engine-view-section"></a>2.3.2.&nbsp;Engine View</h3></div></div></div><p>The engine view displays a list of execution engine and their statuses:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">its number of execution steps,</li><li class="listitem">its current running status,</li><li class="listitem">and its logical steps deciding strategy.</li></ul></div><p><span class="inlinemediaobject"><img src="./images/workbench/modeling/engine_view.png" alt="Engine View"></span></p></div><div class="section" title="2.3.3.&nbsp;Logical Steps View"><div class="titlepage"><div><div><h3 class="title"><a name="modeling-workbench-executing-model-logical-step-view-section"></a>2.3.3.&nbsp;Logical Steps View</h3></div></div></div><p>The logical steps view displays the list of possible future execution. This list is provided by the solver. This view is organized around a tree. For each logical step, its underlying events can be seen and possibly for each event the associated operation is visible.</p><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p xmlns="">This view displays nothing when execution runs in "run mode", per say this view is only of use when running in "debug mode".</p></div><p><span class="inlinemediaobject"><img src="./images/workbench/modeling/logical_steps.png" alt="Logical Steps"></span></p></div><div class="section" title="2.3.4.&nbsp;Timeline View"><div class="titlepage"><div><div><h3 class="title"><a name="modeling-workbench-executing-model-timeline-view-section"></a>2.3.4.&nbsp;Timeline View</h3></div></div></div><p>This view represents the line of the model&#8217;s execution. It displays:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">the different logical steps proposed by the solver in the past in blue color,</li><li class="listitem">the selected logical steps at each execution step in green color,</li><li class="listitem">and the possible future logical steps in yellow color,</li><li class="listitem">the model specific events for each logical step.</li></ul></div><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p xmlns="">The possible future logical steps are shown under the condition that the model is executing.</p></div><p><span class="inlinemediaobject"><img src="./images/workbench/modeling/timeline.png" alt="Timeline"></span></p><p>In addition to displaying information, it also provides interaction with the user. During execution, it is possible to come back into the past by double-clicking on any of the blue logical steps. It does two things:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">it resets the solver&#8217;s state to the selected execution step,</li><li class="listitem">and it resets the model&#8217;s state to the selected execution step.</li></ol></div></div><div class="section" title="2.3.5.&nbsp;Event Manager View"><div class="titlepage"><div><div><h3 class="title"><a name="modeling-workbench-executing-model-event-manager-view-section"></a>2.3.5.&nbsp;Event Manager View</h3></div></div></div></div><div class="section" title="2.3.6.&nbsp;Animation View"><div class="titlepage"><div><div><h3 class="title"><a name="modeling-workbench-executing-model-animation-view-section"></a>2.3.6.&nbsp;Animation View</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Debug Layer</li><li class="listitem">Animation Layer</li></ul></div></div><div class="section" title="2.3.7.&nbsp;Debug View"><div class="titlepage"><div><div><h3 class="title"><a name="modeling-workbench-executing-model-debug-view-section"></a>2.3.7.&nbsp;Debug View</h3></div></div></div><p>This view is part of the Debug perspective.
It presents an interface for Step by Step execution at the Logical Step level or even at the DSA level.
When an execution is paused, this view presents the current Logical Step.</p><p>When paused on a <a class="indexterm" name="d0e1733"></a>Logical Step, the Step over command allows to go to the next Logical Step. The Step Into command allows to run separatly each of the internal DSA calls associated to the Logical Step.</p></div><div class="section" title="2.3.8.&nbsp;Variable View"><div class="titlepage"><div><div><h3 class="title"><a name="modeling-workbench-executing-model-variable-view-section"></a>2.3.8.&nbsp;Variable View</h3></div></div></div><p>This view is available on the Debug perspective.
When an execution is paused, this view presents the current <a class="indexterm" name="d0e1742"></a>Runtime Data as an EMF based tree.</p></div></div></div><div class="chapter" title="Chapter&nbsp;3.&nbsp;GEMOC xDSML definition tutorial with Automaton DSML"><div class="titlepage"><div><div><h2 class="title"><a name="_gemoc_xdsml_definition_tutorial_with_automaton_dsml"></a>Chapter&nbsp;3.&nbsp;GEMOC xDSML definition tutorial with Automaton DSML</h2></div></div></div><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Warning</h2><p xmlns="">This tutorial is a work in progress and is not yet finished.
It still contains TODO and must be polished.</p></div><div class="section" title="3.1.&nbsp;Introduction"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_introduction_3"></a>3.1.&nbsp;Introduction</h2></div></div></div><p>The purpose of this tutorial is to explain on a simple example how to
define an xDSML (eXecutable Domain Specific Modeling Language).  It is
structured as follows.  First, we recall the
<a class="link" href="#sec-GEMOC-approach" title="3.2.&nbsp;The GEMOC Approach for defining eXecutable DSML (xDSML)">GEMOC approach</a>, including
<a class="link" href="#sec-GEMOC-architecture" title="3.2.1.&nbsp;Architecture of a GEMOC xDSML">architecture of
the GEMOC xDSML</a> and the <a class="link" href="#sec-GEMOC-characteristics" title="3.2.2.&nbsp;Main Characteristics of the GEMOC Process.">main
characteristics of a GEMOC process</a>.
Then, we present the <a class="link" href="#sec-GEMOC-process" title="3.2.3.&nbsp;Recommanded GEMOC Process">overall process</a> that will be
illustrated by this tutorial. The next sections illustrate the process
on a concrete example, the <a class="link" href="#automata-domain" title="3.3.1.&nbsp;Application Domain: Automata">definition of automata</a>.
We describe the <a class="link" href="#sec-requirements" title="3.3.&nbsp;Definition of the requirements/expectations on the xDSML">application domain</a>, and then
we split the development in <a class="link" href="#sec-increment1" title="3.5.&nbsp;Increment 1 : Deterministic Automata">several increments</a> to
illustrate different aspects of the GEMOC studio.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><a class="link" href="#sec-increment1" title="3.5.&nbsp;Increment 1 : Deterministic Automata">First implementation</a> of the deterministic
Automata xDSML with a focus on the DSA.</li><li class="listitem"><a class="link" href="#sec-increment2" title="3.6.&nbsp;Increment 2: new MoCC and DSA for Automata (using State Machines of MoCCML)">Second implementation</a> with the same MoCC defined using MoCCML and a state machine</li><li class="listitem"><a class="link" href="#sec-increment3" title="3.7.&nbsp;Increment 3: new MoCC and DSA for Automata (MoCC focused version)">Second implementation</a> with a focus on the MoCC
(to show that a balance must be found)</li><li class="listitem"><a class="link" href="#sec-visualization" title="3.8.&nbsp;Increment 4: Graphical visualization">Graphical visualization</a>.</li><li class="listitem"><a class="link" href="#sec-nondeterministic" title="3.9.&nbsp;Increment 5: Consider nondeterministic automata.">Nondeterministic automata</a> (evolution of the previous example)</li><li class="listitem"><a class="link" href="#sec-pushdown" title="3.10.&nbsp;Increment 6: Pushdown automaton">Pushdown Automata</a> (demonstrate the feedback mechanism)</li><li class="listitem"><a class="link" href="#sec-userCode" title="3.11.&nbsp;Increment 7: Call of user actions">Integration of user defined code</a> (connect the
automata to a specific graphical interface).</li><li class="listitem"><p class="simpara"><a class="link" href="#sec-otherIncrements" title="3.12.&nbsp;Increment: TBD">Other increments</a>:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Composite DSE</li><li class="listitem">Composition operators</li><li class="listitem">Traces</li></ul></div></li></ol></div><p><span class="strong"><strong>Conventions used in this tutorial</strong></span></p><p>Normal text is used to explain the process and  give some rationals
and the proposed solutions.</p><div class="informalexample"><p>This kind of paragraph corresponds to manipulation to be performed of the GEMOC studio, either the Language Workbench or the Modeling Workbench.</p></div></div><div class="section" title="3.2.&nbsp;The GEMOC Approach for defining eXecutable DSML (xDSML)"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sec-GEMOC-approach"></a>3.2.&nbsp;The GEMOC Approach for defining eXecutable DSML (xDSML)</h2></div></div></div><div class="section" title="3.2.1.&nbsp;Architecture of a GEMOC xDSML"><div class="titlepage"><div><div><h3 class="title"><a name="sec-GEMOC-architecture"></a>3.2.1.&nbsp;Architecture of a GEMOC xDSML</h3></div></div></div><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p xmlns="">We consider that the Abstract Syntax (AS) of the DSML is already
defined and thus that its design is not part of the GEMOC xDSML process.
Nevertheless, the process could easily be extended with a new step
which consists in defining the AS and its Concrete Syntaxes (CS).</p></div><p>Once the AS is defined&#8201;&#8212;&#8201;and possibly the CS ---, the execution
semantics of the DSML can be defined.   It includes the definition
of:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">the <span class="strong"><strong>DSA</strong></span> (Domain Specific Actions) which includes EF (Execution
Functions) and ED (Execution Data): it defines the runtime data
and the actions to handle them,</li><li class="listitem">the <span class="strong"><strong>MOCC</strong></span> (Model of Concurrency and Communication) which deals with
concurrency aspects,</li><li class="listitem">the <span class="strong"><strong>DSE</strong></span> which maps DSA and MOCC,</li><li class="listitem">the <span class="strong"><strong>visualization</strong></span> which provides views to control and monitor the
execution of models conforming to the xDSML.</li></ul></div><p>There is no mandatory order in which these different parts have to be
built.  Thus, a first description of the process can focus on this
characteristic (<a class="link" href="#GEMOC-process-overview" title="Figure&nbsp;3.1.&nbsp;Overview of the GEMOC process">see overview process</a>).
The xDSML parts may be built in any order.
This process stresses a first step which consists in eliciting the
requirements on the expected execution semantics.  This
elicitation is not always easy to achieve for the system engineers,
thus we believe that providing samples of models as well as some
scenarios describing their execution is a good way
for system engineers to describe they expectations.</p><p>Furthermore, it is recommended to built the xDSML using increments and
iterations.  Increments address requirements the ones after the
others.  Iterations allow to rework the different components until the
requirements are fulfilled.</p><div class="figure"><a name="GEMOC-process-overview"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/tutorial/xDSML-definition-process-overview.png" alt="Overview of the GEMOC process"></div></div><p class="title"><b>Figure&nbsp;3.1.&nbsp;Overview of the GEMOC process</b></p></div><br class="figure-break"><p><a class="indexterm" name="d0e1890"></a>
<a class="indexterm" name="d0e1898"></a>
<a class="indexterm" name="d0e1904"></a></p><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p xmlns="">For clarity, the iteration to choose the next increment is not
represented of the diagram.</p></div></div><div class="section" title="3.2.2.&nbsp;Main Characteristics of the GEMOC Process."><div class="titlepage"><div><div><h3 class="title"><a name="sec-GEMOC-characteristics"></a>3.2.2.&nbsp;Main Characteristics of the GEMOC Process.</h3></div></div></div><p>The main characteristics of the definition of an \xdsml according to \gemoc
are the following:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">It is <span class="strong"><strong>user-oriented</strong></span>.  Indeed, we believe that to build the right
xDSML, the end-users' expectations have to be handled in the first
place.  As GEMOC targets simulation of models, it is important to
elicit the expectations of the end-users, i.e. the system engineers,
in term of simulation of its models.</li><li class="listitem">It is <span class="strong"><strong>incremental</strong></span>.  All end-users expectations will not be
handled all at the same time but we recommend to define several increments
that will progressively includes these expectations seen as requirements.
The purpose is to make the definition of the execution semantics simpler
by gradually integrating the requirements, and thus the difficulties.</li><li class="listitem">It is <span class="strong"><strong>iterative</strong></span>.  For an increment, all the components will
certainly not be done right and complete at the first time.  Thus,
iterations will be necessary to tweak the definitions of the xDSML.
Examples provided by the end users will help in deciding whether an
iteration is finished or not.</li><li class="listitem">It is <span class="strong"><strong>highly concurrent</strong></span>.  Indeed, the main steps can be run at
the same time, possibly by different persons (even if it not always very
easy using Eclipse).  We can imagine that the DSE model and mappings can
be first defined to specify the overall architecture of the xDSML
semantics, including requirements on DSA as specification of the expected
execution functions and requirements on the MoCC as expected MoCC events
and relations on them.  The MoCC libraries, the DSA implementation and the
animator can then be developed at the same time, by different persons.
Of course the DSE model can still be changed and the others updated.</li></ul></div></div><div class="section" title="3.2.3.&nbsp;Recommanded GEMOC Process"><div class="titlepage"><div><div><h3 class="title"><a name="sec-GEMOC-process"></a>3.2.3.&nbsp;Recommanded GEMOC Process</h3></div></div></div><p>An xDSML is a language that targets a specific purpose. When defining
such a language it is important to first identify that purpose so as
to build the right language.  Thus, we propose a methodology which
focuses on the end-user expectations --- why models are animated? ---
and then build the different parts of the xDSML to fulfill these
expectations.</p><p>In the context of the GEMOC project, the main aim is to be able to
animate and simulate heterogeneous models based on different xDSMLs.
Thus the end-user expectations will encompass the different xDSML
involved in the model to build.  This global process which includes
the dispatch of expectations on the different parts of a model will be
addressed in a future revision of this document when all constituents
will be further defined.</p><p>The main steps to achieve the definition of an xDSML according to the
GEMOC approach are described hereafter. They are summarized as a UML
activity diagram.  Package notation is used to group activities by
domain (and could be considered as a kind of compound activity).</p><div class="figure"><a name="GEMOC-process"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/tutorial/xDSML-definition-process-general.png" alt="Recommended GEMOC Process"></div></div><p class="title"><b>Figure&nbsp;3.2.&nbsp;Recommended GEMOC Process</b></p></div><br class="figure-break"><p><a class="indexterm" name="d0e1959"></a>
<a class="indexterm" name="d0e1965"></a></p><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Warning</h2><p xmlns="">This process is the recommanded one, and the one used in this
tutorial.  Nevertheless, it is possible to define an xDSML with other
processes depending on the background of the language designer, his
knowledge of the GEMOC approach, the considered DSML, etc.</p></div></div></div><div class="section" title="3.3.&nbsp;Definition of the requirements/expectations on the xDSML"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sec-requirements"></a>3.3.&nbsp;Definition of the requirements/expectations on the xDSML</h2></div></div></div><p>The first step consists in describing the system engineers'
expectation concerning the considered domain in terms of execution
semantics and visualization at runtime.  As it is often a complex task
for system engineers to formally describe their expectations, we
advocate to define them through examples to complement the informal
descriptions.</p><p>An example is composed of:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">A <span class="strong"><strong>model</strong></span> which is conform to the DSML AS).</li><li class="listitem">A <span class="strong"><strong>scenario</strong></span> which describes a particular use of the model.  A scenario
is considered of events, that is stimuli that trigger evolution of the model.</li><li class="listitem"><span class="strong"><strong>Expected results</strong></span> while the scenario is played.  Expected results include
values of runtime data, possible next events, etc. They are way to describe the expected behavioral semantics.</li></ol></div><p>Obviously, it is possible to share some elements between several examples.
For example, the same model may be used by several examples.</p><p>This steps is important to understand the expectations of the system
engineers.  As providing a formal specification of his/her
expectations is generally not easy, giving some examples including
expected results on specific scenario is a good way to specify through
examples.</p><p>Furthermore, these examples will be used to validate the implemented
xDSML.</p><p>Finally they can be used to define the increments in the development
of the xDSML by defining the set of models and scenarios each
increment must handle.</p><div class="section" title="3.3.1.&nbsp;Application Domain: Automata"><div class="titlepage"><div><div><h3 class="title"><a name="automata-domain"></a>3.3.1.&nbsp;Application Domain: Automata</h3></div></div></div><p>We consider the domain of <span class="strong"><strong>automata</strong></span>.  An automaton may be used to
specify a language defined on a set of symbols called alphabet.  The
<a class="link" href="#">following example</a> shows an automaton
which recognizes the language <span class="emphasis"><em>a*ba*</em></span>.</p></div><div class="section" title="3.3.2.&nbsp;Description of automata"><div class="titlepage"><div><div><h3 class="title"><a name="_description_of_automata"></a>3.3.2.&nbsp;Description of automata</h3></div></div></div><p>An automaton is composed of a finite set of states, transitions and
symbols. An automaton must have exactly one initial state (and thus at
least one state).  One transition connects a source state to a target
state and is labelled by a symbol.
On the <a class="link" href="#automata-aSbaS" title="Figure&nbsp;3.3.&nbsp;Automata which reads a*ba*">example</a>, states are represented by circles,
doubled-circled
states are accepting states (or final states).
A transition is depicted as an arrow from the input state to the
output state.
An arrow without input state points to the initial state.</p><div class="figure"><a name="automata-aSbaS"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/tutorial/automate-aSbaS.png" alt="Automata which reads a*ba*"></div></div><p class="title"><b>Figure&nbsp;3.3.&nbsp;Automata which reads a*ba*</b></p></div><br class="figure-break"></div><div class="section" title="3.3.3.&nbsp;Informal behavior"><div class="titlepage"><div><div><h3 class="title"><a name="_informal_behavior"></a>3.3.3.&nbsp;Informal behavior</h3></div></div></div><p>An automaton is used to decide whether a word&#8201;&#8212;&#8201;a sequence of symbols&#8201;&#8212;&#8201;is part of a language (the word is accepted by the automaton) or
not (the word is rejected).
An automaton gets one input at a time.
When run, an automaton has a current state which is the initial state
at the beginning.  Then, at each step, on input symbol is received. If
there is no transition labelled with this symbol outgoing from the
current state, then the word is rejected.  If it exists such a
transition, the symbol is accepted and the current state of the
automaton becomes the state targeted by the transition.
A work is accepted if all its symbols have been accepted and the last
current state of the automaton is an accept state.  Otherwise the work
is rejected.</p><p>An automaton is nondeterministic if it contains a transition with no
symbol (it may be fired as soon as its source state is the current
state) or if it contains two transitions with the same source state
and the same symbol.  An automaton is either deterministic or
nondeterministic.</p></div><div class="section" title="3.3.4.&nbsp;Scenarios"><div class="titlepage"><div><div><h3 class="title"><a name="_scenarios"></a>3.3.4.&nbsp;Scenarios</h3></div></div></div><p>The scenarios related to automata shared the same structure as they
all consist in checking whether a work is accepted or rejected by an
automaton. It thus consists in feeding the automaton with letters
(symbols) of the work (from the first to the last one) and then to
indicate that the end of the work has been reached.</p><p>If we consider the word <code class="literal">aba</code>, the input scenario is :</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">Feed symbol `a'</li><li class="listitem">Feed symbol `b'</li><li class="listitem">Feed symbol `a'</li><li class="listitem">Terminate</li></ol></div><p>The automaton will then answer. The response can be 'accepted' or
'refused'.</p></div><div class="section" title="3.3.5.&nbsp;Examples of models"><div class="titlepage"><div><div><h3 class="title"><a name="_examples_of_models"></a>3.3.5.&nbsp;Examples of models</h3></div></div></div><p>We give here some examples of automaton with the language they model
and some examples of accepted and rejected words.</p><div class="variablelist"><dl><dt><span class="term">Deterministic automata</span></dt><dd>We first consider some simple example of
automata for which there is only one outgoing transition for a
state.</dd></dl></div><div class="figure"><a name="automata-abcdS"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/tutorial/automate-abcd-star.png" alt="Automata which reads (ABCD)*"></div></div><p class="title"><b>Figure&nbsp;3.4.&nbsp;Automata which reads (ABCD)*</b></p></div><br class="figure-break"><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Examples of accepted words: (empty word), ABCD,
ABCDABCD, etc.</li><li class="listitem">Examples of rejected words: ABC, ABCDA, D, etc.</li></ul></div><p>TODO: Other examples:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">only one state</li><li class="listitem">several states and only one final state</li><li class="listitem">several outgoings transition for one state</li><li class="listitem">several final states.</li></ul></div><p>Dictionary Automata:</p><div class="figure"><a name="automata-mots"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/tutorial/automate-mots.png" alt="Automata which reads words"></div></div><p class="title"><b>Figure&nbsp;3.5.&nbsp;Automata which reads words</b></p></div><br class="figure-break"><p>The only accepted words are: IL, ILE, ILES, ILS, ILOT, ILOTS</p><p>TODO: To be translated in English.</p><div class="variablelist"><dl><dt><span class="term">Nondeterministic automata</span></dt><dd>TODO: Several transitions with the same symbol.</dd></dl></div><p>TODO: A transition with no associated symbol (automatic transition?)</p><div class="figure"><a name="automata-ccomm"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/tutorial/automate-ccomm.png" alt="Automata which C commentary"></div></div><p class="title"><b>Figure&nbsp;3.6.&nbsp;Automata which reads C commentary</b></p></div><br class="figure-break"><div class="variablelist"><dl><dt><span class="term">Pushdown automata</span></dt><dd>For example to check that open and close symbols are well suited.</dd></dl></div></div></div><div class="section" title="3.4.&nbsp;Creating an xDSML Project"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_creating_an_xdsml_project"></a>3.4.&nbsp;Creating an xDSML Project</h2></div></div></div><div class="informalexample"><p>First, start by creating a new xDSML project (<span class="emphasis"><em>New &gt; Project &gt; GEMOC
Project / new xDSML Project</em></span>), with your desired name (for instance
"com.example.automata").  In the created project, we can open the
project.xdsml file. The xDSML view summarizes all the important
resources used in an xDSML project (which are part of and managed by
other projects).  This view is a kind of dashboard or control center to
have quick access to any important resource of the project.</p></div></div><div class="section" title="3.5.&nbsp;Increment 1 : Deterministic Automata"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sec-increment1"></a>3.5.&nbsp;Increment 1 : Deterministic Automata</h2></div></div></div><div class="section" title="3.5.1.&nbsp;Specification of the xDSML interface"><div class="titlepage"><div><div><h3 class="title"><a name="_specification_of_the_xdsml_interface"></a>3.5.1.&nbsp;Specification of the xDSML interface</h3></div></div></div><p>In this step, we describe the interface of the language.  It includes
interface to the system engineers (for example AS and CS) but also to
other models and xDSML (AS, DSE, EF and ED).</p></div><div class="section" title="3.5.2.&nbsp;Define the Abstract Syntax (AS)"><div class="titlepage"><div><div><h3 class="title"><a name="_define_the_abstract_syntax_as"></a>3.5.2.&nbsp;Define the Abstract Syntax (AS)</h3></div></div></div><div class="informalexample"><p>To define the AS we can either select an existing project (Browse
button) or create a new one.  To create a new one, we click on "EMF
project" on the xDSML view of project.xdsml.
Let us call it "org.example.automata.model".
Let us call our package "automata". We will use the default ns URI and ns
Prefix. We may then edit the Ecore MetaModel either with the graphical
editor or with the tree editor.</p></div><div class="figure"><a name="fig-automata-classDiagram"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/tutorial/automata-as.png" alt="Automata Abstract Syntax (Metamodel)"></div></div><p class="title"><b>Figure&nbsp;3.7.&nbsp;Automata Metamodel</b></p></div><br class="figure-break"><p>An Automaton is a composed of States (at least one), Transitions and
Symbols.  An automaton has an initial state (reference).  A state can
be a final state (attribute).   A Transition must have a source and a
target, both of type State. A Transition is fired upon occurrence of
one of its associated Symbol.
For practical reasons, we also add EOpposite references whenever
possible.
Therefore States, Transitions and Symbols know which Automata they
belong to.
Symbols know which Transition(s) they are referenced by.
States know their outgoing and incoming Transitions.  Automatas,
States, Transitions and Symbols all have a name (factorized in the
NamedElement metaclass).</p><div class="informalexample"><p>Once the Ecore MetaModel is done, we can come back to the xDSML view.
The "EMF project" and the  "Genmodel URI" have been updated.</p><p>Set the "Root container model element" to "automata::Automata".</p><p>Open the associated Genmodel (click on Genmodel URI) to generate the
Model Code, Edit Code and Editor Code by right clicking on the root of
the Genmodel (right-click on root element). The packages "automata",
"automata.impl" and "automata.util" as well as the plug-ins
"com.example.automata.model.edit" and
"com.example.automata.model.editor" are generated.</p></div></div><div class="section" title="3.5.3.&nbsp;Define concrete syntaxes (CS)"><div class="titlepage"><div><div><h3 class="title"><a name="_define_concrete_syntaxes_cs"></a>3.5.3.&nbsp;Define concrete syntaxes (CS)</h3></div></div></div><p>A concrete syntax is convenient way to view or edit a model.  It can
be textual (Xtext project for example) or graphical (Sirius project
for example).  They can be added to the xDSML project like we have
done for AS.</p><p>For now, we postpone the design of the Concrete Syntaxes until we are
sure the semantics has been correctly implemented.</p><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Warning</h2><p xmlns="">Therefore, a graphical Concrete Syntax is required in order to use the
graphical animator later on during simulations.</p></div></div><div class="section" title="3.5.4.&nbsp;Identifying DSE"><div class="titlepage"><div><div><h3 class="title"><a name="_identifying_dse"></a>3.5.4.&nbsp;Identifying DSE</h3></div></div></div><p>Domain Specific Events are part of the interface of the language and
allow communication with the system engineer and the other models of
the system.</p><p>For our Automata xDSML, we decide that there are 3 events
which are of relevant interest to the environment (user through a GUI
or another xDSML through language composition operators):</p><div class="variablelist"><dl><dt><span class="term">Initializing the automata</span></dt><dd>occurs only once at the start of the simulation</dd><dt><span class="term">Injecting a symbol</span></dt><dd>occurs when the user gives a new symbol of the work to test</dd><dt><span class="term">Terminating the automata</span></dt><dd>occurs when the user has given all the symbols of the word.  It is
used to indicate the end on the word.</dd></dl></div><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Tip</h2><p xmlns="">Other DSE may be of interest, for example firing a transition,
rejecting a symbol, etc. They would be output events (the already
identified ones being input events).</p></div><div class="informalexample"><p>At this moment, DSE are defined in an ECL (Event Constraint Language) file.
In the xDSML view, click on <span class="emphasis"><em>ECL Project</em></span> to create a DSE Project.
Let us name it "com.example.automata.dse" (it is the proposed name).
In the corresponding field, place the path to the Ecore MetaModel
("platform:/resource/com.example.automata.model/model/automata.ecore")
and make sure the "Root container model element" is
"automata::Automata" and name the file "automataDSE". Ignore the error
that is displayed.</p><p>Right click on the <span class="emphasis"><em>ECL project</em></span> in the DSE definition part and make
sure that in "configure", the "DSE builder" functionality is active.</p><p>An error is indicated in the newly created project. To correct it,
fill-in the "moc2as.properties" file by completing the property with
the name of the root element. In our case, that is "rootElement =
Automata".</p></div><div class="informalexample"><p>For now, we will complete the ECL file with the following elements:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><span class="strong"><strong>Metamodel import:</strong></span> (already initialized) Domain-Specific Events
and MoCC constraints are defined in the context of a concept from
the AS, so the first thing we need is to import the metamodel.</li></ul></div><pre class="screen">import 'platform:/resource/com.example.automata.model/model/automata.ecore'</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><span class="strong"><strong>Domain-Specific Events specification:</strong></span> here we can define MoccEvents
and a mapping towards EOperations present in the Metamodel (XXX). The
first step is to identify which behaviors should be schedulable by
the MoCC, and which should be seen as part of the behavioral
interface of the xDSML.</li></ul></div><p>Therefore, we define three Domain-Specific Events by defining three MoccEvents each referencing an Execution Function (implemented later).</p><pre class="screen">package automata
	context Automata
		def: mocc_initialize : Event = self.initialize()
		def: mocc_terminate : Event = self.terminate()

	context Symbol
		def: mocc_occur : Event = self.occur()
endpackage</pre></div><p>TODO: Write DSE without mapping them to DSA.</p><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Warning</h2><p xmlns="">The signature of the Execution Functions needs to be present in the
MetaModel. Therefore, we need to modify the Ecore MetaModel and add
the three following operations:</p><div xmlns="" class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Automata.initialize()</li><li class="listitem">Automata.terminate()</li><li class="listitem">Symbol.occur()</li></ul></div><p xmlns="">To represent methods with Void as return type in EMF, do not complete
the field "EType" of the EOperations.</p></div><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Tip</h2><p xmlns="">If the AS is changed (automata.ecore), we have to do "Reload&#8230;&#8203;"
on the genmodel, generate again the Model, Edit and Editor, and
re-register the ecore.  Nevertheless, the ECL is not always able to
see the changes.  In such a case close the editor and open it again.
It should work.</p></div></div><div class="section" title="3.5.5.&nbsp;Defining Domain-Specific Actions (DSA)"><div class="titlepage"><div><div><h3 class="title"><a name="_defining_domain_specific_actions_dsa"></a>3.5.5.&nbsp;Defining Domain-Specific Actions (DSA)</h3></div></div></div><p>DSA includes the definition of Execution Data (ED) and Execution
Functions (EF).  They are both implemented in Kermeta 3 in 'K3 Aspect
project' whose lastname is, by convention, 'k3dsa'.</p><div class="informalexample"><p>Click on <span class="emphasis"><em>K3 project</em></span> in the xDSML view (Behavioral definition / DSA
definition).  The wizard to create of new Kermeta 3 project is
launched with the name of the project initialized (k3dsa is the last
name).</p><p>Default options can be kept except for the value of <span class="emphasis"><em>Use a template
based on ecore file</em></span> field which must be changed from <span class="emphasis"><em>None</em></span> to
<span class="emphasis"><em>Aspect class from ecore file</em></span>.</p><p>We can now finish the wizard.</p><p>Clicking again on <span class="emphasis"><em>K3 project</em></span> will now allow to choose and open
automata.xtend.  It has been initialized with a template that can be
discarded.</p></div><p>We can now complete the Kermeta 3 file (automata.xtend) with the
definition of ED and EF.</p><div class="section" title="3.5.5.1.&nbsp;Execution Data (ED)"><div class="titlepage"><div><div><h4 class="title"><a name="_execution_data_ed"></a>3.5.5.1.&nbsp;Execution Data (ED)</h4></div></div></div><p>We identify two runtime information for Automata.  The first one
stores the current state of the automaton. It is called
'currentState', a reference to State.  Its value is either the one of
the state of the automaton or the 'null' value.  The 'null' value
indicates that a symbol has not been accepted by the automaton.</p><p>The second ED stores the status of the symbols being analysed,
either accepted or rejected.  It is modelled as the 'accepted'
boolean.</p><p>TODO: Define a new class in DSA ErrorState which extends
State?  When in the error state, the automate rejects every symbols.</p><div class="informalexample"><p>To add 'currentState' and 'accepted' execution data, we define them in
an Aspect on the Automata class as follow.</p><pre class="programlisting"><b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color: darkred">@Aspect(className=Automata)</b>
<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">class</b> AutomataAspect {
	<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">public</b> State currentState
	<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">public</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">boolean</b> accepted
}</pre></div><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Warning</h2><p xmlns="">If you plan to use the Graphical animation, then comment the
code above and add this reference to the Ecore Metamodel directly.
This is due to how the animator connects to the Abstract Syntax (for
now).</p></div></div><div class="section" title="3.5.5.2.&nbsp;Execution Functions (EFs)"><div class="titlepage"><div><div><h4 class="title"><a name="_execution_functions_efs"></a>3.5.5.2.&nbsp;Execution Functions (EFs)</h4></div></div></div><p>Here are the execution functions we decide to define. The three first
functions corresponds to the DSE already identified, the other ones
are Helpers which ease the writing of the code of the previous ones.
For each of this operation a logging is done.</p><div class="variablelist"><dl><dt><span class="term">Automata.initialize()</span></dt><dd>initialize the automaton:  set its current state to its initial
state and accepted to true.</dd><dt><span class="term">Automata.terminate()</span></dt><dd>decide whether the sequence of symbols has been accepted or
rejected by the automaton.</dd><dt><span class="term">Symbol.occur()</span></dt><dd>makes the automaton read a new occurrence of this symbol.  It is
the main execution functions. It relies on the following helper
functions.</dd><dt><span class="term">State.getTransitions(Symbol s)</span></dt><dd>returns the list of all the outgoing transitions of this
state which accept the s symbol.
It is a <span class="strong"><strong>Query</strong></span> execution function.</dd><dt><span class="term">Automata.read(Symbol s)</span></dt><dd>This automaton reads the symbol s.  It updates the current state
according to the possible outgoing transitions of the current
state and the symbol s.  If there is only one possible transition,
its target state becomes the new current state (delegated to
Transition.fire() helper).  If there is several possible
transitions, then the automaton is Nondeterministic and an
exception is raised.  Finally, is there is no possible transition,
the current state becomes an error ('currentSate' is set to
'null') the state and the sequence of symbols will be rejected.
If the automaton was already in an error state, then nothing
happens.</dd><dt><span class="term">Transition.fire()</span></dt><dd>change the current state of the
automata: the new state is target state of this transition.
A precondition checks that the source state of the transition is the
current state of the automata.  An exception is thrown if the
precondition fails.</dd></dl></div><p>Here is the complete 'automata.xtend' file with the code of all
execution functions (and execution data).</p><p title="automata.xtend"><b>automata.xtend.&nbsp;</b>
</p><pre class="screen">package automata

import java.util.logging.Level
import java.util.logging.Logger

import static extension automata.AutomataAspect.*
import static extension automata.SymbolAspect.*
import static extension automata.StateAspect.*
import static extension automata.AutomataAspect.*
import static extension automata.TransitionAspect.*

import fr.inria.diverse.k3.al.annotationprocessor.Aspect

@Aspect(className=Automata)
class AutomataAspect {
	static private Logger logger = Logger.getLogger(typeof(Automata).getName())

	public State currentState
	public boolean accepted

	def public void initialize() {
		_self.currentState = _self.initialState;
		_self.accepted = false;
		_self.logger.info("[" + _self.name + "] Initialized, currentState is " + _self.currentState.name + ".")
	}

	def public void terminate() {
		_self.logger.info("[" + _self.name + "]" + "Finished.")
		// XXX: ne marche pas
		_self.accepted = _self.currentState != null &amp;&amp; _self.currentState.isFinal
		val cs = _self.states.filter[ it === _self.currentState ]
		_self.accepted = cs.size &gt; 0 &amp;&amp; cs.head.isFinal
		var result = "rejected"	// XXX better way to write it?
		if (_self.accepted) {
			result = "accepted"
		}
		// throw new RuntimeException("Finished. Word is " + result)
			// throwing an exception is the only way for the moment to
			// force the simulation to end.
	}

	//@ Helper with arguments
	def void read(Symbol s) {
		_self.logger.info("[" + _self.name + "]" + "read(" + s.name + ").")
		if (_self.currentState == null) {
			_self.logger.finer("** Already in the error state!");
		} else {
			val possibleTransitions = _self.currentState.getTransitions(s)
			val size = possibleTransitions.size
			// FIXME: I have not been able to write it with a switch :(
			if (size == 0) {	// No possible transition
				_self.logger.finer("No transition for symbol " + s.name + " from state " + _self.currentState.name)
				_self.currentState = null
				_self.accepted = false	// useful?
			} else if (size == 1) {	// only one possible transition
				var singleTransition = possibleTransitions.head
				_self.logger.finer("Only one possible transition: " + singleTransition.name)
				singleTransition.fire()
			} else {	// nondeterministic
				throw new RuntimeException("Non deterministic automaton: "
						+ "several transitions accept symbol " + s.name
						+ " in state " + _self.currentState.name)
			}
		}
	}

	def String toString() {
		// XXX To be improved
		var String str = "States : "
		str += _self.states.map[ s | (if (s == _self.currentState)  '[' + s.name + ']' else s.name)
			+ (if (s.isFinal) '!' else '')]
		str
	}

}


@Aspect(className=State)
class StateAspect {

	//@ Helper (Query) with arguments
	def package Iterable&lt;Transition&gt; getTransitions(Symbol s){
		_self.outgoingTransitions.filter[symbols.filter[name == s.name].size &gt; 0]
	}

}


@Aspect(className=Symbol)
class SymbolAspect {
	static private Logger logger = Logger.getLogger(typeof(Symbol).getName())

	def public void occur() {
		_self.logger.info("[" + _self.automata.name + "]" + "Symbol " + _self.name + " occurred.")
		_self.automata.read(_self)	// call an helper DSA
	}

}


@Aspect(className=Transition)
class TransitionAspect {
	static private Logger logger = Logger.getLogger(typeof(Transition).getName())

	def package void fire() {
		Contract.require(_self.automata.currentState === _self.source,
				"[" + _self.automata.name + "]" + "Source state of " + _self.name
				+ " (" + _self.source.name + ") is not the current state (" + _self.automata.currentState.name + ")")
		_self.logger.info("[" + _self.automata.name + "]" + "Fired Transition " + _self.name + ".")
		_self.automata.currentState = _self.target
	}

}</pre><p title="automata.xtend">
</p></div><div class="section" title="3.5.5.3.&nbsp;Testing DSA"><div class="titlepage"><div><div><h4 class="title"><a name="_testing_dsa"></a>3.5.5.3.&nbsp;Testing DSA</h4></div></div></div><p>Once the DSA are written --- or, even better, while they are written
--- we must test them.</p><p>First, we define a method that feeds an automaton with a word (each
letter of the word is considered as a symbol).  It is defined in the
AutomataExecution class.  Here is the xtend code.</p><pre class="programlisting"><b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">package</b> automata

<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">import</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">static</b> extension automata.AutomataAspect.*
<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">import</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">static</b> extension automata.SymbolAspect.*

<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">class</b> AutomataExecution {

	def <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">static</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">boolean</b> accepted(Automata a, String word) {
		println(<i xmlns:fo="http://www.w3.org/1999/XSL/Format" style="color:blue" class="hl-string">"==== What about "</i> + word + <i xmlns:fo="http://www.w3.org/1999/XSL/Format" style="color:blue" class="hl-string">"?"</i>)
		a.initialize()
		<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">for</b> (var i = <span class="hl-number">0</span>; i <b class="hl-tag" style="color: #000096">&lt;</b> <span class="hl-attribute" style="color: #F5844C">word.length();</span> <span class="hl-attribute" style="color: #F5844C">i++)</span> <span class="hl-attribute" style="color: #F5844C">{</span>
			<span class="hl-attribute" style="color: #F5844C">val</span> <span class="hl-attribute" style="color: #F5844C">c</span> = <span class="hl-value" style="color: #993300">word.charAt(i)</span>
			<span class="hl-attribute" style="color: #F5844C">val</span> <span class="hl-attribute" style="color: #F5844C">ss</span> = <span class="hl-value" style="color: #993300">a.symbols.filter[name.equals(</span><i xmlns:fo="http://www.w3.org/1999/XSL/Format" style="color:blue" class="hl-string">""</i> + c)]
			<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">if</b> (ss.size == <span class="hl-number">0</span>) {	<i xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-comment" style="color: darkgreen">// unknown symbol for the automaton</i>
				<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">return</b> false
			} <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">else</b> {
				ss.get(<span class="hl-number">0</span>).occur()
			}
		}
		a.terminate()
		println(<i xmlns:fo="http://www.w3.org/1999/XSL/Format" style="color:blue" class="hl-string">"==== What about "</i> + word + <i xmlns:fo="http://www.w3.org/1999/XSL/Format" style="color:blue" class="hl-string">"? : "</i> + a.accepted)
		a.accepted
	}

}</pre><p>Then, we can write a classical JUnit TestCase that tests an automaton
on some tests using the 'AutomataExecution.accepted(String word)'
method.
Here is an example of such a test case.</p><pre class="programlisting"><b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">package</b> automata;

<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">import</b> org.junit.Test;
<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">import</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">static</b> org.junit.Assert.*;
<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">import</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">static</b> automata.AutomataIO.*;
<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">import</b> org.eclipse.emf.ecore.resource.Resource;

<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">public</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">class</b> AutomataTest {

	<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color: darkred">@Test</b>
	<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">public</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">void</b> testerAStar() {
		Resource model = loadResource(<i xmlns:fo="http://www.w3.org/1999/XSL/Format" style="color:blue" class="hl-string">"../org.example.automata.as/model/aS.xmi"</i>);	<i xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-comment" style="color: darkgreen">// XXX</i>
		Automata a = (Automata) model.getContents().get(<span class="hl-number">0</span>);

		assertTrue(AutomataExecution.accepted(a, <i xmlns:fo="http://www.w3.org/1999/XSL/Format" style="color:blue" class="hl-string">"a"</i>));
		assertTrue(AutomataExecution.accepted(a, <i xmlns:fo="http://www.w3.org/1999/XSL/Format" style="color:blue" class="hl-string">"aaaaa"</i>));
		assertTrue(AutomataExecution.accepted(a, <i xmlns:fo="http://www.w3.org/1999/XSL/Format" style="color:blue" class="hl-string">""</i>));
		assertFalse(AutomataExecution.accepted(a, <i xmlns:fo="http://www.w3.org/1999/XSL/Format" style="color:blue" class="hl-string">"aaabaaa"</i>));
		assertFalse(AutomataExecution.accepted(a, <i xmlns:fo="http://www.w3.org/1999/XSL/Format" style="color:blue" class="hl-string">"c"</i>));
	}

}</pre></div></div><div class="section" title="3.5.6.&nbsp;Model of Concurrency and Communication (MoCC)"><div class="titlepage"><div><div><h3 class="title"><a name="_model_of_concurrency_and_communication_mocc"></a>3.5.6.&nbsp;Model of Concurrency and Communication (MoCC)</h3></div></div></div><p>At the moment the MoCC is defined using MoCCML, a superset of CCSL.
It is composed of two parts.  The first one is the reusable one,
defined in a MoCCML project. It contains the declaration and
definition of relations on clocks (MoCC events).  At the top level, a
state machine can be used to specify the relations.  The second one
explains how to use those relations according to the abstract syntax
of the DSML.  Is part of the DSE/ECL project.</p><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p xmlns="">We will use the term clock as a synonym of MoCC event, that is
events that are managed by the MoCC.  The purpose is to avoid
confusion with domain specific events (DSE).</p></div><p>We have already identify DSE and we have defined them in the ECL file
(DSE project).  Implicitly, these DSE events are mapped to
corresponding clock at the MoCC level.  So, we have three clocks,
initialize, occur and terminate.</p><p>We want that the 'initialize' clock clicks only once and before all
other clocks.  Then we can have any occurrences of the 'occur' clock
and, eventually, one occurrence of the 'terminate' clock.</p><p>TODO: It could be defined using a state machine : initialize, then
occur *, then terminate.</p><div class="section" title="3.5.6.1.&nbsp;Reusable part of the MoCC: MoCCML"><div class="titlepage"><div><div><h4 class="title"><a name="_reusable_part_of_the_mocc_moccml"></a>3.5.6.1.&nbsp;Reusable part of the MoCC: MoCCML</h4></div></div></div><p>Here, we want that 'initialize()' DSE occurs only once before any other
event.  Thus we define a <span class="strong"><strong>relation</strong></span> called 'FirstAndOnlyOnce' whose
purpose is specify that a first clock will happen only once, before all
the others clocks. Thus, it takes two arguments, the first clock, the collection
of other clock.  Its prototype is as follows:</p><pre class="programlisting">RelationDeclaration FirstAndOnlyOnce(first : clock, other : clock)</pre><p>Then, we have to provide the definition <span class="strong"><strong>(RelationDefinition</strong></span>) which
satisfies the this specification. The mocclib file hereafter provides
both the declaration and the definition of this relation.</p><p title="automata.mocclib"><a name="automata.mocclib"></a><b>automata.mocclib.&nbsp;</b>
</p><pre class="screen">StateRelationBasedLibrary automataLib{
	imports{
		import "platform:/plugin/fr.inria.aoste.timesquare.ccslkernel.model/ccsllibrary/kernel.ccslLib" as kernel;
		import "platform:/plugin/fr.inria.aoste.timesquare.ccslkernel.model/ccsllibrary/CCSL.ccslLib" as ccsl;
	}

	RelationLibrary basicautomataRelations{
		RelationDeclaration FirstAndOnlyOnce(first : clock, other : clock)
		RelationDefinition FirstAndOnlyOnceImplem[FirstAndOnlyOnce]{
			Expression firstTickOfFirstEvent = OneTickAndNoMore(OneTickAndNoMoreClock -&gt; first)
			Expression firstTickOfOtherEvents = OneTickAndNoMore(OneTickAndNoMoreClock -&gt; other)
			Relation Precedes(
				LeftClock -&gt; first,
				RightClock -&gt; firstTickOfOtherEvents
			)
			Relation Coincides(
				Clock1 -&gt; first,
				Clock2 -&gt; firstTickOfFirstEvent
			)
		}
	}
}</pre><p title="automata.mocclib">
</p><div class="informalexample"><p>First, we create a new MoCCML project (right click on the xDSML
project &gt; GEMOC Language &gt; Create MoC Project) --- this action is not
yet available from the xDSML view --- and place a library of custom
MoCCML relations and expressions there. Let us call this project
"com.example.automata.mocc.lib".  We can now complete the
<a class="link" href="#">automat.mocclib</a> file.</p></div></div><div class="section" title="3.5.6.2.&nbsp;Specific part of the MoCC"><div class="titlepage"><div><div><h4 class="title"><a name="_specific_part_of_the_mocc"></a>3.5.6.2.&nbsp;Specific part of the MoCC</h4></div></div></div><p>Next, we can define the actual constraints on the clock of an Automata
model.  It is described in the ECL file (SDE project) using AS
concepts and the relations defined in the MoCCML project as well as
the standard libraries relations.
Thus, we start to import the lib and the ecore files (at top of the
ECL file).</p><pre class="screen">import 'platform:/resource/com.example.automata.as/model/automata.ecore'
ECLimport "platform:/resource/com.example.automata.mocc.lib/mocc/automata.moccml"
ECLimport "platform:/plugin/fr.inria.aoste.timesquare.ccslkernel.model/ccsllibrary/kernel.ccslLib"
ECLimport "platform:/plugin/fr.inria.aoste.timesquare.ccslkernel.model/ccsllibrary/CCSL.ccslLib"</pre><p>The main part of the ECL file specify how to instantiate clocks ('def'
keyword and 'Expression' construction) and which constraints to put on
them thanks to the 'Relation' concept.</p><p>First, we want to make sure that we do the initialization
('initialize' clock) of the Automata before anything else. Therefore,
we will use the relation "FirstAndOnlyOnce" defined in our custom
MoCCML library.</p><pre class="screen">context Automata
	inv InitBeforeAnythingElse:
		let allOccurEvents : Event = Expression Union(self.symbols.mocc_occur) in
		let allOtherEvents : Event = Expression Union(allOccurEvents, self.mocc_terminate) in
		Relation FirstAndOnlyOnce(self.mocc_initialize, allOtherEvents)</pre><p>Now, we also want to make sure that we can only inject one symbol at a time. This is modelled by a relation of exclusion between the MoccEvents corresponding to the injection of the symbols. Therefore we add the following constraint:</p><pre class="screen">inv ExclusivityOfSymbolOccurrences:
	Relation Exclusion(self.symbols.mocc_occur)</pre><p>However we cannot both inject a symbol and terminate at the same time. Therefore we also need to add the following exclusion:</p><pre class="screen">inv ExclusivityOfSymbolsAndTerminate:
	let allSymbolOccurEvents : Event = Expression Union(self.symbols.mocc_occur) in
	Relation Exclusion(self.mocc_terminate, allSymbolOccurEvents)</pre><p>As soon as you save the ECL file, a .qvto file should be generated in
the folders qvto-gen/language and qvto-gen/modeling. Make sure that
your xDSML project references the .qvto file that is available in
qvto-gen/modeling.</p><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Tip</h2><p xmlns="">If the Ecore file describing the syntax is changed while the ECL
file is opened, it may be required to close the ECL file and to open
it again to ensure modifications on the Ecore file are seen by ECL.</p></div></div><div class="section" title="3.5.6.3.&nbsp;Testing the MoCC"><div class="titlepage"><div><div><h4 class="title"><a name="_testing_the_mocc"></a>3.5.6.3.&nbsp;Testing the MoCC</h4></div></div></div><p>TODO: To be completed</p></div></div><div class="section" title="3.5.7.&nbsp;Using the Modeling Workbench"><div class="titlepage"><div><div><h3 class="title"><a name="_using_the_modeling_workbench"></a>3.5.7.&nbsp;Using the Modeling Workbench</h3></div></div></div><div class="section" title="3.5.7.1.&nbsp;Technical Workarounds"><div class="titlepage"><div><div><h4 class="title"><a name="_technical_workarounds"></a>3.5.7.1.&nbsp;Technical Workarounds</h4></div></div></div><p>A few workarounds are needed before you can launch the Modeling
Workbench :</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">TODO: In the xDSML project, initialize  the field "Code executor
class name" with automata.xdsml.api.impl.AutomataCodeExecutor</li><li class="listitem">In the DSA Project, MANIFEST.MF, runtime, export the non-Java package containing your .xtend DSAs</li><li class="listitem">In the xDSML Project, plugin.xml, add the following attribute to the XDSML_Definition: modelLoader_class="org.gemoc.gemoc_modeling_workbench.core.DefaultModelLoader"</li><li class="listitem">In the xDSML Project, MANIFEST.MF, add the following dependency:
org.gemoc.gemoc_modeling_workbench.ui,
org.gemoc.gemoc_language_workbench.extensions.k3</li><li class="listitem">Make sure a .qvto has been generated in the your DSE Project /qvto-gen/modeling.</li><li class="listitem">TODO: Supprimer les import sur les aspects non utilises</li><li class="listitem">Dans project.xdsml, verifier que le QVT-o reference est celui du
dossier qvto-gen/modeling du projet DSE.</li><li class="listitem">TODO</li></ul></div></div><div class="section" title="3.5.7.2.&nbsp;Testing and debugging the xDSML"><div class="titlepage"><div><div><h4 class="title"><a name="_testing_and_debugging_the_xdsml"></a>3.5.7.2.&nbsp;Testing and debugging the xDSML</h4></div></div></div><div class="informalexample"><p>Launch the Modeling Workbench. Create a new general project, for
instance "com.example.automata.instances". In this project, create a
new Automate instance (New &gt; Other&#8230;&#8203; &gt; Automata Model)
"ABCD.automata" whose root is of type Automata.</p><p>Create a Run Configuration: right click on the model and select "Run
As&#8230;&#8203; &gt; Run Configurations". Create a new "Gemoc eXecutable Model"
configuration. Model to execute:
"/com.example.automata.instances/ABCD.automata", xDSML: "automata".
Change the "Decider" to "Step by step user decider".</p></div><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Warning</h2><p xmlns="">In "Animator" place any valid .aird. This issue should be solved in the next iteration of the Studio.
In the panel "Common", select "Shared file" and put the project path there: "/com.example.automata.instances". Give a name to the configuration like "Automata ABCD".</p></div></div></div></div><div class="section" title="3.6.&nbsp;Increment 2: new MoCC and DSA for Automata (using State Machines of MoCCML)"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sec-increment2"></a>3.6.&nbsp;Increment 2: new MoCC and DSA for Automata (using State Machines of MoCCML)</h2></div></div></div><p>Same DSA</p><p>Same MoCC but expressed with a state machine and not CCSL relations.</p></div><div class="section" title="3.7.&nbsp;Increment 3: new MoCC and DSA for Automata (MoCC focused version)"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sec-increment3"></a>3.7.&nbsp;Increment 3: new MoCC and DSA for Automata (MoCC focused version)</h2></div></div></div><p>In the previous version the MoCC is only responsible of ensuring that
DSE events (input symbols and end of word event) arrive one at a time.
The DSA choose the right transition to fire, if any.
To do so, fire() has been considered as an helper.  It can thus be
called from the occur() DSA of Symbol element.</p><p>We now propose another solution that gives more responsibilities to
the MoCC: it will decide which transition can be fired.</p><p>Principle: Transition.fire() in no more an Helper but a Modifier that
will be scheduled by the MoCC.   We add clock on state to know whether
a state is current or not a simulation step.  To be defined.</p><p>TODO: to be developed.</p></div><div class="section" title="3.8.&nbsp;Increment 4: Graphical visualization"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sec-visualization"></a>3.8.&nbsp;Increment 4: Graphical visualization</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">On the model (current states, the symbols already analyzed?)</li><li class="listitem">A tabular presentation ?</li><li class="listitem">A specific view as a Gantt</li></ul></div><p>TODO: to be developed.</p></div><div class="section" title="3.9.&nbsp;Increment 5: Consider nondeterministic automata."><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sec-nondeterministic"></a>3.9.&nbsp;Increment 5: Consider nondeterministic automata.</h2></div></div></div><p>TODO: to be developed.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Two transitions with the same symbol and the same source state.</li><li class="listitem">A transition with no label.</li></ul></div><p>Principle: currentState become currentStates.  We maintain the set of
all states that are accessible by the symbols already accepte by the
automaton.</p></div><div class="section" title="3.10.&nbsp;Increment 6: Pushdown automaton"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sec-pushdown"></a>3.10.&nbsp;Increment 6: Pushdown automaton</h2></div></div></div><p>TODO: The purpose of Pushdown Automaton is to illustrate the Feedback
    mechanism.</p><p>We will now extend our automaton to include a stack.  The feedback
mechanism will be used to decide whether a transition is firable
according to the symbol on top of the stack.</p><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p xmlns="">These aspect will be included in a future version of the
tutorial when the proposed approach to handle feedbacks will have been
integrated to the GEMOC studio.</p></div></div><div class="section" title="3.11.&nbsp;Increment 7: Call of user actions"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sec-userCode"></a>3.11.&nbsp;Increment 7: Call of user actions</h2></div></div></div><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p xmlns="">Will be added in a future version of this tutorial.</p></div></div><div class="section" title="3.12.&nbsp;Increment: TBD"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sec-otherIncrements"></a>3.12.&nbsp;Increment: TBD</h2></div></div></div><p>TODO: Which other increments?</p></div><div class="section" title="3.13.&nbsp;TODO"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_todo"></a>3.13.&nbsp;TODO</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Definition of AS should be part of this tutorial (correct NOTE: at the
beginning).</li><li class="listitem">Pourquoi automataDSE ? (DSE/ECL part)</li><li class="listitem">Define concrete Syntax with Sirius.  Sould it be done in the second Eclipse?</li><li class="listitem">rename mocc_* to dse_* to reflect the fact that we would like them to be
DSE.   We must explain in the mapping DSE/MoCC that at this moment, each DSE
generates on MOCCEvent.</li><li class="listitem">rename xDSML.model to xDSML.as?</li><li class="listitem">Expliquer les automates en partant des exemples, pour eviter la
redondance avec l&#8217;explication du MM et plus logique dans l&#8217;optique de
du system engineer.</li><li class="listitem">Process: ensure a better conformance of the text with the process</li><li class="listitem">AS: accept state could be represented as an attribute of the State
element (instead of a reference)</li><li class="listitem">Examples have to be redone to make it more clear, smaller (graphic
representation), etc.</li><li class="listitem">Define a style for the block GEMOC, use the GEMOC logo.</li><li class="listitem">Static semantics?  To be mentioned.  We could provide the OCL
constraint which check whether the model will be executable (non
indeterminism).</li><li class="listitem">Give examples of models, <span class="strong"><strong>scenarios</strong></span> and <span class="strong"><strong>expected results</strong></span>.</li><li class="listitem">Add expected results in term of animation : want to see current
states, executable transitions, incoming symbols&#8230;&#8203;</li><li class="listitem">A way to formalize scenario (including expected results)?</li><li class="listitem">MetaModel or Metamodel or AS?</li><li class="listitem">K3: Can we have several @Aspect(className=Automata)
class AutomataAspect { }, one for the ED, one the EF?</li></ul></div><p>Forme du tutoriel :</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Define a style to highlight text from xtend, ecl, moccml, etc.</li><li class="listitem">Definir un nouveau type de block GEMOC avec le Logo GEMOC.</li><li class="listitem">Comment definir l&#8217;equivalent de --atribute tabsize=4 dans le
.asciidoc directement ?</li></ul></div><p>To be more efficient:
* Directly include source code rather than pasting it in this doc.</p><p>To be improved:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">DSE part: for the moment ECL has several purpose.  It is thus
confusing.  We must first focus on the definition of the DSE and not
on the various mappings.</li></ul></div><p>To be added:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Explain somewhere: When the .ecore is changed.  The genmodel must be
updated and the code generated again.</li></ul></div><p>Studio improvements:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Could the moc2as.properties file in DSE/ECL project be automatically
initialized (from the Root container model element)?</li></ul></div><p>MoCCML:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">How to represent a collection of clocks in a RelationDeclaration rule?</li></ul></div><p>Tutorial focus:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Illustration of the process</li><li class="listitem">Demonstrative in term of GEMOC studio basic operations</li></ul></div><p>Tutorial maintenance:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Which version of GEMOC Studio to use?</li><li class="listitem">What frequency for updating the tutorial?</li><li class="listitem">How contribute to the tutorial after the first version?</li><li class="listitem">Keep a single file or split the tutorial in several mini-tutorial?</li><li class="listitem">Record a video? Once the tutorial has been validated !</li></ul></div><p>Choices in the way of writing DSA/EF</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Use logging?</li><li class="listitem">Add a Contract class for preconditions?</li><li class="listitem">&#8230;&#8203;</li></ul></div></div></div><div class="bibliography" title="Bibliography"><div class="titlepage"><div><div><h2 class="title"><a name="_bibliography"></a>Bibliography</h2></div></div></div><p>The bibliography lists some useful external documents. For a more complete list, please refer to the publications section on <a class="link" href="http://gemoc.org" target="_top">http://gemoc.org</a> site.</p><div class="bibliodiv" title="Articles"><h3 class="title"><a name="d0e2729"></a>Articles</h3><div class="bibliomixed"><a name="d0e2732"></a><p class="bibliomixed">
<span class="bibliomisc"><a name="globalizing-modeling-languages"></a>[globalizing-modeling-languages] <a class="link" href="http://hal.inria.fr/hal-00994551" target="_top">Globalizing Modeling Languages</a> (Benoit Combemale, Julien Deantoni, Benoit Baudry, Robert France, Jean-Marc Jezequel, Jeff Gray), In Computer, IEEE, 2014.</span>
</p></div></div></div><div class="glossary" title="Glossary"><div class="titlepage"><div><div><h2 class="title"><a name="_glossary"></a>Glossary</h2></div></div></div><div class="variablelist"><dl><dt><span class="term">AS</span></dt><dd>Abstract Syntax.</dd><dt><span class="term">API</span></dt><dd>Application Programming Interface.</dd><dt><span class="term">Behavioral Semantics</span></dt><dd>see Execution semantics.</dd><dt><span class="term">CCSL</span></dt><dd>Clock-Constraint Specification Language.</dd><dt><span class="term">Domain Engineer</span></dt><dd>user of the Modeling Workbench.</dd><dt><span class="term">DSA</span></dt><dd>Domain-Specific Action.</dd><dt><span class="term">DSE</span></dt><dd>Domain-Specific Event.</dd><dt><span class="term">DSML</span></dt><dd>Domain-Specific (Modeling) Language.</dd><dt><span class="term">Dynamic Semantics</span></dt><dd>see Execution semantics.</dd><dt><span class="term">Eclipse Plugin</span></dt><dd>an Eclipse plugin is a Java project with associated metadata that can be bundled and deployed as a contribution to an Eclipse-based IDE.</dd><dt><span class="term">ED</span></dt><dd>Execution Data.</dd><dt><span class="term">Execution Semantics</span></dt><dd>Defines when and how elements of a language will produce a model behavior.</dd><dt><span class="term">GEMOC Studio</span></dt><dd>Eclipse-based studio integrating both a language workbench and the corresponding modeling workbenches</dd><dt><span class="term">Language Workbench</span></dt><dd>a language workbench offers the facilities for designing and implementing modeling languages.</dd><dt><span class="term">Language Designer</span></dt><dd>a language designer is the user of the language workbench.</dd><dt><span class="term">MoCC</span></dt><dd>Model of Concurrency and Communication</dd><dt><span class="term">Model</span></dt><dd>model which contributes to the convent of a View</dd><dt><span class="term">Modeling Workbench</span></dt><dd>a modeling workbench offers all the required facilities for editing and animating domain specific models according to a given modeling language.</dd><dt><span class="term">MSA</span></dt><dd>Model-Specific Action.</dd><dt><span class="term">MSE</span></dt><dd>Model-Specific Event.</dd><dt><span class="term">RTD</span></dt><dd>RunTime Data.</dd><dt><span class="term">Static semantics</span></dt><dd>Constraints on a model that cannot be expressed in the metamodel.  For example, static semantics can be expressed as OCL invariants.</dd><dt><span class="term">xDSML</span></dt><dd>Executable Domain-Specific Modeling Language.</dd></dl></div></div><div class="index" title="Index"><div class="titlepage"><div><div><h2 class="title"><a name="_index"></a>Index</h2></div></div></div><div class="index"><div class="indexdiv"><h3>B</h3><dl><dt>Both representations (graphical or textual) can be used for edition of models, <a class="indexterm" href="#_presentation_of_the_moccml_editor">Presentation of the MoCCML Editor</a></dt></dl></div><div class="indexdiv"><h3>D</h3><dl><dt>Decider, <a class="indexterm" href="#_general_options">General options</a></dt></dl></div><div class="indexdiv"><h3>E</h3><dl><dt>ECL, <a class="indexterm" href="#_introduction_2">Introduction</a></dt><dt>EMF Tree Editor, <a class="indexterm" href="#section-modeling-workbench-editing-model-with-emf-tree-editor">Editing model with EMF Tree Editor</a></dt><dt>Engine, <a class="indexterm" href="#_run_mode">Run mode</a>, <a class="indexterm" href="#_debug_mode">Debug mode</a></dt><dt>Event Manager, <a class="indexterm" href="#_debug_mode">Debug mode</a></dt></dl></div><div class="indexdiv"><h3>F</h3><dl><dt>Feedback Policy, <a class="indexterm" href="#_creating_a_indexterm_primary_feedback_policy_primary_indexterm_feedback_policy">Creating a Feedback Policy</a></dt><dt>Feedback Specification, <a class="indexterm" href="#_defining_the_indexterm_primary_feedback_specification_primary_indexterm_feedback_specification">Defining the Feedback Specification</a></dt></dl></div><div class="indexdiv"><h3>G</h3><dl><dt>GEL, <a class="indexterm" href="#_purpose_5">Purpose</a></dt><dt>GEMOC</dt><dd><dl><dt>process, <a class="indexterm" href="#sec-GEMOC-process">Recommanded GEMOC Process</a></dt><dd><dl><dt>overview, <a class="indexterm" href="#sec-GEMOC-architecture">Architecture of a GEMOC xDSML</a></dt></dl></dd></dl></dd><dt>GEMOC Dashboard, <a class="indexterm" href="#_purpose">Purpose</a></dt><dt>GEMOC Language Workbench, <a class="indexterm" href="#_overview">Overview</a></dt></dl></div><div class="indexdiv"><h3>I</h3><dl><dt>import, <a class="indexterm" href="#_import_language">Import Language</a></dt></dl></div><div class="indexdiv"><h3>L</h3><dl><dt>Language Designer, <a class="indexterm" href="#_overview">Overview</a>, <a class="indexterm" href="#_purpose">Purpose</a></dt><dt>Language Integrator, <a class="indexterm" href="#_overview">Overview</a></dt><dt>Language Workbench, <a class="indexterm" href="#_overview">Overview</a></dt><dt>Logical Step, <a class="indexterm" href="#_general_options">General options</a>, <a class="indexterm" href="#modeling-workbench-executing-model-debug-view-section">Debug View</a></dt></dl></div><div class="indexdiv"><h3>M</h3><dl><dt>MoCCML, <a class="indexterm" href="#_introduction_2">Introduction</a></dt><dt>Modeling workbench, <a class="indexterm" href="#_modeling_workbench_overview">Modeling workbench overview</a></dt></dl></div><div class="indexdiv"><h3>O</h3><dl><dt>overview, <a class="indexterm" href="#sec-GEMOC-architecture">Architecture of a GEMOC xDSML</a></dt></dl></div><div class="indexdiv"><h3>P</h3><dl><dt>process, <a class="indexterm" href="#sec-GEMOC-process">Recommanded GEMOC Process</a></dt><dd><dl><dt>overview, <a class="indexterm" href="#sec-GEMOC-architecture">Architecture of a GEMOC xDSML</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>R</h3><dl><dt>Runtime Data, <a class="indexterm" href="#_debug_mode">Debug mode</a>, <a class="indexterm" href="#modeling-workbench-executing-model-variable-view-section">Variable View</a></dt></dl></div><div class="indexdiv"><h3>S</h3><dl><dt>Sirius, <a class="indexterm" href="#defining-a-concrete-syntax-with-sirius-section">Defining a Concrete Syntax with Sirius</a>, <a class="indexterm" href="#defining-a-debug-representation-section">Defining a debug representation</a>, <a class="indexterm" href="#_the_debug_representation_wizard">The debug representation wizard</a>, <a class="indexterm" href="#_debug_layer">Debug layer</a>, <a class="indexterm" href="#modeling-workbench-editing-model-with-sirius-section">Editing model with Sirius</a></dt><dt>Sirius), <a class="indexterm" href="#modeling-workbench-editing-model-with-sirius-section">Editing model with Sirius</a></dt></dl></div><div class="indexdiv"><h3>T</h3><dl><dt>TFSM, <a class="indexterm" href="#_modeling_workbench_overview">Modeling workbench overview</a></dt><dd><dl><dt>Language Workbench, <a class="indexterm" href="#_overview">Overview</a></dt><dt>Modeling workbench, <a class="indexterm" href="#_modeling_workbench_overview">Modeling workbench overview</a></dt></dl></dd><dt>Timeline, <a class="indexterm" href="#_run_mode">Run mode</a>, <a class="indexterm" href="#_debug_mode">Debug mode</a></dt></dl></div></div></div></div></body></html>