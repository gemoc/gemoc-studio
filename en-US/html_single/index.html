<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>GEMOC Studio Guide</title><link rel="stylesheet" type="text/css" href="css/gemocorg.css"/><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"/><meta xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" http-equiv="Content-Type" content="text/html; charset=UTF-8"/></head><body><div xml:lang="en" class="book" title="GEMOC Studio Guide"><div class="titlepage"><div><p xmlns:d="http://docbook.org/ns/docbook" id="title"><a href="http://www.gemoc.org" class="site_href"><strong>GEMOC.org</strong></a><a href="http://gemoc.github.io//" class="doc_href"><strong>Community Documentation</strong></a></p><div><h1 class="title"><a id="d5e1"/>GEMOC Studio Guide</h1></div><div><div class="author"><h3 class="author"><span class="firstname">Francois Tanguy &lt;francois.tanguy@inria.fr&gt;, Didier Vojtisek &lt;didier.vojtisek@inria.fr&gt;</span></h3></div></div></div><hr/></div><div class="toc"><p><strong>Table of Contents</strong></p><dl><dt><span class="preface"><a href="#_introduction">Introduction</a></span></dt><dt><span class="chapter"><a href="#_gemoc_language_workbench">1. Gemoc Language workbench</a></span></dt><dd><dl><dt><span class="section"><a href="#_language_workbench_overview">1.1. Language Workbench overview</a></span></dt><dt><span class="section"><a href="#section-gemoc-language-project">1.2. Gemoc Language project</a></span></dt><dt><span class="section"><a href="#section-define-AS-project">1.3. Defining Abstract Syntax (or domain concepts)</a></span></dt><dd><dl><dt><span class="section"><a href="#section-define-AS-project-method-1">1.3.1. Method 1 : Creation via xDSML popup</a></span></dt><dt><span class="section"><a href="#section-define-AS-project-method-2">1.3.2. Method 2 : Manual creation and association to the xDSML</a></span></dt><dt><span class="section"><a href="#section-define-AS-project-method-3">1.3.3. Method 3 : Creation or selection via Gemoc Guideline view</a></span></dt></dl></dd><dt><span class="section"><a href="#_defining_runtime_data">1.4. Defining RunTime Data</a></span></dt><dt><span class="section"><a href="#_defining_domain_specific_actions_dsas">1.5. Defining Domain-Specific Actions (DSAs)</a></span></dt><dt><span class="section"><a href="#_defining_domain_specific_constraints">1.6. Defining Domain-Specific Constraints</a></span></dt><dt><span class="section"><a href="#_defining_a_concrete_syntax">1.7. Defining a concrete syntax</a></span></dt><dd><dl><dt><span class="section"><a href="#_defining_a_concrete_syntax_with_xtext">1.7.1. Defining a concrete syntax with xText</a></span></dt><dt><span class="section"><a href="#_defining_a_concrete_syntax_with_indexterm_primary_sirius_primary_indexterm_sirius">1.7.2. Defining a concrete syntax with Sirius</a></span></dt></dl></dd><dt><span class="section"><a href="#_defining_a_model_of_concurrency_moc">1.8. Defining a Model of Concurrency (MoC)</a></span></dt><dt><span class="section"><a href="#_defining_domain_specific_events_dse">1.9. Defining Domain Specific Events (DSE)</a></span></dt><dt><span class="section"><a href="#_defining_an_animation_view">1.10. Defining an animation view</a></span></dt><dt><span class="section"><a href="#section-process-support-view">1.11. Process support view</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chapter-gemoc-modeling-workbench">2. Gemoc Modeling workbench</a></span></dt><dd><dl><dt><span class="section"><a href="#_modeling_workbench_overview">2.1. Modeling workbench overview</a></span></dt><dt><span class="section"><a href="#modeling-workbench-editing-model-section">2.2. Editing model</a></span></dt><dt><span class="section"><a href="#modeling-workbench-executing-model-section">2.3. Executing model</a></span></dt><dd><dl><dt><span class="section"><a href="#_launch_configuration">2.3.1. Launch configuration</a></span></dt><dt><span class="section"><a href="#modeling-workbench-executing-model-engine-view-section">2.3.2. Engine View</a></span></dt><dt><span class="section"><a href="#modeling-workbench-executing-model-logical-step-view-section">2.3.3. Logical Steps View</a></span></dt><dt><span class="section"><a href="#modeling-workbench-executing-model-timeline-view-section">2.3.4. Timeline View</a></span></dt><dt><span class="section"><a href="#modeling-workbench-executing-model-event-manager-view-section">2.3.5. Event Manager View</a></span></dt><dt><span class="section"><a href="#modeling-workbench-executing-model-animation-view-section">2.3.6. Animation View</a></span></dt><dt><span class="section"><a href="#modeling-workbench-executing-model-debug-view-section">2.3.7. Debug View</a></span></dt><dt><span class="section"><a href="#modeling-workbench-executing-model-variable-view-section">2.3.8. Variable View</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#_gemoc_xdsml_definition_tutorial">3. GEMOC xDSML definition tutorial</a></span></dt><dd><dl><dt><span class="section"><a href="#_introduction_2">3.1. Introduction</a></span></dt><dt><span class="section"><a href="#sec-GEMOC-approach">3.2. The GEMOC Approach for defining eXecutable DSML (xDSML)</a></span></dt><dd><dl><dt><span class="section"><a href="#sec-GEMOC-architecture">3.2.1. Architecture of a GEMOC xDSML</a></span></dt><dt><span class="section"><a href="#sec-GEMOC-characteristics">3.2.2. Main Characteristics of the GEMOC Process.</a></span></dt><dt><span class="section"><a href="#sec-GEMOC-process">3.2.3. Recommanded GEMOC Process</a></span></dt></dl></dd><dt><span class="section"><a href="#sec-requirements">3.3. Definition of the requirements/expectations on the xDSML</a></span></dt><dd><dl><dt><span class="section"><a href="#_application_domain_automata">3.3.1. Application Domain: Automata</a></span></dt><dt><span class="section"><a href="#_description_of_automata">3.3.2. Description of automata</a></span></dt><dt><span class="section"><a href="#_informal_behavior">3.3.3. Informal behavior</a></span></dt><dt><span class="section"><a href="#_scenarios">3.3.4. Scenarios</a></span></dt><dt><span class="section"><a href="#_examples_of_models">3.3.5. Examples of models</a></span></dt></dl></dd><dt><span class="section"><a href="#_creating_an_xdsml_project">3.4. Creating an xDSML Project</a></span></dt><dt><span class="section"><a href="#sec-increment1">3.5. Increment 1 : Deterministic Automata</a></span></dt><dd><dl><dt><span class="section"><a href="#_specification_of_the_xdsml_interface">3.5.1. Specification of the xDSML interface</a></span></dt><dt><span class="section"><a href="#_define_the_abstract_syntax_as">3.5.2. Define the Abstract Syntax (AS)</a></span></dt><dt><span class="section"><a href="#_define_concrete_syntaxes_cs">3.5.3. Define concrete syntaxes (CS)</a></span></dt><dt><span class="section"><a href="#_defining_dse">3.5.4. Defining DSE</a></span></dt><dt><span class="section"><a href="#_defining_domain_specific_actions_dsa">3.5.5. Defining Domain-Specific Actions (DSA)</a></span></dt><dt><span class="section"><a href="#_model_of_concurrency_and_communication_mocc">3.5.6. Model of Concurrency and Communication (MoCC)</a></span></dt><dt><span class="section"><a href="#_using_the_modeling_workbench">3.5.7. Using the Modeling Workbench</a></span></dt></dl></dd><dt><span class="section"><a href="#_increment_2_new_mocc_and_dsa_for_automata_mocc_focused_version">3.6. Increment 2: new MoCC and DSA for Automata (MoCC focused version)</a></span></dt><dt><span class="section"><a href="#_increment_3_graphical_visualization">3.7. Increment 3: Graphical visualization</a></span></dt><dt><span class="section"><a href="#_increment_4_consider_nondeterministic_automata">3.8. Increment 4: Consider nondeterministic automata.</a></span></dt><dt><span class="section"><a href="#_increment_5_pushdown_automaton">3.9. Increment 5: Pushdown automaton</a></span></dt><dt><span class="section"><a href="#_increment_6_call_of_user_actions">3.10. Increment 6: Call of user actions</a></span></dt><dt><span class="section"><a href="#_increment_tbd">3.11. Increment: TBD</a></span></dt><dt><span class="section"><a href="#_todo">3.12. TODO</a></span></dt></dl></dd><dt><span class="bibliography"><a href="#_bibliography">Bibliography</a></span></dt><dt><span class="glossary"><a href="#_glossary">Glossary</a></span></dt><dt><span class="index"><a href="#_index">Index</a></span></dt></dl></div><div class="list-of-figures"><p><strong>List of Figures</strong></p><dl><dt>1.1. <a href="#figure-glw-screenshot-of-language_workbench">Screenshot of GEMOC Studio Language Workbench on the TFSM (Timed Finite State Machine) example.</a></dt><dt>2.1. <a href="#figure-glw-screenshot-of-modeling_workbench">Screenshot of GEMOC Studio Modeling Workbench on the TFSM example (execution and animation).</a></dt><dt>3.1. <a href="#GEMOC-process-overview">Overview of the GEMOC process</a></dt><dt>3.2. <a href="#GEMOC-process">Recommended GEMOC Process</a></dt><dt>3.3. <a href="#automata-aSbaS">Automata which reads a*ba*</a></dt><dt>3.4. <a href="#automata-abcdS">Automata which reads (ABCD)*</a></dt><dt>3.5. <a href="#automata-mots">Automata which reads words</a></dt><dt>3.6. <a href="#automata-ccomm">Automata which reads C commentary</a></dt></dl></div>

<div class="preface" title="Introduction"><div class="titlepage"><div><div><h2 class="title"><a id="_introduction"/>Introduction</h2></div></div></div>

<p>The GEMOC Studio offers 2 main usages:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
Building and composing new executable DSML. This mode is intended to be used by language designers (aka domain experts).
</li><li class="listitem">
Creating and executing models conformant to executable DSMLs. This mode is intended to be used by domain designers.
</li></ul></div>
<p>Each of these usage has it own set of tools that are referenced as <span class="strong"><strong>Gemoc Language workbench</strong></span> for the tools for <span class="emphasis"><em>language designers</em></span> and <span class="strong"><strong>Gemoc Modeling Workbench</strong></span> for the tools for <span class="emphasis"><em>domain designers</em></span>.</p>
</div>
<div class="chapter" title="Chapter 1. Gemoc Language workbench"><div class="titlepage"><div><div><h2 class="title"><a id="_gemoc_language_workbench"/>Chapter 1. Gemoc Language workbench</h2></div></div></div>

<div class="section" title="1.1. Language Workbench overview"><div class="titlepage"><div><div><h2 class="title"><a id="_language_workbench_overview"/>1.1. Language Workbench overview</h2></div></div></div>

<p>The GEMOC Language Workbench, intended to be used by <a id="d5e27" class="indexterm"/>language designers:  it allows building and composing new executable DSMLs.</p>
<div class="figure"><a id="figure-glw-screenshot-of-language_workbench"/><p class="title"><strong>Figure 1.1. Screenshot of GEMOC Studio Language Workbench on the TFSM (Timed Finite State Machine) example.</strong></p><div class="figure-contents">

<div class="mediaobject"><img src="./images/gemoc_language_workbench_TFSM_screenshot.png" alt="Screenshot of GEMOC Studio Language Workbench on the TFSM (Timed Finite State Machine) example"/></div>
</div></div><br class="figure-break"/>
<p><a id="d5e37" class="indexterm"/>
<a id="d5e39" class="indexterm"/>
<a id="d5e42" class="indexterm"/></p>
<p><hr xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory"/></p>
</div>
<div class="section" title="1.2. Gemoc Language project"><div class="titlepage"><div><div><h2 class="title"><a id="section-gemoc-language-project"/>1.2. Gemoc Language project</h2></div></div></div>

<p>In the menu go to: File&gt; New&gt; Projects…​&gt; Gemoc Language project</p>
<p>This project will be the aggregator of the other Eclipse projects that will constitute the components of a Language Unit of the xDSML.</p>
<p>It mainly defines a project.xdsml file that references these other components.</p>
<p>The xDSML file isn’t supposed to be edited manually. The pop up menu on the project (available on right click) or the <a class="xref" href="#section-process-support-view" title="1.11. Process support view">Section 1.11, “Process support view”</a> provides a set of wizard to fill this file.</p>
<p>From these information, the project will generate additional code that will be used by the execution engine when the language will be deployed and used by the <a class="xref" href="#chapter-gemoc-modeling-workbench" title="Chapter 2. Gemoc Modeling workbench">Chapter 2, <em>Gemoc Modeling workbench</em></a>.</p>
</div>
<div class="section" title="1.3. Defining Abstract Syntax (or domain concepts)"><div class="titlepage"><div><div><h2 class="title"><a id="section-define-AS-project"/>1.3. Defining Abstract Syntax (or domain concepts)</h2></div></div></div>

<p>Defining the abstract syntax (AS) in the Language Workbench is done thanks to an EMF Ecore project that will be associated to the xDSML definition.</p>
<p>All ecore editors can be used to edit the concepts in the ecore file.</p>
<p>The EMF project can be created manually and then associated to the xDSML or directly created for the specific use of a given xDSML.</p>
<div class="section" title="1.3.1. Method 1 : Creation via xDSML popup"><div class="titlepage"><div><div><h3 class="title"><a id="section-define-AS-project-method-1"/>1.3.1. Method 1 : Creation via xDSML popup</h3></div></div></div>

<p>To create the EMF project:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
right click on the xDSML project
</li><li class="listitem">
navigate in the <span class="emphasis"><em>Gemoc Language</em></span> entry.
</li><li class="listitem">
click on <span class="emphasis"><em>create Domain Model project</em></span>
</li></ul></div>
<p>This will open a wizard asking either to create a new EMF project or select an existing one (usefull for <a class="link" href="#section-define-AS-project-method-2" title="1.3.2. Method 2 : Manual creation and association to the xDSML">method 2</a>).
Creating a new EMF project will ask for some</p>
<div xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2>
<p>In future version of the studio, this method may disapear and be replaced by <a class="link" href="#section-define-AS-project-method-3" title="1.3.3. Method 3 : Creation or selection via Gemoc Guideline view">method 3</a>.</p>
</div>
</div>
<div class="section" title="1.3.2. Method 2 : Manual creation and association to the xDSML"><div class="titlepage"><div><div><h3 class="title"><a id="section-define-AS-project-method-2"/>1.3.2. Method 2 : Manual creation and association to the xDSML</h3></div></div></div>

<p>From eclipse menu:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
<span class="emphasis"><em>File &gt; New &gt; Projects…​ &gt; Ecore Modeling Project</em></span>
</li><li class="listitem">
in the Ecore diagram, define the concepts for your language as a class diagram.
</li></ul></div>
<div xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Tip</h2>
<p>There are several other ways to create valid EMF projects. Amung them we can consider: <span class="emphasis"><em>File &gt; New &gt; Projects…​ &gt; EMF Project</em></span>, <span class="emphasis"><em>File &gt; New &gt; Projects…​ &gt; Empty EMF Project</em></span>,  <span class="emphasis"><em>File &gt; New &gt; Projects…​ &gt; xText Project</em></span> …​ However, this isn’t in the scope of this document to detail them or explain how to correctly configure them for being used by Gemoc.</p>
</div>
<p>Then associate the EMF project to the xDSML. The association is done either with right click on the xDSML project, <span class="emphasis"><em>Gemoc Language</em></span> &gt; <span class="emphasis"><em>create Domain Model project</em></span> &gt; <span class="emphasis"><em>Select existing EMF project</em></span>; or via the Gemo Guideline view.</p>
</div>
<div class="section" title="1.3.3. Method 3 : Creation or selection via Gemoc Guideline view"><div class="titlepage"><div><div><h3 class="title"><a id="section-define-AS-project-method-3"/>1.3.3. Method 3 : Creation or selection via Gemoc Guideline view</h3></div></div></div>

<p>The Gemoc Guideline view offers an integrated vision of the most important steps of the xDSML creation process. When selecting the <span class="emphasis"><em>Define Domain Model</em></span> task, a button allows to launch the wizards of <a class="link" href="#section-define-AS-project-method-1" title="1.3.1. Method 1 : Creation via xDSML popup">method 1</a>.</p>
<p>TODO new project wizard (via popup, via process)
TODO select existing project
TODO Ecore editor</p>
</div>
</div>
<div class="section" title="1.4. Defining RunTime Data"><div class="titlepage"><div><div><h2 class="title"><a id="_defining_runtime_data"/>1.4. Defining RunTime Data</h2></div></div></div>


</div>
<div class="section" title="1.5. Defining Domain-Specific Actions (DSAs)"><div class="titlepage"><div><div><h2 class="title"><a id="_defining_domain_specific_actions_dsas"/>1.5. Defining Domain-Specific Actions (DSAs)</h2></div></div></div>

<p>In Gemoc, the DSAs are developped using Kermeta 3.</p>
<div xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2>
<p>There may exist other ways to create DSAs, but these methods aren’t in the scope of this document.</p>
</div>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
right click on the xDSML project
</li><li class="listitem">
navigate in the <span class="emphasis"><em>Gemoc Language</em></span> entry.
</li><li class="listitem">
click on <span class="emphasis"><em>create DSA project</em></span>
</li></ul></div>
<p>In the wizard you can select an existing templates to help create the aspects classes that will extend the classes of the Domain model.</p>
<p>You can manually create a Kermeta 3 project in the main eclipse menu, and then associate it to an xDSML project.</p>
</div>
<div class="section" title="1.6. Defining Domain-Specific Constraints"><div class="titlepage"><div><div><h2 class="title"><a id="_defining_domain_specific_constraints"/>1.6. Defining Domain-Specific Constraints</h2></div></div></div>


</div>
<div class="section" title="1.7. Defining a concrete syntax"><div class="titlepage"><div><div><h2 class="title"><a id="_defining_a_concrete_syntax"/>1.7. Defining a concrete syntax</h2></div></div></div>

<p>The xDSML can support different concrete syntaxes. Most EMF based editors should work however Gemoc provides additional support for some editors.
Editors explictly supported are: EMF tree editor, xText editor, Sirius editor.</p>
<div class="section" title="1.7.1. Defining a concrete syntax with xText"><div class="titlepage"><div><div><h3 class="title"><a id="_defining_a_concrete_syntax_with_xtext"/>1.7.1. Defining a concrete syntax with xText</h3></div></div></div>


</div>
<div class="section" title="1.7.2. Defining a concrete syntax with Sirius"><div class="titlepage"><div><div><h3 class="title"><a id="_defining_a_concrete_syntax_with_indexterm_primary_sirius_primary_indexterm_sirius"/>1.7.2. Defining a concrete syntax with <a id="d5e127" class="indexterm"/>Sirius</h3></div></div></div>


</div>
</div>
<div class="section" title="1.8. Defining a Model of Concurrency (MoC)"><div class="titlepage"><div><div><h2 class="title"><a id="_defining_a_model_of_concurrency_moc"/>1.8. Defining a Model of Concurrency (MoC)</h2></div></div></div>


</div>
<div class="section" title="1.9. Defining Domain Specific Events (DSE)"><div class="titlepage"><div><div><h2 class="title"><a id="_defining_domain_specific_events_dse"/>1.9. Defining Domain Specific Events (DSE)</h2></div></div></div>


</div>
<div class="section" title="1.10. Defining an animation view"><div class="titlepage"><div><div><h2 class="title"><a id="_defining_an_animation_view"/>1.10. Defining an animation view</h2></div></div></div>

<p>The animation layer is an extension on top of a graphical editor defined with <a id="d5e136" class="indexterm"/>Sirius.</p>
<p>TODO Debug layer, Animation layer</p>
</div>
<div class="section" title="1.11. Process support view"><div class="titlepage"><div><div><h2 class="title"><a id="section-process-support-view"/>1.11. Process support view</h2></div></div></div>

<p>TODO present process view</p>
</div>
</div>
<div class="chapter" title="Chapter 2. Gemoc Modeling workbench"><div class="titlepage"><div><div><h2 class="title"><a id="chapter-gemoc-modeling-workbench"/>Chapter 2. Gemoc Modeling workbench</h2></div></div></div>

<div class="section" title="2.1. Modeling workbench overview"><div class="titlepage"><div><div><h2 class="title"><a id="_modeling_workbench_overview"/>2.1. Modeling workbench overview</h2></div></div></div>

<p>The GEMOC Modeling Workbench, intended to be used by domain designers: it allows creating and executing models conformant to executable DSMLs.</p>
<div class="figure"><a id="figure-glw-screenshot-of-modeling_workbench"/><p class="title"><strong>Figure 2.1. Screenshot of GEMOC Studio Modeling Workbench on the TFSM example (execution and animation).</strong></p><div class="figure-contents">

<div class="mediaobject"><img src="./images/gemoc_modeling_workbench_TFSM_animation_screenshot.png" alt="Screenshot of GEMOC Studio Modeling Workbench on the TFSM example (execution and animation)"/></div>
</div></div><br class="figure-break"/>
<p><a id="d5e155" class="indexterm"/>
<a id="d5e157" class="indexterm"/>
<a id="d5e160" class="indexterm"/></p>
<p><hr xmlns="" xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory"/></p>
</div>
<div class="section" title="2.2. Editing model"><div class="titlepage"><div><div><h2 class="title"><a id="modeling-workbench-editing-model-section"/>2.2. Editing model</h2></div></div></div>


</div>
<div class="section" title="2.3. Executing model"><div class="titlepage"><div><div><h2 class="title"><a id="modeling-workbench-executing-model-section"/>2.3. Executing model</h2></div></div></div>

<div class="section" title="2.3.1. Launch configuration"><div class="titlepage"><div><div><h3 class="title"><a id="_launch_configuration"/>2.3.1. Launch configuration</h3></div></div></div>

<p>The Gemoc launch configuration offers both a Run and a Debug mode.</p>
<div class="section" title="General options"><div class="titlepage"><div><div><h4 class="title"><a id="_general_options"/>General options</h4></div></div></div>

<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
Model to execute : this is the model that will be run
</li><li class="listitem">
xDSML : this field allows to select among the valid variants of the executable language that are available for the model (Ie. the combinaison of DSA, DSE and MoCC that can be used on the given domain model)
</li><li class="listitem">
<p class="simpara"><a id="d5e179" class="indexterm"/>Decider : this field allows to select the solver strategy used by the engine when several <a id="d5e181" class="indexterm"/>Logical Steps can be triggered. Possible choice are :</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
Solver proposition : the solver internal stategy will be used to selecton Logical Step
</li><li class="listitem">
Random : will randomly select one of the available Logical Step (warning: execution cannot be reproduced when using this Decider)
</li><li class="listitem">
Ask user : (available only in Debug mode), this option will use the <a class="link" href="#modeling-workbench-executing-model-logical-step-view-section" title="2.3.3. Logical Steps View">Logical Step View</a> or the <a class="link" href="#modeling-workbench-executing-model-timeline-view-section" title="2.3.4. Timeline View">Timeline View</a> to present the available Logical Steps and pause if there are more than one Logical Step. The user will then need to click on one of the Logical Step to continue.
</li><li class="listitem">
Ask user (Step by step) : (available only in Debug mode), this option is similar to the previous one. However, it will pause on every Logical Step, even if there is only one Logical Step that can be triggered. This is more or less equivalent as putting a breakpoint on every MSE of the language.
</li></ul></div>
</li></ul></div>
<p>More Deciders will be developped (for example for playing predefined scenario).</p>
</div>
<div class="section" title="Run mode"><div class="titlepage"><div><div><h4 class="title"><a id="_run_mode"/>Run mode</h4></div></div></div>

<p>In run mode, it offers the faster way to run the model.
It cannot be paused. However, you can stop it.
It offers a limited set of views :</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
the <a class="link" href="#modeling-workbench-executing-model-engine-view-section" title="2.3.2. Engine View"/><a id="d5e202" class="indexterm"/><a class="link" href="#modeling-workbench-executing-model-engine-view-section" title="2.3.2. Engine View">Engine View</a> allows to stop a running model.
</li><li class="listitem">
the <a class="link" href="#modeling-workbench-executing-model-timeline-view-section" title="2.3.4. Timeline View"/><a id="d5e207" class="indexterm"/><a class="link" href="#modeling-workbench-executing-model-timeline-view-section" title="2.3.4. Timeline View">Timeline View</a> is displayed at the end of the execution in order to control the resulting execution trace.
</li></ul></div>
<p>If more feed back are required, please use one of the front end or back end available for the xDSML.</p>
</div>
<div class="section" title="Debug mode"><div class="titlepage"><div><div><h4 class="title"><a id="_debug_mode"/>Debug mode</h4></div></div></div>

<p>In debug mode, the engine offers more control on the execution.
It allows to pause, add break point, and run in a step by step mode.</p>
<p>It reuses the Eclipse Debug perspective and some of its views and add some Gemoc specific views.</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
the <a class="link" href="#modeling-workbench-executing-model-engine-view-section" title="2.3.2. Engine View"/><a id="d5e218" class="indexterm"/><a class="link" href="#modeling-workbench-executing-model-engine-view-section" title="2.3.2. Engine View">Engine View</a> allows to stop a running model.
</li><li class="listitem">
the <a class="link" href="#modeling-workbench-executing-model-timeline-view-section" title="2.3.4. Timeline View"/><a id="d5e223" class="indexterm"/><a class="link" href="#modeling-workbench-executing-model-timeline-view-section" title="2.3.4. Timeline View">Timeline View</a> is displayed during all the simulation.
</li><li class="listitem">
the <a class="link" href="#modeling-workbench-executing-model-event-manager-view-section" title="2.3.5. Event Manager View"/><a id="d5e228" class="indexterm"/><a class="link" href="#modeling-workbench-executing-model-event-manager-view-section" title="2.3.5. Event Manager View">Event Manager View</a> is displayed during all the simulation.
</li><li class="listitem">
the <a class="link" href="#modeling-workbench-executing-model-animation-view-section" title="2.3.6. Animation View"/><a id="d5e233" class="indexterm"/><a class="link" href="#modeling-workbench-executing-model-animation-view-section" title="2.3.6. Animation View">Event Manager View</a> is displayed during all the simulation. It can display both an animation layer and a debug layer.
</li><li class="listitem">
the <a class="link" href="#modeling-workbench-executing-model-debug-view-section" title="2.3.7. Debug View">Debug View</a>. This view presents an interface for Step by Step execution at the Logical Step level or even at the DSA level.
</li><li class="listitem">
the <a class="link" href="#modeling-workbench-executing-model-variable-view-section" title="2.3.8. Variable View">Variable View</a>. This view presents the <a id="d5e241" class="indexterm"/>Runtime Data as a (EMF based) tree.
</li></ul></div>
<p>When running a simulation in Debug mode, it is configured to activate automatically the Debug layer and the Animation layer in the Animation view.</p>
</div>
<div class="section" title="Backends and frontends"><div class="titlepage"><div><div><h4 class="title"><a id="_backends_and_frontends"/>Backends and frontends</h4></div></div></div>

<p>Back ends and front ends offer additionnal view that can respectivly display informations from the running model or provide event input to the running model.</p>
<p>These backends and front ends usually open dedicated views. These views are always opened in all modes (Run or Debug).</p>
</div>
</div>
<div class="section" title="2.3.2. Engine View"><div class="titlepage"><div><div><h3 class="title"><a id="modeling-workbench-executing-model-engine-view-section"/>2.3.2. Engine View</h3></div></div></div>

<p>The engine view displays a list of execution engine and their statuses:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
its number of execution steps,
</li><li class="listitem">
its current running status,
</li><li class="listitem">
and its logical steps deciding strategy.
</li></ul></div>
<p><span class="inlinemediaobject"><img src="./images/workbench/modeling/engine_view.png" alt="Engine View"/></span></p>
</div>
<div class="section" title="2.3.3. Logical Steps View"><div class="titlepage"><div><div><h3 class="title"><a id="modeling-workbench-executing-model-logical-step-view-section"/>2.3.3. Logical Steps View</h3></div></div></div>

<p>The logical steps view displays the list of possible future execution. This list is provided by the solver. This view is organized around a tree. For each logical step, its underlying events can be seen and possibly for each event the associated operation is visible.</p>
<div xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2>
<p>This view displays nothing when execution runs in "run mode", per say this view is only of use when running in "debug mode".</p>
</div>
<p><span class="inlinemediaobject"><img src="./images/workbench/modeling/logical_steps.png" alt="Logical Steps"/></span></p>
</div>
<div class="section" title="2.3.4. Timeline View"><div class="titlepage"><div><div><h3 class="title"><a id="modeling-workbench-executing-model-timeline-view-section"/>2.3.4. Timeline View</h3></div></div></div>

<p>This view represents the line of the model’s execution. It displays:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
the different logical steps proposed by the solver in the past in blue color,
</li><li class="listitem">
the selected logical steps at each execution step in green color,
</li><li class="listitem">
and the possible future logical steps in yellow color,
</li><li class="listitem">
the model specific events for each logical step.
</li></ul></div>
<div xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2>
<p>The possible future logical steps are shown under the condition that the model is executing.</p>
</div>
<p><span class="inlinemediaobject"><img src="./images/workbench/modeling/timeline.png" alt="Timeline"/></span></p>
<p>In addition to displaying information, it also provides interaction with the user. During execution, it is possible to come back into the past by double-clicking on any of the blue logical steps. It does two things:</p>
<div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
it resets the solver’s state to the selected execution step,
</li><li class="listitem">
and it resets the model’s state to the selected execution step.
</li></ol></div>
</div>
<div class="section" title="2.3.5. Event Manager View"><div class="titlepage"><div><div><h3 class="title"><a id="modeling-workbench-executing-model-event-manager-view-section"/>2.3.5. Event Manager View</h3></div></div></div>


</div>
<div class="section" title="2.3.6. Animation View"><div class="titlepage"><div><div><h3 class="title"><a id="modeling-workbench-executing-model-animation-view-section"/>2.3.6. Animation View</h3></div></div></div>

<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
Debug Layer
</li><li class="listitem">
Animation Layer
</li></ul></div>
</div>
<div class="section" title="2.3.7. Debug View"><div class="titlepage"><div><div><h3 class="title"><a id="modeling-workbench-executing-model-debug-view-section"/>2.3.7. Debug View</h3></div></div></div>

<p>This view is part of the Debug perspective.
It presents an interface for Step by Step execution at the Logical Step level or even at the DSA level.
When an execution is paused, this view presents the current Logical Step.</p>
<p>When paused on a <a id="d5e314" class="indexterm"/>Logical Step, the Step over command allows to go to the next Logical Step. The Step Into command allows to run separatly each of the internal DSA calls associated to the Logical Step.</p>
</div>
<div class="section" title="2.3.8. Variable View"><div class="titlepage"><div><div><h3 class="title"><a id="modeling-workbench-executing-model-variable-view-section"/>2.3.8. Variable View</h3></div></div></div>

<p>This view is available on the Debug perspective.
When an execution is paused, this view presents the current <a id="d5e319" class="indexterm"/>Runtime Data as an EMF based tree.</p>
</div>
</div>
</div>
<div class="chapter" title="Chapter 3. GEMOC xDSML definition tutorial"><div class="titlepage"><div><div><h2 class="title"><a id="_gemoc_xdsml_definition_tutorial"/>Chapter 3. GEMOC xDSML definition tutorial</h2></div></div></div>

<p>GEMOC Team
:Author Initials: XC
:website: http:__gemoc.org</p>
<div xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Warning</h2>
<p>This tutorial is a work in progress and is not yet finished.
It still contains TODO and must be polished.</p>
</div>
<div class="section" title="3.1. Introduction"><div class="titlepage"><div><div><h2 class="title"><a id="_introduction_2"/>3.1. Introduction</h2></div></div></div>

<p>The purpose of this tutorial is to explain on a simple example how to
define an xDSML (eXecutable Domain Specific Modeling Language).  It is
structured as follows.  First, we recall the
<a class="link" href="#sec-GEMOC-approach" title="3.2. The GEMOC Approach for defining eXecutable DSML (xDSML)">GEMOC approach</a>, including
<a class="link" href="#sec-GEMOC-architecture" title="3.2.1. Architecture of a GEMOC xDSML">architecture of
the GEMOC xDSML</a> and the <a class="link" href="#sec-GEMOC-characteristics" title="3.2.2. Main Characteristics of the GEMOC Process.">main
characteristics of a GEMOC process</a>.
Then, we present the <a class="link" href="#sec-GEMOC-process" title="3.2.3. Recommanded GEMOC Process">overall process</a> that will be
illustrated by this tutorial. The next sections illustrate the process
on a concrete example, the definition of automata.  We describe the
<a class="link" href="#sec-requirements" title="3.3. Definition of the requirements/expectations on the xDSML">application domain</a>, and structure the development
in <a class="link" href="#sec-increment1" title="3.5. Increment 1 : Deterministic Automata">several increments</a> to structure it and
illustrate different aspects of the GEMOC studio.</p>
<p>TODO: Describe the increments?</p>
<p>TODO: Give the conventions on the tutorial, naming, etc.</p>
</div>
<div class="section" title="3.2. The GEMOC Approach for defining eXecutable DSML (xDSML)"><div class="titlepage"><div><div><h2 class="title"><a id="sec-GEMOC-approach"/>3.2. The GEMOC Approach for defining eXecutable DSML (xDSML)</h2></div></div></div>

<div class="section" title="3.2.1. Architecture of a GEMOC xDSML"><div class="titlepage"><div><div><h3 class="title"><a id="sec-GEMOC-architecture"/>3.2.1. Architecture of a GEMOC xDSML</h3></div></div></div>

<div xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2>
<p>We consider that the Abstract Syntax (AS) of the DSML is already
defined and thus that its design is not part of the GEMOC xDSML process.
Nevertheless, the process could easily be extended with a new step
which consists in defining the AS and its Concrete Syntaxes (CS).</p>
</div>
<p>Once the AS is defined — and possibly the CS ---, the execution
semantics of the DSML can be defined.   It includes the definition
of:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
the <span class="strong"><strong>DSA</strong></span> (Domain Specific Actions) which includes EF (Execution
Functions) and ED (Execution Data): it defines the runtime data
and the actions to handle them,
</li><li class="listitem">
the <span class="strong"><strong>MOCC</strong></span> (Model of Concurrency and Communication) which deals with
concurrency aspects,
</li><li class="listitem">
the <span class="strong"><strong>DSE</strong></span> which maps DSA and MOCC,
</li><li class="listitem">
the <span class="strong"><strong>visualization</strong></span> which provides views to control and monitor the
execution of models conforming to the xDSML.
</li></ul></div>
<p>There is no mandatory order in which these different parts have to be
built.  Thus, a first description of the process can focus on this
characteristic (<a class="link" href="#GEMOC-process-overview" title="Figure 3.1. Overview of the GEMOC process">see overview process</a>).
The xDSML parts may be built in any order.
This process stresses a first step which consists in eliciting the
requirements on the expected execution semantics.  This
elicitation is not always easy to achieve for the system engineers,
thus we believe that providing samples of models as well as some
scenarios describing their execution is a good way
for system engineers to describe they expectations.</p>
<p>Furthermore, it is recommended to built the xDSML using increments and
iterations.  Increments address requirements the ones after the
others.  Iterations allow to rework the different components until the
requirements are fulfilled.</p>
<div class="figure"><a id="GEMOC-process-overview"/><p class="title"><strong>Figure 3.1. Overview of the GEMOC process</strong></p><div class="figure-contents">

<div class="mediaobject"><img src="./images/tutorial/xDSML-definition-process-overview.png" alt="Overview of the GEMOC process"/></div>
</div></div><br class="figure-break"/>
<p><a id="d5e368" class="indexterm"/>
<a id="d5e372" class="indexterm"/>
<a id="d5e375" class="indexterm"/></p>
<div xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2>
<p>For clarity, the iteration to choose the next increment is not
represented of the diagram.</p>
</div>
</div>
<div class="section" title="3.2.2. Main Characteristics of the GEMOC Process."><div class="titlepage"><div><div><h3 class="title"><a id="sec-GEMOC-characteristics"/>3.2.2. Main Characteristics of the GEMOC Process.</h3></div></div></div>

<p>The main characteristics of the definition of an \xdsml according to \gemoc
are the following:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
It is <span class="strong"><strong>user-oriented</strong></span>.  Indeed, we believe that to build the right
xDSML, the end-users' expectations have to be handled in the first
place.  As GEMOC targets simulation of models, it is important to
elicit the expectations of the end-users, i.e. the system engineers,
in term of simulation of its models.
</li><li class="listitem">
It is <span class="strong"><strong>incremental</strong></span>.  All end-users expectations will not be
handled all at the same time but we recommend to define several increments
that will progressively includes these expectations seen as requirements.
The purpose is to make the definition of the execution semantics simpler
by gradually integrating the requirements, and thus the difficulties.
</li><li class="listitem">
It is <span class="strong"><strong>iterative</strong></span>.  For an increment, all the components will
certainly not be done right and complete at the first time.  Thus,
iterations will be necessary to tweak the definitions of the xDSML.
Examples provided by the end users will help in deciding whether an
iteration is finished or not.
</li><li class="listitem">
It is <span class="strong"><strong>highly concurrent</strong></span>.  Indeed, the main steps can be run at
the same time, possibly by different persons (even if it not always very
easy using Eclipse).  We can imagine that the DSE model and mappings can
be first defined to specify the overall architecture of the xDSML
semantics, including requirements on DSA as specification of the expected
execution functions and requirements on the MoCC as expected MoCC events
and relations on them.  The MoCC libraries, the DSA implementation and the
animator can then be developed at the same time, by different persons.
Of course the DSE model can still be changed and the others updated.
</li></ul></div>
</div>
<div class="section" title="3.2.3. Recommanded GEMOC Process"><div class="titlepage"><div><div><h3 class="title"><a id="sec-GEMOC-process"/>3.2.3. Recommanded GEMOC Process</h3></div></div></div>

<p>An xDSML is a language that targets a specific purpose. When defining
such a language it is important to first identify that purpose so as
to build the right language.  Thus, we propose a methodology which
focuses on the end-user expectations --- why models are animated? ---
and then build the different parts of the xDSML to fulfill these
expectations.</p>
<p>In the context of the GEMOC project, the main aim is to be able to
animate and simulate heterogeneous models based on different xDSMLs.
Thus the end-user expectations will encompass the different xDSML
involved in the model to build.  This global process which includes
the dispatch of expectations on the different parts of a model will be
addressed in a future revision of this document when all constituents
will be further defined.</p>
<p>The main steps to achieve the definition of an xDSML according to the
GEMOC approach are described hereafter. They are summarized as a UML
activity diagram.  Package notation is used to group activities by
domain (and could be considered as a kind of compound activity).</p>
<div class="figure"><a id="GEMOC-process"/><p class="title"><strong>Figure 3.2. Recommended GEMOC Process</strong></p><div class="figure-contents">

<div class="mediaobject"><img src="./images/tutorial/xDSML-definition-process-general.png" alt="Recommended GEMOC Process"/></div>
</div></div><br class="figure-break"/>
<p><a id="d5e408" class="indexterm"/>
<a id="d5e411" class="indexterm"/></p>
<div xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Warning</h2>
<p>This process is the recommanded one, and the one used in this
tutorial.  Nevertheless, it is possible to define an xDSML with other
processes depending on the background of the language designer, his
knowledge of the GEMOC approach, the considered DSML, etc.</p>
</div>
</div>
</div>
<div class="section" title="3.3. Definition of the requirements/expectations on the xDSML"><div class="titlepage"><div><div><h2 class="title"><a id="sec-requirements"/>3.3. Definition of the requirements/expectations on the xDSML</h2></div></div></div>

<p>The first step consists in describing the system engineers'
expectation concerning the considered domain in terms of execution
semantics and visualization at runtime.  As it is often a complex task
for system engineers to formally describe their expectations, we
advocate to define them through examples to complement the informal
descriptions.</p>
<p>An example is composed of:</p>
<div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
A <span class="strong"><strong>model</strong></span> which is conform to the DSML AS).
</li><li class="listitem">
A <span class="strong"><strong>scenario</strong></span> which describes a particular use of the model.  A scenario
is considered of events, that is stimuli that trigger evolution of the model.
</li><li class="listitem">
<span class="strong"><strong>Expected results</strong></span> while the scenario is played.  Expected results include
values of runtime data, possible next events, etc. They are way to describe the expected behavioral semantics.
</li></ol></div>
<p>Obviously, it is possible to share some elements between several examples.
For example, the same model may be used by several examples.</p>
<p>This steps is important to understand the expectations of the system
engineers.  As providing a formal specification of his/her
expectations is generally not easy, giving some examples including
expected results on specific scenario is a good way to specify through
examples.</p>
<p>Furthermore, these examples will be used to validate the implemented
xDSML.</p>
<p>Finally they can be used to define the increments in the development
of the xDSML by defining the set of models and scenarios each
increment must handle.</p>
<div class="section" title="3.3.1. Application Domain: Automata"><div class="titlepage"><div><div><h3 class="title"><a id="_application_domain_automata"/>3.3.1. Application Domain: Automata</h3></div></div></div>

<p>We consider the domain of <span class="strong"><strong>automata</strong></span>.  An automaton may be used to
specify a language defined on a set of symbols called alphabet.  The
<a class="link" href="#">following example</a> shows an automaton
which recognizes the language <span class="emphasis"><em>a*ba*</em></span>.</p>
</div>
<div class="section" title="3.3.2. Description of automata"><div class="titlepage"><div><div><h3 class="title"><a id="_description_of_automata"/>3.3.2. Description of automata</h3></div></div></div>

<p>An automaton is composed of a finite set of states, transitions and
symbols. An automaton must have exactly one initial state (and thus at
least one state).  One transition connects a source state to a target
state and is labelled by a symbol.
On the <a class="link" href="#automata-aSbaS" title="Figure 3.3. Automata which reads a*ba*">example</a>, states are represented by circles, doubled-circled
states are accepting states (or final states).
A transition is depicted as an arrow from the input state to the
output state.
An arrow without input state points to the initial state.</p>
<div class="figure"><a id="automata-aSbaS"/><p class="title"><strong>Figure 3.3. Automata which reads a*ba*</strong></p><div class="figure-contents">

<div class="mediaobject"><img src="./images/tutorial/automate-aSbaS.png" alt="Automata which reads a*ba*"/></div>
</div></div><br class="figure-break"/>
<p>TODO: When.
An automaton is deterministic is there is no two transitions labelled
with the same symbol with the same source state. Else it is called
nondeterministic automaton.</p>
</div>
<div class="section" title="3.3.3. Informal behavior"><div class="titlepage"><div><div><h3 class="title"><a id="_informal_behavior"/>3.3.3. Informal behavior</h3></div></div></div>

<p>An automaton is used to decide whether a word — a sequence of symbols — is part of a language (the word is accepted by the automaton) or
not (the word is rejected).
An automaton gets one input at a time.
When run, an automaton has a current state which is the initial state
at the beginning.  Then, at each step, on input symbol is received. If
there is no transition labelled with this symbol outgoing from the
current state, then the word is rejected.  If it exists such a
transition, the symbol is accepted and the current state of the
automaton becomes the state targeted by the transition.
A work is accepted if all its symbols have been accepted and the last
current state of the automaton is an accept state.  Otherwise the work
is rejected.</p>
</div>
<div class="section" title="3.3.4. Scenarios"><div class="titlepage"><div><div><h3 class="title"><a id="_scenarios"/>3.3.4. Scenarios</h3></div></div></div>

<p>The scenarios related to automata shared the same structure as they
all consist in checking whether a work is accepted or rejected by an
automaton. It thus consists in feeding the automaton with letters
(symbols) of the work (from the first to the last one) and then to
indicate that the end of the work has been reached.</p>
<p>If we consider the word <code class="literal">aba</code>, the input scenario is :</p>
<div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
Feed symbol `a'
</li><li class="listitem">
Feed symbol `b'
</li><li class="listitem">
Feed symbol `a'
</li><li class="listitem">
Terminate
</li></ol></div>
<p>The automaton will then answers. The response can be 'accepted' or
'refused'</p>
</div>
<div class="section" title="3.3.5. Examples of models"><div class="titlepage"><div><div><h3 class="title"><a id="_examples_of_models"/>3.3.5. Examples of models</h3></div></div></div>

<p>We give here some examples of automaton with the language they model
and some examples of accepted and rejected words.</p>
<div class="variablelist"><dl><dt><span class="term">Deterministic automata</span></dt><dd>
We first consider some simple example of
automata for which there is only one outgoing transition for a
state.
</dd></dl></div>
<div class="figure"><a id="automata-abcdS"/><p class="title"><strong>Figure 3.4. Automata which reads (ABCD)*</strong></p><div class="figure-contents">

<div class="mediaobject"><img src="./images/tutorial/automate-abcd-star.png" alt="Automata which reads (ABCD)*"/></div>
</div></div><br class="figure-break"/>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
Examples of accepted words: (empty word), ABCD,
ABCDABCD, etc.
</li><li class="listitem">
Examples of rejected words: ABC, ABCDA, D, etc.
</li></ul></div>
<p>TODO: Other examples :</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
only one state
</li><li class="listitem">
several states and only one final state
</li><li class="listitem">
several outgoings transition for one state
</li><li class="listitem">
several final states.
</li></ul></div>
<p>Dictionary Automata:</p>
<div class="figure"><a id="automata-mots"/><p class="title"><strong>Figure 3.5. Automata which reads words</strong></p><div class="figure-contents">

<div class="mediaobject"><img src="./images/tutorial/automate-mots.png" alt="Automata which reads words"/></div>
</div></div><br class="figure-break"/>
<p>The only accepted words are: IL, ILE, ILES, ILS, ILOT, ILOTS</p>
<div class="variablelist"><dl><dt><span class="term">Nondeterministic automata</span></dt><dd>
TODO: Several transitions with the same symbol.
</dd></dl></div>
<p>TODO: A transition with no associated symbol (automatic transition?)</p>
<div class="figure"><a id="automata-ccomm"/><p class="title"><strong>Figure 3.6. Automata which reads C commentary</strong></p><div class="figure-contents">

<div class="mediaobject"><img src="./images/tutorial/automate-ccomm.png" alt="Automata which C commentary"/></div>
</div></div><br class="figure-break"/>
<div class="variablelist"><dl><dt><span class="term">Pushdown automata</span></dt><dd>
For example to check that open and close symbols are well suited.
</dd></dl></div>
</div>
</div>
<div class="section" title="3.4. Creating an xDSML Project"><div class="titlepage"><div><div><h2 class="title"><a id="_creating_an_xdsml_project"/>3.4. Creating an xDSML Project</h2></div></div></div>

<div xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2>
<p>TODO: Put the GEMOC Logo for paragraphs which describe GEMOC Studio commands.</p>
</div>
<div class="informalexample">
<p>First, start by creating a new xDSML project (<span class="emphasis"><em>New &gt; Project &gt; GEMOC
Project / new xDSML Project</em></span>), with your desired name (for instance
"com.example.automata").  In the created project, we can open the
project.xdsml file. The xDSML view summarizes all the important
resources used in an xDSML project (which are part of and managed by
other projects).  This view is a kind of dashboard or control center to
have quick access to any important resource of the project.</p>
</div>
<div xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2>
<p>In the MANIFEST.MF (in folder META-INF), add the following
dependency if it is not present:
"org.gemoc.gemoc_language_workbench.extensions.k3" (click on
dependencies, then <span class="emphasis"><em>Add…​</em></span>, the type in "k3" and select the right
plugin).</p>
</div>
<p>TODO: Verifier si ce n’est pas fait lors de la creation du projet K3
par le Wizard.</p>
</div>
<div class="section" title="3.5. Increment 1 : Deterministic Automata"><div class="titlepage"><div><div><h2 class="title"><a id="sec-increment1"/>3.5. Increment 1 : Deterministic Automata</h2></div></div></div>

<div class="section" title="3.5.1. Specification of the xDSML interface"><div class="titlepage"><div><div><h3 class="title"><a id="_specification_of_the_xdsml_interface"/>3.5.1. Specification of the xDSML interface</h3></div></div></div>

<p>In this step, we describe the interface of the language.  It includes
interface to the system engineers (for example AS and CS) but also to
other models and xDSML (AS, DSE, EF and ED).</p>
</div>
<div class="section" title="3.5.2. Define the Abstract Syntax (AS)"><div class="titlepage"><div><div><h3 class="title"><a id="_define_the_abstract_syntax_as"/>3.5.2. Define the Abstract Syntax (AS)</h3></div></div></div>

<div class="informalexample">
<p>To define the AS we can either select an existing project (Browse
button) or create a new one.  To create a new one, we click on "EMF
project" on the xDSML view of project.xdsml.
Let us call it "org.example.automata.model".
Let us call our package "automata". We will use the default ns URI and ns
Prefix. We may then edit the Ecore MetaModel either with the graphical
editor or with the tree editor.</p>
</div>
<p>[[fig/automata/class diagram]]
.Automata Metamodel
image::images/tutorial/automata-as.png[Automata Metamodel]</p>
<p>An Automaton is a composed of States (at least one), Transitions and
Symbols.  A Transition must have a source and a target, both of type
State. A Transition is fired upon occurrence of one of its associated
Symbol.  For now, Transitions may have only one associated Symbol For
practical reasons, we also add EOpposite references whenever possible.
Therefore States, Transitions and Symbols know which Automata they
belong to. Symbols know which Transition(s) they are referenced by.
States know their outgoing and incoming Transitions.  Automatas,
States, Transitions and Symbols all have a name (factorized in the
NamedElement metaclass).</p>
<div class="informalexample">
<p>Once the Ecore MetaModel is done, we can come back to the xDSML view.
The "EMF project" and the  "Genmodel URI" have been updated.</p>
<p>Set the "Root container model element" to "automata::Automata".</p>
<p>Open the associated Genmodel (click on Genmodel URI) to generate the
Model Code, Edit Code and Editor Code by right clicking on the root of
the Genmodel (right-click on root element). The packages "automata",
"automata.impl" and "automata.util" as well as the plug-ins
"com.example.automata.model.edit" and
"com.example.automata.model.editor" are generated.</p>
</div>
</div>
<div class="section" title="3.5.3. Define concrete syntaxes (CS)"><div class="titlepage"><div><div><h3 class="title"><a id="_define_concrete_syntaxes_cs"/>3.5.3. Define concrete syntaxes (CS)</h3></div></div></div>

<p>A concrete syntax is convenient way to view or edit a model.  It can
be textual (Xtext project for example) or graphical (Sirius project
for example).  They can be added to the xDSML project like we have
done for AS.</p>
<p>For now, we postpone the design of the Concrete Syntaxes until we are
sure the semantics has been correctly implemented.</p>
<div xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Warning</h2>
<p>Therefore, a graphical Concrete Syntax is required in order to use the
graphical animator later on during simulations.</p>
</div>
</div>
<div class="section" title="3.5.4. Defining DSE"><div class="titlepage"><div><div><h3 class="title"><a id="_defining_dse"/>3.5.4. Defining DSE</h3></div></div></div>

<p>Domain Specific Events are part of the interface of the language and
allow communication with the system engineer and the other models of
the system.</p>
<p>For our Automata xDSML, we decide that there are 3 events
which are of relevant interest to the environment (user through a GUI
or another xDSML through language composition operators):</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
Initializing the automata : occurs only once at the start of the
simulation
</li><li class="listitem">
Injecting a symbol : occurs when the user gives a new symbol of the
work to test
</li><li class="listitem">
Terminating the automata : occurs when the user has given all the
symbols of the word.  It is used to indicate the end on the word.
</li></ul></div>
<p>TODO: Other DSE may be of interrest, for example firing a transition,
rejecting a symbol, etc which would be output events (the previous
ones being input events).</p>
<div class="informalexample">
<p>At this moment, DSE are defined in an ECL (Event Constraint Language) file.
In the xDSML view, click on <span class="emphasis"><em>ECL Project</em></span> to create a DSE Project.
Let us name it "com.example.automata.dse" (it is the proposed name).
In the corresponding field, place the path to the Ecore MetaModel
("platform:/resource/com.example.automata.model/model/automata.ecore")
and make sure the "Root container model element" is
"automata::Automata" and name the file "automataDSE". Ignore the error
that is displayed.</p>
<p>Right click on the DSE project and make sure that in "configure", the
"DSE builder" functionality is active.</p>
<p>An error is indicated in the newly created project. To correct it,
fill-in the "moc2as.properties" file by completing the property with
the name of the root element. In our case, that is "rootElement =
Automata".</p>
<p>TODO: Could it be automatically initialized (from the Root container
model element)?</p>
</div>
<div class="informalexample">
<p>For now, we will complete the ECL file with the following elements:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
<span class="strong"><strong>Metamodel import:</strong></span> (already initialized) Domain-Specific Events
and MoCC constraints are defined in the context of a concept from
the AS, so the first thing we need is to import the metamodel.
</li></ul></div>
<pre class="screen">import 'platform:/resource/com.example.automata.model/model/automata.ecore'</pre>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
<span class="strong"><strong>Domain-Specific Events specification:</strong></span> here we can define MoccEvents
and a mapping towards EOperations present in the Metamodel (XXX). The
first step is to identify which behaviors should be schedulable by
the MoCC, and which should be seen as part of the behavioral
interface of the xDSML.
</li></ul></div>
<p>Therefore, we define three Domain-Specific Events by defining three MoccEvents each referencing an Execution Function (implemented later).</p>
<pre class="screen">package automata
	context Automata
		def: mocc_initialize : Event = self.initialize()
		def: mocc_terminate : Event = self.terminate()

	context Symbol
		def: mocc_occur : Event = self.occur()
endpackage</pre>
</div>
<p>TODO: Can we define DSE without mapping them to DSA?</p>
<div xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Warning</h2>
<p>The signature of the Execution Functions needs to be present in the
MetaModel. Therefore, we need to modify the Ecore MetaModel and add
the three following operations:</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
Automata.initialize()
</li><li class="listitem">
Automata.terminate()
</li><li class="listitem">
Symbol.occur()
</li></ul></div>
<p>To represent methods with Void as return type in EMF, do not complete
the field "EType" of the EOperations.</p>
</div>
<div xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Tip</h2>
<p>If the AS is changed (automata.ecore), we have to do "Reload…​"
on the genmodel, generate again the Model, Edit and Editor, and
re-register the ecore.  Nevertheless, the ECL is not always able to
see the changes.  In such a case close the editor and open it again.
It should work.</p>
</div>
</div>
<div class="section" title="3.5.5. Defining Domain-Specific Actions (DSA)"><div class="titlepage"><div><div><h3 class="title"><a id="_defining_domain_specific_actions_dsa"/>3.5.5. Defining Domain-Specific Actions (DSA)</h3></div></div></div>

<p>DSA includes the definition of Execution Data (ED) and Execution
Functions (EF).  They are both implemented in Kermeta 3 in K3 Aspect
project whose lastname is, by convention, 'k3dsa'.</p>
<div class="informalexample">
<p>Click on <span class="emphasis"><em>K3 project</em></span> in the xDSML view (Behavioral definition / DSA
definition).  The wizard to create of new Kermeta 3 project is
launched with the name of the project initialized (k3dsa is the last
name).</p>
<p>Default options can be kept except for the value of <span class="emphasis"><em>Use a template
based on ecore file</em></span> field which must be changed from <span class="emphasis"><em>None</em></span> to
<span class="emphasis"><em>Aspect class from ecore file</em></span>.</p>
<p>We can now finish the wizard.</p>
<p>Clicking again on <span class="emphasis"><em>K3 project</em></span> will now allow to choose and open
automata.xtend.  It has been initialized with a template that can be
discarded.</p>
</div>
<p>We can now complete the Kermeta 3 file (automata.xtend) with the
definition of ED and EF.</p>
<div class="section" title="Execution Data (ED)"><div class="titlepage"><div><div><h4 class="title"><a id="_execution_data_ed"/>Execution Data (ED)</h4></div></div></div>

<p>We identify one runtime information for Automata which store the
current state of the automaton.  We call it 'currentState'. It is a
reference in Automata of type State.  It contains either the current
state of the automata or null is a symbol has been rejected.</p>
<p>TODO: Change the implementation to reflect this desgin choice.</p>
<p>TODO: Better, define a new class in DSA ErrorState which extends
State.  When in the error state, the automate rejects every symbols.</p>
<div class="informalexample">
<p>To add the reference 'currentState', we define it in an Aspect on the
Automata class as follow.</p>
<pre class="screen">@Aspect(className=Automata)
class AutomataAspect {
	public State currentState;
}</pre>
</div>
<div xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Warning</h2>
<p>If you plan to use the Graphical animation, then comment the
code above and add this reference to the Ecore Metamodel directly.
This is due to how the animator connects to the Abstract Syntax (for
now).</p>
</div>
</div>
<div class="section" title="Execution Functions (EFs)"><div class="titlepage"><div><div><h4 class="title"><a id="_execution_functions_efs"/>Execution Functions (EFs)</h4></div></div></div>

<p>Here are the execution functions we decide to define:</p>
<div class="variablelist"><dl><dt><span class="term">Automata.initialize()</span></dt><dd>
initialize the automaton:  set its current
state to its initial state.  Print some information to the console to
serve as logging.
</dd><dt><span class="term">Automata.terminate()</span></dt><dd>
log the fact that we wish to finish the Automata.
</dd><dt><span class="term">Symbol.occur()</span></dt><dd>
log the fact that a symbol has occurred. If
there is a transition that may react to an occurrence of this
symbol, then it is fired. If there is not, then we log it.
</dd><dt><span class="term">Symbol.getTransitionToFire()</span></dt><dd>
this is an "helper" which is called by
'Symbol.occur()'. It  determines which Transition to fire.
</dd><dt><span class="term">Transition.fire()</span></dt><dd>
(helper function) change the current state of the
automata.  A precondition checks that the source state of the
transition is the current state of the automata.  An exception is
thrown if the precondition fails.
</dd></dl></div>
<p>TODO:  Change the implementation with :</p>
<div class="variablelist"><dl><dt><span class="term">Automata.recognize(Symbol s)</span></dt><dd>
recognize the current the symbol s. The
'currentState' is set either to null if there is no transition
outgoing from the current state associated with the s symbol, the
target state of such a transition if it exists.
</dd><dt><span class="term">State.getTransition(Symbol s)</span></dt><dd>
a 'Query' which returns the list of
outgoing transitions of this state that accept the s symbol.
</dd></dl></div>
<div class="informalexample">
<p>Complete the file 'automata.xtend' with the following code:</p>
<pre class="screen">@Aspect(className=Automata)
class AutomataAspect {
	def public void initialize() {
		_self.currentState = _self.initialState;
		System.out.println("[" + _self.name + "]" + "Initialized to " + _self.currentState + ".")
	}

	def public void terminate() {
		System.out.println("[" + _self.name + "]" + "Finished.")
			// TODO: indicate whether the Word is accepted or not.
		throw new RuntimeException("Finished.")
			// throwing an exception is the only way for the moment to
			// force the simulation to end.
	}
}

@Aspect(className=Symbol)
class SymbolAspect {
	def public void occur() {
		var log = "[" + _self.automata.name + "]" + "Symbol " + _self.name + " occurred."
		System.out.println(log)
		try{
			var transitionToFire = _self.getTransitionToFire()
			transitionToFire.fire()
		} catch(NoTransitionToFireException e){
			System.out.println("Did not find any transition to fire.")
		}
	}

	def private Transition getTransitionToFire(){
		var possibleTransitions = new ArrayList&lt;Transition&gt;()
		for(transition :_self.transitionsReacting){
			if(_self.automata.currentState == transition.source){
				possibleTransitions.add(transition)
			}
		}
		if(possibleTransitions.size() &gt; 1){
			throw new RuntimeException("Automatas are supposed to be deterministic in this version.")
		} else if(possibleTransitions.size() == 0){
			throw new NoTransitionToFireException()
		} else{
			return possibleTransitions.get(0)
		}
	}

}


class NoTransitionToFireException extends Exception {}


@Aspect(className=Transition)
class TransitionAspect {

	def package void fire() {
		if (_self.automata.currentState != _self.source) {
			throw new RuntimeException(
				"Precondition failed: Cannot fire Transition " + _self.name + " because the current state of the automata is " +
					_self.automata.currentState.name + " and not " + _self.source.name)
			// TODO: Use a specific exception for precondition like PreconditionError.
		}
		_self.automata.currentState = _self.target
		System.out.println("[" + _self.automata.name + "]" + "Fired Transition " + _self.name + ".")
	}

}</pre>
<p>TODO: Add a test to validate the DSA part !</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
load a model or manually define it
</li><li class="listitem">
ask the EF as if they were called by the MoCC
</li><li class="listitem">
check the results (current state, accepted or rejected)
</li></ul></div>
</div>
</div>
</div>
<div class="section" title="3.5.6. Model of Concurrency and Communication (MoCC)"><div class="titlepage"><div><div><h3 class="title"><a id="_model_of_concurrency_and_communication_mocc"/>3.5.6. Model of Concurrency and Communication (MoCC)</h3></div></div></div>

<p>TODO: Give the rational.</p>
<p>There are two sides to the MoCC. First, you can create a new MoCCML
project (right click on the xDSML project &gt; GEMOC Language &gt; Create
MoC Project) and place a library of custom MoCCML relations and
expressions there. Let us call this project
"com.example.automata.mocc.lib". For instance, we choose to place in a
library a relation which allows a MoccEvent to have an occurrence only
once and before all the "other MoccEvents" (using two arguments: first
the MoccEvent which must have an occurrence and then the collection of
all the other MoccEvents).</p>
<pre class="screen">StateRelationBasedLibrary automataLib{
	imports{
		import "platform:/plugin/fr.inria.aoste.timesquare.ccslkernel.model/ccsllibrary/kernel.ccslLib" as kernel;
		import "platform:/plugin/fr.inria.aoste.timesquare.ccslkernel.model/ccsllibrary/CCSL.ccslLib" as ccsl;
	}

	RelationLibrary basicautomataRelations{
		RelationDeclaration FirstAndOnlyOnce(mocc_firstEvent : clock, mocc_otherEvents : clock)
		RelationDefinition FirstAndOnlyOnceImplem[FirstAndOnlyOnce]{
			Expression firstTickOfFirstEvent = OneTickAndNoMore(OneTickAndNoMoreClock -&gt; mocc_firstEvent)
			Expression firstTickOfOtherEvents =	OneTickAndNoMore(OneTickAndNoMoreClock -&gt; mocc_otherEvents)
			Relation Precedes(
				LeftClock -&gt; mocc_firstEvent,
				RightClock -&gt; firstTickOfOtherEvents
			)
			Relation Coincides(
				Clock1 -&gt; mocc_firstEvent,
				Clock2 -&gt; firstTickOfFirstEvent
			)
		}
	}
}</pre>
<p>TODO: state-based relations?</p>
<p>Afterwards, we need to import this library into the ECL file in order to be able to instantiate it using the MoccEvents we have defined as mapped to our Domain-Specific Events. In order to do that, we need to add at the top of the ECL file:</p>
<pre class="screen">ECLimport "platform:/resource/com.example.automata.mocc.lib/mocc/automata.moccml"</pre>
<p>We will also probably need the standard libraries of relations and expressions in order to instantiate the MoCC. Therefore, we should also add the following imports:</p>
<pre class="screen">ECLimport "platform:/plugin/fr.inria.aoste.timesquare.ccslkernel.model/ccsllibrary/kernel.ccslLib"
ECLimport "platform:/plugin/fr.inria.aoste.timesquare.ccslkernel.model/ccsllibrary/CCSL.ccslLib"</pre>
<p>Now we need to specify how to instantiate the MoCC in the ECL file. This is done by using MoCCML relations and expressions on MoccEvents.
First, we want to make sure that we do the initialization of the Automata before anything else. Therefore, we will use the relation "FirstAndOnlyOnce" defined in our custom MoCC library.</p>
<pre class="screen">context Automata
	inv InitBeforeAnythingElse:
		let allOccurEvents : Event = Expression Union(self.symbols.mocc_occur) in
		let allOtherEvents : Event = Expression Union(allOccurEvents, self.mocc_terminate) in
		Relation FirstAndOnlyOnce(self.mocc_initialize, allOtherEvents)</pre>
<p>Now, we also want to make sure that we can only inject one symbol at a time. This is modelled by a relation of exclusion between the MoccEvents corresponding to the injection of the symbols. Therefore we add the following constraint:</p>
<pre class="screen">inv ExclusivityOfSymbolOccurrences:
	Relation Exclusion(self.symbols.mocc_occur)</pre>
<p>However we cannot both inject a symbol and terminate at the same time. Therefore we also need to add the following exclusion:</p>
<pre class="screen">inv ExclusivityOfSymbolsAndTerminate:
	let allSymbolOccurEvents : Event = Expression Union(self.symbols.mocc_occur) in
	Relation Exclusion(self.mocc_terminate, allSymbolOccurEvents)</pre>
<p>As soon as you save the ECL file, a .qvto file should be generated in the folders qvto-gen/language and qvto-gen/modeling. Make sure that your xDSML project references the .qvto file that is available in qvto-gen/modeling.</p>
</div>
<div class="section" title="3.5.7. Using the Modeling Workbench"><div class="titlepage"><div><div><h3 class="title"><a id="_using_the_modeling_workbench"/>3.5.7. Using the Modeling Workbench</h3></div></div></div>

<div class="section" title="Technical Workarounds"><div class="titlepage"><div><div><h4 class="title"><a id="_technical_workarounds"/>Technical Workarounds</h4></div></div></div>

<p>A few workarounds are needed before you can launch the Modeling
Workbench :</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
TODO: Dans le projet xDSML, initialiser le champ Code executor class name
with automata.xdsml.api.impl.AutomataCodeExecutor
</li><li class="listitem">
In the DSA Project, MANIFEST.MF, runtime, export the non-Java package containing your .xtend DSAs
</li><li class="listitem">
In the xDSML Project, plugin.xml, add the following attribute to the XDSML_Definition: modelLoader_class="org.gemoc.gemoc_modeling_workbench.core.DefaultModelLoader"
</li><li class="listitem">
In the xDSML Project, MANIFEST.MF, add the following dependency:
org.gemoc.gemoc_modeling_workbench.ui,
org.gemoc.gemoc_language_workbench.extensions.k3
</li><li class="listitem">
Make sure a .qvto has been generated in the your DSE Project /qvto-gen/modeling.
</li><li class="listitem">
TODO: Supprimer les import sur les aspects non utilises
</li><li class="listitem">
Dans project.xdsml, verifier que le QVT-o reference est celui du
dossier qvto-gen/modeling du projet DSE.
</li><li class="listitem">
TODO
</li></ul></div>
</div>
<div class="section" title="Testing and debugging the xDSML"><div class="titlepage"><div><div><h4 class="title"><a id="_testing_and_debugging_the_xdsml"/>Testing and debugging the xDSML</h4></div></div></div>

<div class="informalexample">
<p>Launch the Modeling Workbench. Create a new general project, for
instance "com.example.automata.instances". In this project, create a
new Automate instance (New &gt; Other…​ &gt; Automata Model)
"ABCD.automata" whose root is of type Automata.</p>
<p>Create a Run Configuration: right click on the model and select "Run
As…​ &gt; Run Configurations". Create a new "Gemoc eXecutable Model"
configuration. Model to execute:
"/com.example.automata.instances/ABCD.automata", xDSML: "automata".
Change the "Decider" to "Step by step user decider".</p>
</div>
<div xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Warning</h2>
<p>In "Animator" place any valid .aird. This issue should be solved in the next iteration of the Studio.
In the panel "Common", select "Shared file" and put the project path there: "/com.example.automata.instances". Give a name to the configuration like "Automata ABCD".</p>
</div>
</div>
</div>
</div>
<div class="section" title="3.6. Increment 2: new MoCC and DSA for Automata (MoCC focused version)"><div class="titlepage"><div><div><h2 class="title"><a id="_increment_2_new_mocc_and_dsa_for_automata_mocc_focused_version"/>3.6. Increment 2: new MoCC and DSA for Automata (MoCC focused version)</h2></div></div></div>

<p>In the previous version the MoCC is only responsible of ensuring that
DSE events (input symbols and end of word event) arrive one at a time.
The DSA choose the right transition to fire, if any.
To do so, fire() has been considered as an helper.  It can thus be
called from the occur() DSA of Symbol element.</p>
<p>We now propose another solution that gives more responsibilities to
the MoCC: it will decide which transition can be fired.</p>
<p>Principle: Transition.fire() in no more an Helper but a Modifier that
will be scheduled by the MoCC.   We add clock on state to know whether
a state is current or not a simulation step.  To be defined.</p>
<p>TODO: to be developed.</p>
</div>
<div class="section" title="3.7. Increment 3: Graphical visualization"><div class="titlepage"><div><div><h2 class="title"><a id="_increment_3_graphical_visualization"/>3.7. Increment 3: Graphical visualization</h2></div></div></div>

<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
On the model
</li><li class="listitem">
A tabular presentation with start and end time of activities
</li><li class="listitem">
A specific view as a Gantt
</li></ul></div>
<p>TODO: to be developed.</p>
</div>
<div class="section" title="3.8. Increment 4: Consider nondeterministic automata."><div class="titlepage"><div><div><h2 class="title"><a id="_increment_4_consider_nondeterministic_automata"/>3.8. Increment 4: Consider nondeterministic automata.</h2></div></div></div>

<p>TODO: to be developed.</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
Two transitions with the same symbol and the same source state.
</li><li class="listitem">
A transition with no label.
</li></ul></div>
<p>Principle: currentState become currentStates.  We maintain the set of
all states that are accessible by the symbols already accepte by the
automaton.</p>
</div>
<div class="section" title="3.9. Increment 5: Pushdown automaton"><div class="titlepage"><div><div><h2 class="title"><a id="_increment_5_pushdown_automaton"/>3.9. Increment 5: Pushdown automaton</h2></div></div></div>

<p>TODO: The purpose of Pushdown Automaton is to illustrate the Feedback
    mechanism.</p>
<p>We will now extend our automaton to include a stack.  The feedback
mechanism will be used to decide whether a transition is firable
according to the symbol on top of the stack.</p>
<div xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2>
<p>These aspect will be included in a future version of the
tutorial when the proposed approach to handle feedbacks will have been
integrated to the GEMOC studio.</p>
</div>
</div>
<div class="section" title="3.10. Increment 6: Call of user actions"><div class="titlepage"><div><div><h2 class="title"><a id="_increment_6_call_of_user_actions"/>3.10. Increment 6: Call of user actions</h2></div></div></div>

<div xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2>
<p>Will be added in a future version of this tutorial.</p>
</div>
</div>
<div class="section" title="3.11. Increment: TBD"><div class="titlepage"><div><div><h2 class="title"><a id="_increment_tbd"/>3.11. Increment: TBD</h2></div></div></div>

<p>Other increments?</p>
</div>
<div class="section" title="3.12. TODO"><div class="titlepage"><div><div><h2 class="title"><a id="_todo"/>3.12. TODO</h2></div></div></div>

<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
Pourquoi automataDSE ? (DSE/ECL part)
</li><li class="listitem">
Define concrete Syntax with Sirius.  Sould it be done in the second Eclipse?
</li><li class="listitem">
rename mocc_* to dse_* to reflect the fact that we would like them to be
DSE.   We must explain in the mapping DSE/MoCC that at this moment, each DSE
generates on MOCCEvent.
</li><li class="listitem">
rename xDSML.model to xDSML.as?
</li><li class="listitem">
Expliquer les automates en partant des exemples, pour eviter la
redondance avec l’explication du MM et plus logique dans l’optique de
du system engineer.
</li><li class="listitem">
Process: ensure a better conformance of the text with the process
</li><li class="listitem">
AS: accept state could be represented as an attribute of the State
element (instead of a reference)
</li><li class="listitem">
Examples have to be redone to make it more clear, smaller (graphic
representation), etc.
</li><li class="listitem">
Define a style for the block GEMOC, use the GEMOC logo.
</li><li class="listitem">
Static semantics?  To be mentioned.  We could provide the OCL
constraint which check whether the model will be executable (non
indeterminism).
</li><li class="listitem">
Give examples of models, <span class="strong"><strong>scenarios</strong></span> and <span class="strong"><strong>expected results</strong></span>.
</li><li class="listitem">
Add expected results in term of animation : want to see current
states, executable transitions, incoming symbols…​
</li><li class="listitem">
A way to formalize scenario (including expected results)?
</li><li class="listitem">
MetaModel or Metamodel or AS?
</li><li class="listitem">
K3: Can we have several @Aspect(className=Automata)
class AutomataAspect { }, one for the ED, one the EF?
</li></ul></div>
<p>Forme du tutoriel :</p>
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
Definir un nouveau type de block GEMOC avec le Logo GEMOC.
</li><li class="listitem">
Comment definir l’equivalent de --atribute tabsize=4 dans le
.asciidoc directement ?
</li></ul></div>
<div xmlns:d="http://docbook.org/ns/docbook" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Warning</h2>
<p>When the .ecore is changed.  The genmodel must be updated and
the code generated again.</p>
</div>
</div>
</div>
<div class="bibliography" title="Bibliography"><div class="titlepage"><div><div><h2 class="title"><a id="_bibliography"/>Bibliography</h2></div></div></div>

<p>The bibliography lists some useful external documents. For a more complete list, please refer to the publications section on <a class="ulink" href="http://gemoc.org">http://gemoc.org</a> site.</p>
<div class="bibliodiv" title="Articles">
<h3 class="title"><a id="d5e802"/>Articles</h3>
<div class="bibliomixed"><a id="d5e804"/><p class="bibliomixed">
<span class="bibliomisc"><a id="globalizing-modeling-languages"/>[globalizing-modeling-languages] <a class="ulink" href="http://hal.inria.fr/hal-00994551">Globalizing Modeling Languages</a> (Benoit Combemale, Julien Deantoni, Benoit Baudry, Robert France, Jean-Marc Jezequel, Jeff Gray), In Computer, IEEE, 2014.</span>
</p></div>
</div>
</div>
<div class="glossary" title="Glossary"><div class="titlepage"><div><div><h2 class="title"><a id="_glossary"/>Glossary</h2></div></div></div>

<div class="variablelist"><dl><dt><span class="term">AS</span></dt><dd>
Abstract Syntax.
</dd><dt><span class="term">API</span></dt><dd>
Application Programming Interface.
</dd><dt><span class="term">Behavioral Semantics</span></dt><dd>
see Execution semantics.
</dd><dt><span class="term">CCSL</span></dt><dd>
Clock-Constraint Specification Language.
</dd><dt><span class="term">Domain Engineer</span></dt><dd>
user of the Modeling Workbench.
</dd><dt><span class="term">DSA</span></dt><dd>
Domain-Specific Action.
</dd><dt><span class="term">DSE</span></dt><dd>
Domain-Specific Event.
</dd><dt><span class="term">DSML</span></dt><dd>
Domain-Specific (Modeling) Language.
</dd><dt><span class="term">Dynamic Semantics</span></dt><dd>
see Execution semantics.
</dd><dt><span class="term">Eclipse Plugin</span></dt><dd>
an Eclipse plugin is a Java project with associated metadata that can be bundled and deployed as a contribution to an Eclipse-based IDE.
</dd><dt><span class="term">ED</span></dt><dd>
Execution Data.
</dd><dt><span class="term">Execution Semantics</span></dt><dd>
Defines when and how elements of a language will produce a model behavior.
</dd><dt><span class="term">GEMOC Studio</span></dt><dd>
Eclipse-based studio integrating both a language workbench and the corresponding modeling workbenches
</dd><dt><span class="term">Language Workbench</span></dt><dd>
a language workbench offers the facilities for designing and implementing modeling languages.
</dd><dt><span class="term">Language Designer</span></dt><dd>
a language designer is the user of the language workbench.
</dd><dt><span class="term">MoCC</span></dt><dd>
Model of Concurrency and Communication
</dd><dt><span class="term">Model</span></dt><dd>
model which contributes to the convent of a View
</dd><dt><span class="term">Modeling Workbench</span></dt><dd>
a modeling workbench offers all the required facilities for editing and animating domain specific models according to a given modeling language.
</dd><dt><span class="term">MSA</span></dt><dd>
Model-Specific Action.
</dd><dt><span class="term">MSE</span></dt><dd>
Model-Specific Event.
</dd><dt><span class="term">RTD</span></dt><dd>
RunTime Data.
</dd><dt><span class="term">Static semantics</span></dt><dd>
Constraints on a model that cannot be expressed in the metamodel.  For example, static semantics can be expressed as OCL invariants.
</dd><dt><span class="term">xDSML</span></dt><dd>
Executable Domain-Specific Modeling Language.
</dd></dl></div>
</div>
<div class="index" title="Index"><div class="titlepage"><div><div><h2 class="title"><a id="_index"/>Index</h2></div></div></div><div class="index"><div class="indexdiv"><h3>D</h3><dl><dt>Decider, <a class="indexterm" href="#_general_options">General options</a></dt></dl></div><div class="indexdiv"><h3>E</h3><dl><dt>Engine, <a class="indexterm" href="#_run_mode">Run mode</a>, <a class="indexterm" href="#_debug_mode">Debug mode</a></dt><dt>Event Manager, <a class="indexterm" href="#_debug_mode">Debug mode</a></dt></dl></div><div class="indexdiv"><h3>G</h3><dl><dt>GEMOC</dt><dd><dl><dt>process, <a class="indexterm" href="#sec-GEMOC-process">Recommanded GEMOC Process</a></dt><dd><dl><dt>overview, <a class="indexterm" href="#sec-GEMOC-architecture">Architecture of a GEMOC xDSML</a></dt></dl></dd></dl></dd></dl></div><div class="indexdiv"><h3>L</h3><dl><dt>language designer, <a class="indexterm" href="#_language_workbench_overview">Language Workbench overview</a></dt><dt>Language workbench, <a class="indexterm" href="#_language_workbench_overview">Language Workbench overview</a></dt><dt>Logical Step, <a class="indexterm" href="#_general_options">General options</a>, <a class="indexterm" href="#modeling-workbench-executing-model-debug-view-section">Debug View</a></dt></dl></div><div class="indexdiv"><h3>M</h3><dl><dt>Modeling workbench, <a class="indexterm" href="#_modeling_workbench_overview">Modeling workbench overview</a></dt></dl></div><div class="indexdiv"><h3>O</h3><dl><dt>overview, <a class="indexterm" href="#sec-GEMOC-architecture">Architecture of a GEMOC xDSML</a></dt></dl></div><div class="indexdiv"><h3>P</h3><dl><dt>process, <a class="indexterm" href="#sec-GEMOC-process">Recommanded GEMOC Process</a></dt><dd><dl><dt>overview, <a class="indexterm" href="#sec-GEMOC-architecture">Architecture of a GEMOC xDSML</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>R</h3><dl><dt>Runtime Data, <a class="indexterm" href="#_debug_mode">Debug mode</a>, <a class="indexterm" href="#modeling-workbench-executing-model-variable-view-section">Variable View</a></dt></dl></div><div class="indexdiv"><h3>S</h3><dl><dt>Sirius, <a class="indexterm" href="#_defining_a_concrete_syntax_with_indexterm_primary_sirius_primary_indexterm_sirius">Defining a concrete syntax with Sirius</a>, <a class="indexterm" href="#_defining_an_animation_view">Defining an animation view</a></dt></dl></div><div class="indexdiv"><h3>T</h3><dl><dt>TFSM, <a class="indexterm" href="#_language_workbench_overview">Language Workbench overview</a>, <a class="indexterm" href="#_modeling_workbench_overview">Modeling workbench overview</a></dt><dd><dl><dt>Language workbench, <a class="indexterm" href="#_language_workbench_overview">Language Workbench overview</a></dt><dt>Modeling workbench, <a class="indexterm" href="#_modeling_workbench_overview">Modeling workbench overview</a></dt></dl></dd><dt>Timeline, <a class="indexterm" href="#_run_mode">Run mode</a>, <a class="indexterm" href="#_debug_mode">Debug mode</a></dt></dl></div></div></div>
</div></body></html>